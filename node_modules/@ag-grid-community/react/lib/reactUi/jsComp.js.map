{"version":3,"sources":["reactUi/jsComp.tsx"],"names":[],"mappings":";;;AAGa,QAAA,UAAU,GAAG,UACtB,WAAwC,EACxC,OAAgB,EAAE,OAAoB,EACtC,GAAgD;IAGhD,IAAM,SAAS,GAAG,CAAC,WAAW,IAAI,WAAW,CAAC,sBAAsB,CAAC;IACrE,IAAI,SAAS,EAAE;QAAE,OAAO;KAAE;IAE1B,IAAM,IAAI,GAAG,oBAAY,CAAC,WAAW,CAAsB,CAAC;IAE5D,IAAI,CAAC,IAAI,EAAE;QAAE,OAAO;KAAE;IAEtB,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;IAE9B,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAE7B,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IAElB,OAAO;QACH,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;QAE9B,IAAI,OAAO,IAAI,OAAO,CAAC,aAAa,EAAE;YAClC,OAAO,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;SAC9C;QAED,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAE1B,IAAI,GAAG,EAAE;YACL,MAAM,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;SAC1B;IACL,CAAC,CAAC;AACN,CAAC,CAAA;AAED,IAAM,MAAM,GAAG,UAAC,GAA2D,EAAE,KAAU;IACnF,IAAI,CAAC,GAAG,EAAE;QAAE,OAAO;KAAE;IAErB,IAAI,GAAG,YAAY,QAAQ,EAAE;QACzB,IAAM,WAAW,GAAG,GAAuB,CAAC;QAC5C,WAAW,CAAC,KAAK,CAAC,CAAC;KACtB;SAAM;QACH,IAAM,MAAM,GAAG,GAA4B,CAAC;QAC5C,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;KAC1B;AACL,CAAC,CAAC;AAEW,QAAA,YAAY,GAAG,UAAC,WAA4B;IACrD,IAAM,OAAO,GAAG,WAAW,CAAC,kBAAkB,EAAE,CAAC;IACjD,IAAI,CAAC,OAAO,EAAE;QAAE,OAAO;KAAE;IACzB,OAAO,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,UAAA,CAAC,IAAI,OAAA,CAAC,EAAD,CAAC,CAAC,CAAC,CAAC,2BAA2B;AACxE,CAAC,CAAC","file":"jsComp.js","sourcesContent":["import { Context, UserCompDetails, UserComponentFactory, IComponent, AgPromise, ICellRendererComp } from '@ag-grid-community/core';\nimport { MutableRefObject } from 'react';\n\nexport const showJsComp = (\n    compDetails: UserCompDetails | undefined, \n    context: Context, eParent: HTMLElement, \n    ref?: MutableRefObject<any> | ((ref: any)=>void)\n)  => {\n\n    const doNothing = !compDetails || compDetails.componentFromFramework;\n    if (doNothing) { return; }\n\n    const comp = createJsComp(compDetails) as ICellRendererComp;\n\n    if (!comp) { return; }\n\n    const compGui = comp.getGui();\n\n    eParent.appendChild(compGui);\n\n    setRef(ref, comp);\n\n    return () => {\n        const compGui = comp.getGui();\n\n        if (compGui && compGui.parentElement) {\n            compGui.parentElement.removeChild(compGui);\n        }\n\n        context.destroyBean(comp);\n\n        if (ref) {\n            setRef(ref, undefined);\n        }\n    };\n}\n\nconst setRef = (ref: MutableRefObject<any> | ((ref: any)=>void) | undefined, value: any) => {\n    if (!ref) { return; }\n    \n    if (ref instanceof Function) {\n        const refCallback = ref as (ref: any)=>void;\n        refCallback(value);\n    } else {\n        const refObj = ref as MutableRefObject<any>;\n        refObj.current = value;\n    }\n};\n\nexport const createJsComp = (compDetails: UserCompDetails): any => {\n    const promise = compDetails.newAgStackInstance();\n    if (!promise) { return; }\n    return promise.resolveNow(null, x => x); // js comps are never async\n};"]}