{"version":3,"sources":["../../src/ts/components/framework/agComponentUtils.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iDAAwD;AAIxD,mDAAkD;AAClD,uCAA+C;AAG/C;IAAsC,oCAAQ;IAA9C;;IA6CA,CAAC;IAxCU,wCAAa,GAApB,UAAqB,YAAoB,EAAE,UAAe;QACtD,IAAM,QAAQ,GAAsB,IAAI,CAAC,yBAAyB,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;QAC1F,IAAI,QAAQ,IAAI,QAAQ,CAAC,eAAe,EAAE;YACtC,OAAO,QAAQ,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;SAC/C;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,oDAAyB,GAAhC,UAAiC,QAAa;QAC1C;YAAA;YAsBA,CAAC;YAnBG,yBAAO,GAAP,UAAQ,MAA2B;gBAC/B,OAAO,KAAK,CAAC;YACjB,CAAC;YAED,wBAAM,GAAN;gBACI,IAAM,cAAc,GAAyB,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACnE,IAAM,IAAI,GAAG,OAAO,cAAc,CAAC;gBACnC,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,SAAS,EAAE;oBAC9D,OAAO,kBAAY,CAAC,QAAQ,GAAG,cAAc,GAAG,SAAS,CAAC,CAAC;iBAC9D;gBACD,IAAI,cAAc,IAAE,IAAI,EAAE;oBACtB,OAAO,kBAAY,CAAC,eAAe,CAAC,CAAC;iBACxC;gBACD,OAAO,cAA6B,CAAC;YACzC,CAAC;YAED,sBAAI,GAAJ,UAAM,MAA2B;gBAC7B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACzB,CAAC;YACL,cAAC;QAAD,CAtBA,AAsBC,IAAA;QAED,OAAO,OAAO,CAAC;IACnB,CAAC;IAEM,kDAAuB,GAA9B,UAA+B,SAAc;QACzC,IAAI,CAAC,SAAS,EAAE;YAAE,OAAO,KAAK,CAAC;SAAE;QACjC,OAAQ,SAAiB,CAAC,SAAS,IAAI,QAAQ,IAAK,SAAiB,CAAC,SAAS,CAAC;IACpF,CAAC;IAzCD;QADC,mBAAS,CAAC,2BAA2B,CAAC;uEACsB;IAHpD,gBAAgB;QAD5B,cAAI,CAAC,kBAAkB,CAAC;OACZ,gBAAgB,CA6C5B;IAAD,uBAAC;CA7CD,AA6CC,CA7CqC,mBAAQ,GA6C7C;AA7CY,4CAAgB","file":"agComponentUtils.js","sourcesContent":["import { Autowired, Bean } from \"../../context/context\";\nimport { IComponent } from \"../../interfaces/iComponent\";\nimport { ComponentMetadata, ComponentMetadataProvider } from \"./componentMetadataProvider\";\nimport { ICellRendererComp, ICellRendererParams } from \"../../rendering/cellRenderers/iCellRenderer\";\nimport { BeanStub } from \"../../context/beanStub\";\nimport { loadTemplate } from \"../../utils/dom\";\n\n@Bean(\"agComponentUtils\")\nexport class AgComponentUtils extends BeanStub {\n\n    @Autowired(\"componentMetadataProvider\")\n    private componentMetadataProvider: ComponentMetadataProvider;\n\n    public adaptFunction(propertyName: string, jsCompFunc: any): any {\n        const metadata: ComponentMetadata = this.componentMetadataProvider.retrieve(propertyName);\n        if (metadata && metadata.functionAdapter) {\n            return metadata.functionAdapter(jsCompFunc);\n        }\n        return null;\n    }\n\n    public adaptCellRendererFunction(callback: any): { new(): IComponent<ICellRendererParams>; } {\n        class Adapter implements ICellRendererComp {\n            private params: ICellRendererParams;\n\n            refresh(params: ICellRendererParams): boolean {\n                return false;\n            }\n\n            getGui(): HTMLElement {\n                const callbackResult: string | HTMLElement = callback(this.params);\n                const type = typeof callbackResult;\n                if (type === 'string' || type === 'number' || type === 'boolean') {\n                    return loadTemplate('<span>' + callbackResult + '</span>');\n                }\n                if (callbackResult==null) {\n                    return loadTemplate('<span></span>');\n                }\n                return callbackResult as HTMLElement;\n            }\n\n            init?(params: ICellRendererParams): void {\n                this.params = params;\n            }\n        }\n\n        return Adapter;\n    }\n\n    public doesImplementIComponent(candidate: any): boolean {\n        if (!candidate) { return false; }\n        return (candidate as any).prototype && 'getGui' in (candidate as any).prototype;\n    }\n}\n"]}