{"version":3,"sources":["../../src/ts/entities/rowPosition.ts"],"names":[],"mappings":"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","file":"rowPosition.js","sourcesContent":["import { Autowired, Bean } from \"../context/context\";\nimport { BeanStub } from \"../context/beanStub\";\nimport { Constants } from \"../constants/constants\";\nimport { IRowModel } from \"../interfaces/iRowModel\";\nimport { RowNode } from \"./rowNode\";\nimport { PinnedRowModel } from \"../pinnedRowModel/pinnedRowModel\";\nimport { exists } from \"../utils/generic\";\nimport { PaginationProxy } from \"../pagination/paginationProxy\";\n\nexport interface RowPosition {\n    /** A positive number from 0 to n, where n is the last row the grid is rendering\n    * or -1 if you want to navigate to the grid header */\n    rowIndex: number;\n\n    /** Either 'top', 'bottom' or null (for not pinned) */\n    rowPinned: string | null;\n}\n\n@Bean('rowPositionUtils')\nexport class RowPositionUtils extends BeanStub {\n\n    @Autowired('rowModel') private rowModel: IRowModel;\n    @Autowired('pinnedRowModel') private pinnedRowModel: PinnedRowModel;\n    @Autowired('paginationProxy') private paginationProxy: PaginationProxy;\n\n    public getFirstRow(): RowPosition | null {\n        let rowIndex = 0;\n        let rowPinned;\n\n        if (this.pinnedRowModel.getPinnedTopRowCount()) {\n            rowPinned = Constants.PINNED_TOP;\n        } else if (this.rowModel.getRowCount()) {\n            rowPinned = null;\n            rowIndex = this.paginationProxy.getPageFirstRow();\n        } else if (this.pinnedRowModel.getPinnedBottomRowCount()) {\n            rowPinned = Constants.PINNED_BOTTOM;\n        }\n\n        return rowPinned === undefined ? null : { rowIndex, rowPinned };\n    }\n\n    public getLastRow(): RowPosition | null {\n        let rowIndex;\n        let rowPinned: string | null = null;\n\n        const pinnedBottomCount = this.pinnedRowModel.getPinnedBottomRowCount();\n        const pinnedTopCount = this.pinnedRowModel.getPinnedTopRowCount();\n\n        if (pinnedBottomCount) {\n            rowPinned = Constants.PINNED_BOTTOM;\n            rowIndex = pinnedBottomCount - 1;\n        } else if (this.rowModel.getRowCount()) {\n            rowPinned = null;\n            rowIndex = this.paginationProxy.getPageLastRow();\n        } else if (pinnedTopCount) {\n            rowPinned = Constants.PINNED_TOP;\n            rowIndex = pinnedTopCount - 1;\n        }\n\n        return rowIndex === undefined ? null : { rowIndex, rowPinned };\n    }\n\n    public getRowNode(gridRow: RowPosition): RowNode | undefined {\n        switch (gridRow.rowPinned) {\n            case Constants.PINNED_TOP:\n                return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];\n            case Constants.PINNED_BOTTOM:\n                return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];\n            default:\n                return this.rowModel.getRow(gridRow.rowIndex);\n        }\n    }\n\n    public sameRow(rowA: RowPosition | undefined, rowB: RowPosition | undefined): boolean {\n        // if both missing\n        if (!rowA && !rowB) { return true; }\n        // if only one missing\n        if ((rowA && !rowB) || (!rowA && rowB)) { return false; }\n        // otherwise compare (use == to compare rowPinned because it can be null or undefined)\n        return rowA!.rowIndex === rowB!.rowIndex && rowA!.rowPinned == rowB!.rowPinned;\n    }\n\n    // tests if this row selection is before the other row selection\n    public before(rowA: RowPosition, rowB: RowPosition): boolean {\n        switch (rowA.rowPinned) {\n            case Constants.PINNED_TOP:\n                // we we are floating top, and other isn't, then we are always before\n                if (rowB.rowPinned !== Constants.PINNED_TOP) { return true; }\n                break;\n            case Constants.PINNED_BOTTOM:\n                // if we are floating bottom, and the other isn't, then we are never before\n                if (rowB.rowPinned !== Constants.PINNED_BOTTOM) { return false; }\n                break;\n            default:\n                // if we are not floating, but the other one is floating...\n                if (exists(rowB.rowPinned)) {\n                    return rowB.rowPinned !== Constants.PINNED_TOP;\n                }\n                break;\n        }\n        return rowA.rowIndex < rowB.rowIndex;\n    }\n}\n"]}