{"version":3,"sources":["../../src/ts/filter/provided/date/dateCompWrapper.ts"],"names":[],"mappings":"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","file":"dateCompWrapper.js","sourcesContent":["import { IDateComp, IDateParams } from '../../../rendering/dateComponent';\nimport { UserComponentFactory } from '../../../components/framework/userComponentFactory';\nimport { Context } from '../../../context/context';\nimport { IAfterGuiAttachedParams } from '../../../interfaces/iAfterGuiAttachedParams';\nimport { setDisplayed } from '../../../utils/dom';\n\n/** Provides sync access to async component. Date component can be lazy created - this class encapsulates\n * this by keeping value locally until DateComp has loaded, then passing DateComp the value. */\nexport class DateCompWrapper {\n    private dateComp: IDateComp | null | undefined;\n    private tempValue: Date | null;\n    private disabled: boolean | null;\n    private displayed: boolean | null;\n    private alive = true;\n    private context: Context;\n    private eParent: HTMLElement;\n\n    constructor(context: Context, userComponentFactory: UserComponentFactory, dateComponentParams: IDateParams, eParent: HTMLElement) {\n        this.context = context;\n        this.eParent = eParent;\n\n        const compDetails = userComponentFactory.getDateCompDetails(dateComponentParams);\n        const promise = compDetails.newAgStackInstance();\n\n        promise!.then(dateComp => {\n            // because async, check the filter still exists after component comes back\n            if (!this.alive) {\n                context.destroyBean(dateComp);\n                return;\n            }\n\n            this.dateComp = dateComp;\n\n            if (!dateComp) { return; }\n\n            eParent.appendChild(dateComp.getGui());\n\n            if (dateComp.afterGuiAttached) {\n                dateComp.afterGuiAttached();\n            }\n\n            if (this.tempValue) {\n                dateComp.setDate(this.tempValue);\n            }\n            if (this.disabled != null) {\n                this.setDateCompDisabled(this.disabled);\n            }\n        });\n    }\n\n    public destroy(): void {\n        this.alive = false;\n        this.dateComp = this.context.destroyBean(this.dateComp);\n    }\n\n    public getDate(): Date | null {\n        return this.dateComp ? this.dateComp.getDate() : this.tempValue;\n    }\n\n    public setDate(value: Date | null): void {\n        if (this.dateComp) {\n            this.dateComp.setDate(value);\n        } else {\n            this.tempValue = value;\n        }\n    }\n\n    public setDisabled(disabled: boolean): void {\n        if (this.dateComp) {\n            this.setDateCompDisabled(disabled);\n        } else {\n            this.disabled = disabled;\n        }\n    }\n\n    public setDisplayed(displayed: boolean) {\n        setDisplayed(this.eParent, displayed);\n    }\n\n    public setInputPlaceholder(placeholder: string): void {\n        if (this.dateComp && this.dateComp.setInputPlaceholder) {\n            this.dateComp.setInputPlaceholder(placeholder);\n        }\n    }\n\n    public setInputAriaLabel(label: string): void {\n        if (this.dateComp && this.dateComp.setInputAriaLabel) {\n            this.dateComp.setInputAriaLabel(label);\n        }\n    }\n\n    public afterGuiAttached(params?: IAfterGuiAttachedParams): void {\n        if (this.dateComp && typeof this.dateComp.afterGuiAttached === 'function') {\n            this.dateComp.afterGuiAttached(params);\n        }\n    }\n\n    private setDateCompDisabled(disabled: boolean): void {\n        if (this.dateComp == null) { return; }\n        if (this.dateComp.setDisabled == null) { return; }\n\n        this.dateComp.setDisabled(disabled);\n    }\n\n}\n"]}