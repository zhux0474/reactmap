{"version":3,"sources":["../../src/ts/headerRendering/row/headerRowComp.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iDAAkE;AAClE,yCAAmD;AACnD,uCAAmD;AACnD,6CAAyE;AACzE,qDAAoD;AAGpD,iEAAgE;AAEhE,gFAA+E;AAE/E,qFAAoF;AAIpF,IAAY,aAIX;AAJD,WAAY,aAAa;IACrB,uCAAsB,CAAA;IACtB,kCAAiB,CAAA;IACjB,2CAA0B,CAAA;AAC9B,CAAC,EAJW,aAAa,GAAb,qBAAa,KAAb,qBAAa,QAIxB;AAED;IAAmC,iCAAS;IAMxC,uBAAY,IAAmB;QAA/B,YACI,iBAAO,SAQV;QAXO,iBAAW,GAAuE,EAAE,CAAC;QAKzF,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,EAAE,IAAE,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC;YAC1E,IAAI,CAAC,OAAO,EAAE,IAAE,aAAa,CAAC,eAAe,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAAC,CAAC,sBAAsB,CAAC;QAE3H,KAAI,CAAC,WAAW,CAAC,UAAU,CAAA,gCAA6B,UAAU,2BAAqB,CAAC,CAAC;QAEzF,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;IACrB,CAAC;IAED,mCAAmC;IAE3B,4BAAI,GAAZ;QADA,iBAaC;QAVG,IAAM,SAAS,GAAmB;YAC9B,YAAY,EAAE,UAAA,SAAS,IAAI,OAAA,KAAI,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,EAAzC,CAAyC;YACpE,SAAS,EAAE,UAAA,MAAM,IAAI,OAAA,KAAI,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,EAAnC,CAAmC;YACxD,MAAM,EAAE,UAAA,GAAG,IAAI,OAAA,KAAI,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,EAA7B,CAA6B;YAC5C,cAAc,EAAE,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAA1B,CAA0B;YACnD,QAAQ,EAAE,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,EAAjC,CAAiC;YACpD,eAAe,EAAE,UAAA,QAAQ,IAAI,OAAA,sBAAe,CAAC,KAAI,CAAC,MAAM,EAAE,EAAE,QAAQ,CAAC,EAAxC,CAAwC;SACxE,CAAC;QAEF,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IACjC,CAAC;IAGO,0CAAkB,GAA1B;QACI,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC;IAEO,sCAAc,GAAtB,UAAuB,KAA+B;QAAtD,iBAoCC;QAnCG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE;YAAE,OAAO;SAAE;QAEhC,IAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC;QAClC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAEtB,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;YACd,IAAM,EAAE,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAChC,IAAI,IAAI,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;YACxB,OAAO,QAAQ,CAAC,EAAE,CAAC,CAAC;YAEpB,IAAI,IAAI,IAAE,IAAI,EAAE;gBACZ,IAAI,GAAG,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;gBACnC,KAAI,CAAC,MAAM,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;aAC5C;YAED,KAAI,CAAC,WAAW,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;QAChC,CAAC,CAAC,CAAC;QAEH,sBAAa,CAAC,QAAQ,EAAE,UAAC,EAAU,EAAE,IAAoD;YACrF,KAAI,CAAC,MAAM,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACzC,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QAEH,IAAM,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,CAAC;QAClE,IAAI,cAAc,EAAE;YAChB,IAAM,KAAK,GAAG,6BAAoB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACrD,2FAA2F;YAC3F,KAAK,CAAC,IAAI,CAAE,UAAC,CAAiD,EAAE,CAAiD;gBAC7G,IAAM,KAAK,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC,mBAAmB,EAAE,CAAC,OAAO,EAAG,CAAC;gBAC3D,IAAM,KAAK,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC,mBAAmB,EAAE,CAAC,OAAO,EAAG,CAAC;gBAC3D,OAAO,KAAK,GAAG,KAAK,CAAC;YACzB,CAAC,CAAC,CAAC;YACH,IAAM,eAAe,GAAG,KAAK,CAAC,GAAG,CAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,EAAE,EAAV,CAAU,CAAE,CAAC;YACrD,sBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,eAAe,CAAC,CAAC;SACpD;IACL,CAAC;IAEO,wCAAgB,GAAxB,UAAyB,UAAkC;QAEvD,IAAI,MAAsD,CAAC;QAE3D,QAAQ,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE;YACzB,KAAK,aAAa,CAAC,YAAY;gBAC3B,MAAM,GAAG,IAAI,yCAAmB,CAAC,UAAiC,CAAC,CAAC;gBACpE,MAAM;YACV,KAAK,aAAa,CAAC,eAAe;gBAC9B,MAAM,GAAG,IAAI,2CAAoB,CAAC,UAAkC,CAAC,CAAC;gBACtE,MAAM;YACV;gBACI,MAAM,GAAG,IAAI,+BAAc,CAAC,UAA4B,CAAC,CAAC;gBAC1D,MAAM;SACb;QAED,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QACxB,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;QAEhC,OAAO,MAAM,CAAC;IAClB,CAAC;IA7ED;QADC,uBAAa;6CAab;IAGD;QADC,oBAAU;2DAGV;IA6DL,oBAAC;CAjGD,AAiGC,CAjGkC,qBAAS,GAiG3C;AAjGY,sCAAa","file":"headerRowComp.js","sourcesContent":["import { PostConstruct, PreDestroy } from '../../context/context';\nimport { setAriaRowIndex } from '../../utils/aria';\nimport { setDomChildOrder } from '../../utils/dom';\nimport { getAllValuesInObject, iterateObject } from '../../utils/object';\nimport { Component } from '../../widgets/component';\nimport { AbstractHeaderCellComp } from '../cells/abstractCell/abstractHeaderCellComp';\nimport { AbstractHeaderCellCtrl } from '../cells/abstractCell/abstractHeaderCellCtrl';\nimport { HeaderCellComp } from '../cells/column/headerCellComp';\nimport { HeaderCellCtrl } from '../cells/column/headerCellCtrl';\nimport { HeaderGroupCellComp } from '../cells/columnGroup/headerGroupCellComp';\nimport { HeaderGroupCellCtrl } from '../cells/columnGroup/headerGroupCellCtrl';\nimport { HeaderFilterCellComp } from '../cells/floatingFilter/headerFilterCellComp';\nimport { HeaderFilterCellCtrl } from '../cells/floatingFilter/headerFilterCellCtrl';\nimport { HeaderRowCtrl, IHeaderRowComp } from './headerRowCtrl';\n\nexport enum HeaderRowType {\n    COLUMN_GROUP = 'group',\n    COLUMN = 'column', \n    FLOATING_FILTER = 'filter'\n}\n\nexport class HeaderRowComp extends Component {\n\n    private ctrl: HeaderRowCtrl;\n\n    private headerComps: { [key: string]: AbstractHeaderCellComp<AbstractHeaderCellCtrl>; } = {};\n\n    constructor(ctrl: HeaderRowCtrl) {\n        super();\n\n        const extraClass = ctrl.getType()==HeaderRowType.COLUMN_GROUP ? `ag-header-row-column-group` :\n                            ctrl.getType()==HeaderRowType.FLOATING_FILTER ? `ag-header-row-column-filter` : `ag-header-row-column`;\n\n        this.setTemplate(/* html */`<div class=\"ag-header-row ${extraClass}\" role=\"row\"></div>`);\n\n        this.ctrl = ctrl;\n    }\n\n    //noinspection JSUnusedLocalSymbols\n    @PostConstruct\n    private init(): void {\n\n        const compProxy: IHeaderRowComp = {\n            setTransform: transform => this.getGui().style.transform = transform,\n            setHeight: height => this.getGui().style.height = height,\n            setTop: top => this.getGui().style.top = top,\n            setHeaderCtrls: ctrls => this.setHeaderCtrls(ctrls),\n            setWidth: width => this.getGui().style.width = width,\n            setAriaRowIndex: rowIndex => setAriaRowIndex(this.getGui(), rowIndex)\n        };\n\n        this.ctrl.setComp(compProxy);\n    }\n\n    @PreDestroy\n    private destroyHeaderCtrls(): void {\n        this.setHeaderCtrls([]);\n    }\n\n    private setHeaderCtrls(ctrls: AbstractHeaderCellCtrl[]): void {\n        if (!this.isAlive()) { return; }\n\n        const oldComps = this.headerComps;\n        this.headerComps = {};\n\n        ctrls.forEach(ctrl => {\n            const id = ctrl.getInstanceId();\n            let comp = oldComps[id];\n            delete oldComps[id];\n\n            if (comp==null) {\n                comp = this.createHeaderComp(ctrl);\n                this.getGui().appendChild(comp.getGui());\n            }\n\n            this.headerComps[id] = comp;\n        });\n\n        iterateObject(oldComps, (id: string, comp: AbstractHeaderCellComp<AbstractHeaderCellCtrl>)=> {\n            this.getGui().removeChild(comp.getGui());\n            this.destroyBean(comp);\n        });\n\n        const ensureDomOrder = this.gridOptionsWrapper.isEnsureDomOrder();\n        if (ensureDomOrder) {\n            const comps = getAllValuesInObject(this.headerComps);\n            // ordering the columns by left position orders them in the order they appear on the screen\n            comps.sort( (a: AbstractHeaderCellComp<AbstractHeaderCellCtrl>, b: AbstractHeaderCellComp<AbstractHeaderCellCtrl>) => {\n                const leftA = a.getCtrl().getColumnGroupChild().getLeft()!;\n                const leftB = b.getCtrl().getColumnGroupChild().getLeft()!;\n                return leftA - leftB;\n            });\n            const elementsInOrder = comps.map( c => c.getGui() );\n            setDomChildOrder(this.getGui(), elementsInOrder);\n        }\n    }\n\n    private createHeaderComp(headerCtrl: AbstractHeaderCellCtrl): AbstractHeaderCellComp<AbstractHeaderCellCtrl> {\n\n        let result: AbstractHeaderCellComp<AbstractHeaderCellCtrl>;\n\n        switch (this.ctrl.getType()) {\n            case HeaderRowType.COLUMN_GROUP:\n                result = new HeaderGroupCellComp(headerCtrl as HeaderGroupCellCtrl);\n                break;\n            case HeaderRowType.FLOATING_FILTER:\n                result = new HeaderFilterCellComp(headerCtrl as HeaderFilterCellCtrl);\n                break;\n            default:\n                result = new HeaderCellComp(headerCtrl as HeaderCellCtrl);\n                break;\n        }\n\n        this.createBean(result);\n        result.setParentComponent(this);\n\n        return result;\n    }\n}\n"]}