{"version":3,"sources":["../../src/ts/rendering/cellEditors/selectCellEditor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,iDAAkD;AAGlD,+DAA8D;AAC9D,2EAAiE;AAEjE,+CAA8C;AAC9C,mDAAkD;AAMlD;IAAsC,oCAAc;IAShD;QAAA,YACI,kBAAM,sGAAsG,CAAC,SAChH;QAJO,oBAAc,GAAY,KAAK,CAAC;;IAIxC,CAAC;IAEM,+BAAI,GAAX,UAAY,MAA+B;QAA3C,iBAgCC;QA/BG,IAAI,CAAC,kBAAkB,GAAG,MAAM,CAAC,eAAe,CAAC;QAEjD,IAAI,iBAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;YACxB,OAAO,CAAC,IAAI,CAAC,gDAAgD,CAAC,CAAC;YAC/D,OAAO;SACV;QAED,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,QAAQ,KAAK,iBAAO,CAAC,KAAK,CAAC;QAExD,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAU;YAC7B,IAAM,MAAM,GAAe,EAAE,KAAK,OAAA,EAAE,CAAC;YACrC,IAAM,cAAc,GAAG,KAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;YAChG,IAAM,mBAAmB,GAAG,cAAc,KAAK,IAAI,IAAI,cAAc,KAAK,SAAS,CAAC;YACpF,MAAM,CAAC,IAAI,GAAG,mBAAmB,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC;YAE3D,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YAC/B,QAAQ,GAAG,QAAQ,IAAI,MAAM,CAAC,KAAK,KAAK,KAAK,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,IAAI,QAAQ,EAAE;YACV,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SAC7C;aAAM,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE;YAC7B,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACjD;QAED,mFAAmF;QACnF,oBAAoB;QACpB,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE,EAAE;YAC1C,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,cAAM,OAAA,MAAM,CAAC,WAAW,EAAE,EAApB,CAAoB,CAAC,CAAC;SAC1D;IACL,CAAC;IAEM,2CAAgB,GAAvB;QACI,IAAI,IAAI,CAAC,kBAAkB,EAAE;YACzB,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC,KAAK,EAAE,CAAC;SAC9C;QAED,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;SAC7B;IACL,CAAC;IAEM,kCAAO,GAAd;QACI,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC,KAAK,EAAE,CAAC;IAC/C,CAAC;IAEM,mCAAQ,GAAf;QACI,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACnC,CAAC;IAEM,kCAAO,GAAd;QACI,OAAO,KAAK,CAAC;IACjB,CAAC;IA/DmC;QAAnC,mBAAS,CAAC,uBAAuB,CAAC;mEAAsD;IACjE;QAAvB,kCAAW,CAAC,SAAS,CAAC;qDAA2B;IA+DtD,uBAAC;CApED,AAoEC,CApEqC,+BAAc,GAoEnD;AApEY,4CAAgB","file":"selectCellEditor.js","sourcesContent":["import { AgSelect } from \"../../widgets/agSelect\";\nimport { Autowired } from \"../../context/context\";\nimport { ICellEditorComp, ICellEditorParams } from \"../../interfaces/iCellEditor\";\nimport { ValueFormatterService } from \"../valueFormatterService\";\nimport { PopupComponent } from \"../../widgets/popupComponent\";\nimport { RefSelector } from \"../../widgets/componentAnnotations\";\nimport { ListOption } from \"../../widgets/agList\";\nimport { missing } from \"../../utils/generic\";\nimport { KeyCode } from '../../constants/keyCode';\n\nexport interface ISelectCellEditorParams extends ICellEditorParams {\n    values: any[];\n}\n\nexport class SelectCellEditor extends PopupComponent implements ICellEditorComp {\n\n    private focusAfterAttached: boolean;\n\n    @Autowired('valueFormatterService') private valueFormatterService: ValueFormatterService;\n    @RefSelector('eSelect') private eSelect: AgSelect;\n\n    private startedByEnter: boolean = false;\n\n    constructor() {\n        super('<div class=\"ag-cell-edit-wrapper\"><ag-select class=\"ag-cell-editor\" ref=\"eSelect\"></ag-select></div>');\n    }\n\n    public init(params: ISelectCellEditorParams): void {\n        this.focusAfterAttached = params.cellStartedEdit;\n\n        if (missing(params.values)) {\n            console.warn('AG Grid: no values found for select cellEditor');\n            return;\n        }\n\n        this.startedByEnter = params.keyPress === KeyCode.ENTER;\n\n        let hasValue = false;\n        params.values.forEach((value: any) => {\n            const option: ListOption = { value };\n            const valueFormatted = this.valueFormatterService.formatValue(params.column, null, null, value);\n            const valueFormattedExits = valueFormatted !== null && valueFormatted !== undefined;\n            option.text = valueFormattedExits ? valueFormatted : value;\n\n            this.eSelect.addOption(option);\n            hasValue = hasValue || params.value === value;\n        });\n\n        if (hasValue) {\n            this.eSelect.setValue(params.value, true);\n        } else if (params.values.length) {\n            this.eSelect.setValue(params.values[0], true);\n        }\n\n        // we don't want to add this if full row editing, otherwise selecting will stop the\n        // full row editing.\n        if (!this.gridOptionsWrapper.isFullRowEdit()) {\n            this.eSelect.onValueChange(() => params.stopEditing());\n        }\n    }\n\n    public afterGuiAttached() {\n        if (this.focusAfterAttached) {\n            this.eSelect.getFocusableElement().focus();\n        }\n\n        if (this.startedByEnter) {\n            this.eSelect.showPicker();\n        }\n    }\n\n    public focusIn(): void {\n        this.eSelect.getFocusableElement().focus();\n    }\n\n    public getValue(): any {\n        return this.eSelect.getValue();\n    }\n\n    public isPopup() {\n        return false;\n    }\n}"]}