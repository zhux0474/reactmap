{"version":3,"sources":["../../src/ts/widgets/agCheckbox.ts"],"names":[],"mappings":"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","file":"agCheckbox.js","sourcesContent":["import { Events, CheckboxChangedEvent } from \"../events\";\nimport { AgEvent } from '../events';\nimport { AgAbstractInputField, IInputField } from './agAbstractInputField';\nimport { LabelAlignment } from './agAbstractLabel';\nimport { addOrRemoveCssClass } from '../utils/dom';\n\nexport interface ChangeEvent extends AgEvent {\n    selected: boolean;\n}\n\nexport class AgCheckbox extends AgAbstractInputField<HTMLInputElement, boolean> {\n\n    protected labelAlignment: LabelAlignment = 'right';\n\n    private selected?: boolean = false;\n    private readOnly = false;\n    private passive = false;\n\n    constructor(config?: IInputField, className = 'ag-checkbox', inputType = 'checkbox') {\n        super(config, className, inputType);\n    }\n\n    protected addInputListeners() {\n        this.addManagedListener(this.eInput, 'click', this.onCheckboxClick.bind(this));\n        this.addManagedListener(this.eLabel, 'click', this.toggle.bind(this));\n    }\n\n    public getNextValue(): boolean {\n        return this.selected === undefined ? true : !this.selected;\n    }\n\n    public setPassive(passive: boolean): void {\n        this.passive = passive;\n    }\n\n    public isReadOnly(): boolean {\n        return this.readOnly;\n    }\n\n    public setReadOnly(readOnly: boolean): void {\n        addOrRemoveCssClass(this.eWrapper, 'ag-disabled', readOnly);\n        this.eInput.disabled = readOnly;\n        this.readOnly = readOnly;\n    }\n\n    public setDisabled(disabled: boolean): this {\n        addOrRemoveCssClass(this.eWrapper, 'ag-disabled', disabled);\n\n        return super.setDisabled(disabled);\n    }\n\n    public toggle(): void {\n        if (this.eInput.disabled) { return; }\n\n        const previousValue = this.isSelected();\n        const nextValue = this.getNextValue();\n\n        if (this.passive) {\n            this.dispatchChange(nextValue, previousValue);\n        } else {\n            this.setValue(nextValue);\n        }\n    }\n\n    public getValue(): boolean | undefined {\n        return this.isSelected();\n    }\n\n    public setValue(value?: boolean, silent?: boolean): this {\n        this.refreshSelectedClass(value);\n        this.setSelected(value, silent);\n\n        return this;\n    }\n\n    public setName(name: string): this {\n        const input = this.getInputElement();\n        input.name = name;\n\n        return this;\n    }\n\n    protected isSelected(): boolean | undefined {\n        return this.selected;\n    }\n\n    private setSelected(selected?: boolean, silent?: boolean): void {\n        if (this.isSelected() === selected) {\n            return;\n        }\n\n        this.previousValue = this.isSelected();\n\n        selected = this.selected = typeof selected === 'boolean' ? selected : undefined;\n        this.eInput.checked = selected!;\n        this.eInput.indeterminate = selected === undefined;\n\n        if (!silent) {\n            this.dispatchChange(this.selected, this.previousValue);\n        }\n    }\n\n    private dispatchChange(selected: boolean | undefined, previousValue: boolean | undefined, event?: MouseEvent) {\n        this.dispatchEvent({ type: AgCheckbox.EVENT_CHANGED, selected, previousValue, event });\n\n        const input = this.getInputElement();\n        const checkboxChangedEvent: CheckboxChangedEvent = {\n            type: Events.EVENT_CHECKBOX_CHANGED,\n            id: input.id,\n            name: input.name,\n            selected,\n            previousValue\n        };\n\n        this.eventService.dispatchEvent(checkboxChangedEvent);\n    }\n\n    private onCheckboxClick(e: MouseEvent) {\n        if (this.passive || this.eInput.disabled) { return; }\n        const previousValue = this.isSelected();\n        const selected = this.selected = (e.target as HTMLInputElement).checked;\n        this.refreshSelectedClass(selected);\n        this.dispatchChange(selected, previousValue, e);\n    }\n\n    private refreshSelectedClass(value?: boolean | null) {\n        addOrRemoveCssClass(this.eWrapper, 'ag-checked', value === true);\n        addOrRemoveCssClass(this.eWrapper, 'ag-indeterminate', value == null);\n    }\n}\n"]}