{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport { Constants } from \"../../constants/constants\";\nimport { BeanStub } from \"../../context/beanStub\";\nimport { Autowired } from \"../../context/context\";\nimport { Events } from \"../../eventKeys\";\nimport { CenterWidthFeature } from \"../../gridBodyComp/centerWidthFeature\";\nimport { NumberSequence } from \"../../utils\";\nimport { BodyDropTarget } from \"../columnDrag/bodyDropTarget\";\nimport { HeaderRowType } from \"../row/headerRowComp\";\nimport { HeaderRowCtrl } from \"../row/headerRowCtrl\";\n\nvar HeaderRowContainerCtrl =\n/** @class */\nfunction (_super) {\n  __extends(HeaderRowContainerCtrl, _super);\n\n  function HeaderRowContainerCtrl(pinned) {\n    var _this = _super.call(this) || this;\n\n    _this.groupsRowCtrls = [];\n    _this.pinned = pinned;\n    return _this;\n  }\n\n  HeaderRowContainerCtrl.prototype.setComp = function (comp, eGui) {\n    this.comp = comp;\n    this.setupCenterWidth();\n    this.setupPinnedWidth();\n    this.setupDragAndDrop(eGui);\n    this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, this.onGridColumnsChanged.bind(this));\n    this.ctrlsService.registerHeaderContainer(this, this.pinned);\n\n    if (this.columnModel.isReady()) {\n      this.refresh();\n    }\n  };\n\n  HeaderRowContainerCtrl.prototype.setupDragAndDrop = function (dropContainer) {\n    var bodyDropTarget = new BodyDropTarget(this.pinned, dropContainer);\n    this.createManagedBean(bodyDropTarget);\n  };\n\n  HeaderRowContainerCtrl.prototype.refresh = function (keepColumns) {\n    var _this = this;\n\n    if (keepColumns === void 0) {\n      keepColumns = false;\n    }\n\n    var sequence = new NumberSequence();\n    var focusedHeaderPosition = this.focusService.getFocusHeaderToUseAfterRefresh();\n\n    var refreshColumnGroups = function () {\n      var groupRowCount = _this.columnModel.getHeaderRowCount() - 1;\n      _this.groupsRowCtrls = _this.destroyBeans(_this.groupsRowCtrls);\n\n      for (var i = 0; i < groupRowCount; i++) {\n        var ctrl = _this.createBean(new HeaderRowCtrl(sequence.next(), _this.pinned, HeaderRowType.COLUMN_GROUP));\n\n        _this.groupsRowCtrls.push(ctrl);\n      }\n    };\n\n    var refreshColumns = function () {\n      var rowIndex = sequence.next();\n      var needNewInstance = _this.columnsRowCtrl == null || !keepColumns || _this.columnsRowCtrl.getRowIndex() !== rowIndex;\n\n      if (needNewInstance) {\n        _this.destroyBean(_this.columnsRowCtrl);\n\n        _this.columnsRowCtrl = _this.createBean(new HeaderRowCtrl(rowIndex, _this.pinned, HeaderRowType.COLUMN));\n      }\n    };\n\n    var refreshFilters = function () {\n      var includeFloatingFilter = !_this.columnModel.isPivotMode() && _this.columnModel.hasFloatingFilters();\n\n      var destroyPreviousComp = function () {\n        _this.filtersRowCtrl = _this.destroyBean(_this.filtersRowCtrl);\n      };\n\n      if (!includeFloatingFilter) {\n        destroyPreviousComp();\n        return;\n      }\n\n      var rowIndex = sequence.next();\n\n      if (_this.filtersRowCtrl) {\n        var rowIndexMismatch = _this.filtersRowCtrl.getRowIndex() !== rowIndex;\n\n        if (!keepColumns || rowIndexMismatch) {\n          destroyPreviousComp();\n        }\n      }\n\n      if (!_this.filtersRowCtrl) {\n        _this.filtersRowCtrl = _this.createBean(new HeaderRowCtrl(rowIndex, _this.pinned, HeaderRowType.FLOATING_FILTER));\n      }\n    };\n\n    refreshColumnGroups();\n    refreshColumns();\n    refreshFilters();\n    var allCtrls = this.getAllCtrls();\n    this.comp.setCtrls(allCtrls);\n    this.restoreFocusOnHeader(focusedHeaderPosition);\n  };\n\n  HeaderRowContainerCtrl.prototype.restoreFocusOnHeader = function (position) {\n    if (position == null || position.column.getPinned() != this.pinned) {\n      return;\n    }\n\n    this.focusService.focusHeaderPosition({\n      headerPosition: position\n    });\n  };\n\n  HeaderRowContainerCtrl.prototype.getAllCtrls = function () {\n    var res = __spreadArrays(this.groupsRowCtrls, [this.columnsRowCtrl]);\n\n    if (this.filtersRowCtrl) {\n      res.push(this.filtersRowCtrl);\n    }\n\n    return res;\n  }; // grid cols have changed - this also means the number of rows in the header can have\n  // changed. so we remove all the old rows and insert new ones for a complete refresh\n\n\n  HeaderRowContainerCtrl.prototype.onGridColumnsChanged = function () {\n    this.refresh(true);\n  };\n\n  HeaderRowContainerCtrl.prototype.setupCenterWidth = function () {\n    var _this = this;\n\n    if (this.pinned != null) {\n      return;\n    }\n\n    this.createManagedBean(new CenterWidthFeature(function (width) {\n      return _this.comp.setCenterWidth(width + \"px\");\n    }));\n  };\n\n  HeaderRowContainerCtrl.prototype.setHorizontalScroll = function (offset) {\n    this.comp.setContainerTransform(\"translateX(\" + offset + \"px)\");\n  };\n\n  HeaderRowContainerCtrl.prototype.setupPinnedWidth = function () {\n    var _this = this;\n\n    if (this.pinned == null) {\n      return;\n    }\n\n    var pinningLeft = this.pinned === Constants.PINNED_LEFT;\n    var pinningRight = this.pinned === Constants.PINNED_RIGHT;\n\n    var listener = function () {\n      var width = pinningLeft ? _this.pinnedWidthService.getPinnedLeftWidth() : _this.pinnedWidthService.getPinnedRightWidth();\n\n      if (width == null) {\n        return;\n      } // can happen at initialisation, width not yet set\n\n\n      var hidden = width == 0;\n\n      var isRtl = _this.gridOptionsWrapper.isEnableRtl();\n\n      var scrollbarWidth = _this.gridOptionsWrapper.getScrollbarWidth(); // if there is a scroll showing (and taking up space, so Windows, and not iOS)\n      // in the body, then we add extra space to keep header aligned with the body,\n      // as body width fits the cols and the scrollbar\n\n\n      var addPaddingForScrollbar = _this.scrollVisibleService.isVerticalScrollShowing() && (isRtl && pinningLeft || !isRtl && pinningRight);\n      var widthWithPadding = addPaddingForScrollbar ? width + scrollbarWidth : width;\n\n      _this.comp.setPinnedContainerWidth(widthWithPadding + 'px');\n\n      _this.comp.addOrRemoveCssClass('ag-hidden', hidden);\n    };\n\n    this.addManagedListener(this.eventService, Events.EVENT_LEFT_PINNED_WIDTH_CHANGED, listener);\n    this.addManagedListener(this.eventService, Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED, listener);\n    this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, listener);\n    this.addManagedListener(this.eventService, Events.EVENT_SCROLLBAR_WIDTH_CHANGED, listener);\n  };\n\n  HeaderRowContainerCtrl.prototype.getHtmlElementForColumnHeader = function (column) {\n    if (this.columnsRowCtrl) {\n      return this.columnsRowCtrl.getHtmlElementForColumnHeader(column);\n    }\n  };\n\n  HeaderRowContainerCtrl.prototype.getRowType = function (rowIndex) {\n    var allCtrls = this.getAllCtrls();\n    var ctrl = allCtrls[rowIndex];\n    return ctrl ? ctrl.getType() : undefined;\n  };\n\n  HeaderRowContainerCtrl.prototype.focusHeader = function (rowIndex, column, event) {\n    var allCtrls = this.getAllCtrls();\n    var ctrl = allCtrls[rowIndex];\n\n    if (!ctrl) {\n      return false;\n    }\n\n    return ctrl.focusHeader(column, event);\n  };\n\n  HeaderRowContainerCtrl.prototype.getRowCount = function () {\n    return this.getAllCtrls().length;\n  };\n\n  __decorate([Autowired('ctrlsService')], HeaderRowContainerCtrl.prototype, \"ctrlsService\", void 0);\n\n  __decorate([Autowired('scrollVisibleService')], HeaderRowContainerCtrl.prototype, \"scrollVisibleService\", void 0);\n\n  __decorate([Autowired('pinnedWidthService')], HeaderRowContainerCtrl.prototype, \"pinnedWidthService\", void 0);\n\n  __decorate([Autowired('columnModel')], HeaderRowContainerCtrl.prototype, \"columnModel\", void 0);\n\n  __decorate([Autowired('focusService')], HeaderRowContainerCtrl.prototype, \"focusService\", void 0);\n\n  return HeaderRowContainerCtrl;\n}(BeanStub);\n\nexport { HeaderRowContainerCtrl };","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/core/dist/es6/headerRendering/rowContainer/headerRowContainerCtrl.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__spreadArrays","s","il","k","a","j","jl","Constants","BeanStub","Autowired","Events","CenterWidthFeature","NumberSequence","BodyDropTarget","HeaderRowType","HeaderRowCtrl","HeaderRowContainerCtrl","_super","pinned","_this","call","groupsRowCtrls","setComp","comp","eGui","setupCenterWidth","setupPinnedWidth","setupDragAndDrop","addManagedListener","eventService","EVENT_GRID_COLUMNS_CHANGED","onGridColumnsChanged","bind","ctrlsService","registerHeaderContainer","columnModel","isReady","refresh","dropContainer","bodyDropTarget","createManagedBean","keepColumns","sequence","focusedHeaderPosition","focusService","getFocusHeaderToUseAfterRefresh","refreshColumnGroups","groupRowCount","getHeaderRowCount","destroyBeans","ctrl","createBean","next","COLUMN_GROUP","push","refreshColumns","rowIndex","needNewInstance","columnsRowCtrl","getRowIndex","destroyBean","COLUMN","refreshFilters","includeFloatingFilter","isPivotMode","hasFloatingFilters","destroyPreviousComp","filtersRowCtrl","rowIndexMismatch","FLOATING_FILTER","allCtrls","getAllCtrls","setCtrls","restoreFocusOnHeader","position","column","getPinned","focusHeaderPosition","headerPosition","res","width","setCenterWidth","setHorizontalScroll","offset","setContainerTransform","pinningLeft","PINNED_LEFT","pinningRight","PINNED_RIGHT","listener","pinnedWidthService","getPinnedLeftWidth","getPinnedRightWidth","hidden","isRtl","gridOptionsWrapper","isEnableRtl","scrollbarWidth","getScrollbarWidth","addPaddingForScrollbar","scrollVisibleService","isVerticalScrollShowing","widthWithPadding","setPinnedContainerWidth","addOrRemoveCssClass","EVENT_LEFT_PINNED_WIDTH_CHANGED","EVENT_RIGHT_PINNED_WIDTH_CHANGED","EVENT_SCROLL_VISIBILITY_CHANGED","EVENT_SCROLLBAR_WIDTH_CHANGED","getHtmlElementForColumnHeader","getRowType","getType","undefined","focusHeader","event","getRowCount"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { Constants } from \"../../constants/constants\";\nimport { BeanStub } from \"../../context/beanStub\";\nimport { Autowired } from \"../../context/context\";\nimport { Events } from \"../../eventKeys\";\nimport { CenterWidthFeature } from \"../../gridBodyComp/centerWidthFeature\";\nimport { NumberSequence } from \"../../utils\";\nimport { BodyDropTarget } from \"../columnDrag/bodyDropTarget\";\nimport { HeaderRowType } from \"../row/headerRowComp\";\nimport { HeaderRowCtrl } from \"../row/headerRowCtrl\";\nvar HeaderRowContainerCtrl = /** @class */ (function (_super) {\n    __extends(HeaderRowContainerCtrl, _super);\n    function HeaderRowContainerCtrl(pinned) {\n        var _this = _super.call(this) || this;\n        _this.groupsRowCtrls = [];\n        _this.pinned = pinned;\n        return _this;\n    }\n    HeaderRowContainerCtrl.prototype.setComp = function (comp, eGui) {\n        this.comp = comp;\n        this.setupCenterWidth();\n        this.setupPinnedWidth();\n        this.setupDragAndDrop(eGui);\n        this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, this.onGridColumnsChanged.bind(this));\n        this.ctrlsService.registerHeaderContainer(this, this.pinned);\n        if (this.columnModel.isReady()) {\n            this.refresh();\n        }\n    };\n    HeaderRowContainerCtrl.prototype.setupDragAndDrop = function (dropContainer) {\n        var bodyDropTarget = new BodyDropTarget(this.pinned, dropContainer);\n        this.createManagedBean(bodyDropTarget);\n    };\n    HeaderRowContainerCtrl.prototype.refresh = function (keepColumns) {\n        var _this = this;\n        if (keepColumns === void 0) { keepColumns = false; }\n        var sequence = new NumberSequence();\n        var focusedHeaderPosition = this.focusService.getFocusHeaderToUseAfterRefresh();\n        var refreshColumnGroups = function () {\n            var groupRowCount = _this.columnModel.getHeaderRowCount() - 1;\n            _this.groupsRowCtrls = _this.destroyBeans(_this.groupsRowCtrls);\n            for (var i = 0; i < groupRowCount; i++) {\n                var ctrl = _this.createBean(new HeaderRowCtrl(sequence.next(), _this.pinned, HeaderRowType.COLUMN_GROUP));\n                _this.groupsRowCtrls.push(ctrl);\n            }\n        };\n        var refreshColumns = function () {\n            var rowIndex = sequence.next();\n            var needNewInstance = _this.columnsRowCtrl == null || !keepColumns || _this.columnsRowCtrl.getRowIndex() !== rowIndex;\n            if (needNewInstance) {\n                _this.destroyBean(_this.columnsRowCtrl);\n                _this.columnsRowCtrl = _this.createBean(new HeaderRowCtrl(rowIndex, _this.pinned, HeaderRowType.COLUMN));\n            }\n        };\n        var refreshFilters = function () {\n            var includeFloatingFilter = !_this.columnModel.isPivotMode() && _this.columnModel.hasFloatingFilters();\n            var destroyPreviousComp = function () {\n                _this.filtersRowCtrl = _this.destroyBean(_this.filtersRowCtrl);\n            };\n            if (!includeFloatingFilter) {\n                destroyPreviousComp();\n                return;\n            }\n            var rowIndex = sequence.next();\n            if (_this.filtersRowCtrl) {\n                var rowIndexMismatch = _this.filtersRowCtrl.getRowIndex() !== rowIndex;\n                if (!keepColumns || rowIndexMismatch) {\n                    destroyPreviousComp();\n                }\n            }\n            if (!_this.filtersRowCtrl) {\n                _this.filtersRowCtrl = _this.createBean(new HeaderRowCtrl(rowIndex, _this.pinned, HeaderRowType.FLOATING_FILTER));\n            }\n        };\n        refreshColumnGroups();\n        refreshColumns();\n        refreshFilters();\n        var allCtrls = this.getAllCtrls();\n        this.comp.setCtrls(allCtrls);\n        this.restoreFocusOnHeader(focusedHeaderPosition);\n    };\n    HeaderRowContainerCtrl.prototype.restoreFocusOnHeader = function (position) {\n        if (position == null || position.column.getPinned() != this.pinned) {\n            return;\n        }\n        this.focusService.focusHeaderPosition({ headerPosition: position });\n    };\n    HeaderRowContainerCtrl.prototype.getAllCtrls = function () {\n        var res = __spreadArrays(this.groupsRowCtrls, [this.columnsRowCtrl]);\n        if (this.filtersRowCtrl) {\n            res.push(this.filtersRowCtrl);\n        }\n        return res;\n    };\n    // grid cols have changed - this also means the number of rows in the header can have\n    // changed. so we remove all the old rows and insert new ones for a complete refresh\n    HeaderRowContainerCtrl.prototype.onGridColumnsChanged = function () {\n        this.refresh(true);\n    };\n    HeaderRowContainerCtrl.prototype.setupCenterWidth = function () {\n        var _this = this;\n        if (this.pinned != null) {\n            return;\n        }\n        this.createManagedBean(new CenterWidthFeature(function (width) { return _this.comp.setCenterWidth(width + \"px\"); }));\n    };\n    HeaderRowContainerCtrl.prototype.setHorizontalScroll = function (offset) {\n        this.comp.setContainerTransform(\"translateX(\" + offset + \"px)\");\n    };\n    HeaderRowContainerCtrl.prototype.setupPinnedWidth = function () {\n        var _this = this;\n        if (this.pinned == null) {\n            return;\n        }\n        var pinningLeft = this.pinned === Constants.PINNED_LEFT;\n        var pinningRight = this.pinned === Constants.PINNED_RIGHT;\n        var listener = function () {\n            var width = pinningLeft ? _this.pinnedWidthService.getPinnedLeftWidth() : _this.pinnedWidthService.getPinnedRightWidth();\n            if (width == null) {\n                return;\n            } // can happen at initialisation, width not yet set\n            var hidden = width == 0;\n            var isRtl = _this.gridOptionsWrapper.isEnableRtl();\n            var scrollbarWidth = _this.gridOptionsWrapper.getScrollbarWidth();\n            // if there is a scroll showing (and taking up space, so Windows, and not iOS)\n            // in the body, then we add extra space to keep header aligned with the body,\n            // as body width fits the cols and the scrollbar\n            var addPaddingForScrollbar = _this.scrollVisibleService.isVerticalScrollShowing() && ((isRtl && pinningLeft) || (!isRtl && pinningRight));\n            var widthWithPadding = addPaddingForScrollbar ? width + scrollbarWidth : width;\n            _this.comp.setPinnedContainerWidth(widthWithPadding + 'px');\n            _this.comp.addOrRemoveCssClass('ag-hidden', hidden);\n        };\n        this.addManagedListener(this.eventService, Events.EVENT_LEFT_PINNED_WIDTH_CHANGED, listener);\n        this.addManagedListener(this.eventService, Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED, listener);\n        this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, listener);\n        this.addManagedListener(this.eventService, Events.EVENT_SCROLLBAR_WIDTH_CHANGED, listener);\n    };\n    HeaderRowContainerCtrl.prototype.getHtmlElementForColumnHeader = function (column) {\n        if (this.columnsRowCtrl) {\n            return this.columnsRowCtrl.getHtmlElementForColumnHeader(column);\n        }\n    };\n    HeaderRowContainerCtrl.prototype.getRowType = function (rowIndex) {\n        var allCtrls = this.getAllCtrls();\n        var ctrl = allCtrls[rowIndex];\n        return ctrl ? ctrl.getType() : undefined;\n    };\n    HeaderRowContainerCtrl.prototype.focusHeader = function (rowIndex, column, event) {\n        var allCtrls = this.getAllCtrls();\n        var ctrl = allCtrls[rowIndex];\n        if (!ctrl) {\n            return false;\n        }\n        return ctrl.focusHeader(column, event);\n    };\n    HeaderRowContainerCtrl.prototype.getRowCount = function () {\n        return this.getAllCtrls().length;\n    };\n    __decorate([\n        Autowired('ctrlsService')\n    ], HeaderRowContainerCtrl.prototype, \"ctrlsService\", void 0);\n    __decorate([\n        Autowired('scrollVisibleService')\n    ], HeaderRowContainerCtrl.prototype, \"scrollVisibleService\", void 0);\n    __decorate([\n        Autowired('pinnedWidthService')\n    ], HeaderRowContainerCtrl.prototype, \"pinnedWidthService\", void 0);\n    __decorate([\n        Autowired('columnModel')\n    ], HeaderRowContainerCtrl.prototype, \"columnModel\", void 0);\n    __decorate([\n        Autowired('focusService')\n    ], HeaderRowContainerCtrl.prototype, \"focusService\", void 0);\n    return HeaderRowContainerCtrl;\n}(BeanStub));\nexport { HeaderRowContainerCtrl };\n"]},"metadata":{},"sourceType":"module"}