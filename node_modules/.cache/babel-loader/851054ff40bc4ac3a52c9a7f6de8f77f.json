{"ast":null,"code":"var _jsxFileName = \"/Users/rongxuan/Desktop/reactmap/reactmap/src/components/SmokerMap.js\";\nimport React from \"react\";\nimport { fromLonLat, get } from \"ol/proj\"; //import \"./SmokerMap.css\";\n\nimport Map from \"ol/Map\"; //import Feature from \"ol/Feature\";\n\nimport View from \"ol/View\"; //import { Point, Style, Circle, Fill, Feature } from \"ol\";\n\nimport TileLayer from \"ol/layer/Tile\"; //import TileWMS from 'ol/source/TileWMS';\n\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\nimport GeoJSON from 'ol/format/GeoJSON';\nimport OSM from \"ol/source/OSM\";\nimport { Fill, Stroke, Style } from 'ol/style';\nimport { metadata } from './metadata.js';\nimport Dropdown from \"./dropdown.js\";\nimport { useState } from 'react';\nimport ImageWMS from 'ol/source/ImageWMS';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class SmokerMap extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(this.props); //this.mapRef=React.createRef();\n    //this.legendRef=React.createRef();\n  }\n\n  componentDidMount() {\n    var basemap = new TileLayer({\n      source: new OSM()\n    });\n    var attributes = [];\n\n    for (var i = 0; i < metadata.attributename.length; i++) {\n      attributes.push({\n        label: metadata.attributename[i],\n        value: metadata.geojson_url[0]\n      });\n    } // Using state to keep track of what the selected fruit is\n\n\n    var [attribute, setAttribute] = useState(\"Select an attribute\"); // Using this function to update the state of fruit\n    // whenever a new option is selected from the dropdown\n\n    var handleAttributeChange = e => {\n      setAttribute(e.target.value);\n    };\n\n    var totalsmoker = new VectorSource({\n      url: attribute.value,\n      format: new GeoJSON()\n    }); //var breakarray= [300,400,500,600];\n    //var colorarray= ['#edf8fb','#b3cde3','#8c96c6','#88419d']\n    // use a for loop inside to assign stuff\n\n    var stylefunction = function (feature) {\n      var style;\n      var value = feature.get('brffs_smokers');\n      var county = feature.get('county');\n      console.log(county, value);\n\n      for (let i = 0; i < metadata.break.length; i++) {\n        if (value > metadata.break[i]) {\n          style = new Style({\n            fill: new Fill({\n              color: metadata.color[i]\n            }),\n            stroke: new Stroke({\n              color: 'black',\n              width: 0.3\n            })\n          });\n        }\n\n        ;\n      }\n\n      return style;\n    };\n\n    var vectorlayer = new VectorLayer({\n      source: totalsmoker,\n      style: stylefunction,\n      showLegend: true\n    });\n    /*\n    var lungdata = new TileLayer({\n     source : new TileWMS ({\n       url:'https://smartcommunityhealth.ahc.umn.edu/lung_cancer/wms',\n       serverType:'geoserver',\n       params: {'LAYERS': 'lung_cancer:total_smokers_v2', 'TILED': true},\n        transition: 0\n      }),\n     style: vectorstyle\n    const wmsSource = new ImageWMS({\n     url: 'https://ahocevar.com/geoserver/wms',\n     params: {'LAYERS': 'topp:states'},\n     target: \"maplegend\",\n     ratio: 1,\n     serverType: 'geoserver',\n    });\n      })*/\n\n    var remap = new Map({\n      layers: [basemap, vectorlayer],\n      target: \"mapContainer\",\n      view: new View({\n        center: fromLonLat([-94.6859, 46.7296]),\n        zoom: 6\n      })\n    });\n  }\n\n  render() {\n    console.log(\"-> render App\");\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"mapContainer\",\n      style: {\n        width: \"100%\",\n        height: \"500px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [attribute, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: handleAttributeChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \" Select an attribute to display\",\n          children: \" -- Select an attribute -- \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 9\n        }, this), attributes.map(attribute => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: attribute.value,\n          children: attribute.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 40\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/src/components/SmokerMap.js"],"names":["React","fromLonLat","get","Map","View","TileLayer","VectorLayer","VectorSource","GeoJSON","OSM","Fill","Stroke","Style","metadata","Dropdown","useState","ImageWMS","SmokerMap","Component","constructor","props","console","log","componentDidMount","basemap","source","attributes","i","attributename","length","push","label","value","geojson_url","attribute","setAttribute","handleAttributeChange","e","target","totalsmoker","url","format","stylefunction","feature","style","county","break","fill","color","stroke","width","vectorlayer","showLegend","remap","layers","view","center","zoom","render","height","map"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { fromLonLat, get } from \"ol/proj\";\n//import \"./SmokerMap.css\";\nimport Map from \"ol/Map\";\n//import Feature from \"ol/Feature\";\nimport View from \"ol/View\";\n//import { Point, Style, Circle, Fill, Feature } from \"ol\";\nimport TileLayer from \"ol/layer/Tile\";\n//import TileWMS from 'ol/source/TileWMS';\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\nimport GeoJSON from 'ol/format/GeoJSON';\nimport OSM from \"ol/source/OSM\";\nimport {Fill, Stroke, Style} from 'ol/style';\nimport {metadata} from './metadata.js';\nimport Dropdown from \"./dropdown.js\"\nimport {useState} from 'react';\nimport ImageWMS from 'ol/source/ImageWMS';\n\n\n\nexport default class SmokerMap extends React.Component{\n  constructor(props){\n    super(props);\n    console.log(this.props);\n    //this.mapRef=React.createRef();\n    //this.legendRef=React.createRef();\n  }\n\n\n  componentDidMount(){\n\n    var basemap =new TileLayer({\n      source: new OSM()\n    })\n    \n    \n\n\n  \n    var attributes = []\n    for (var i =0; i<metadata.attributename.length;i++) {\n\n    attributes.push( { label: metadata.attributename[i], value: metadata.geojson_url[0]}); \n      \n  }\n  \n\n// Using state to keep track of what the selected fruit is\n    var [attribute, setAttribute] = useState(\"Select an attribute\")\n\n// Using this function to update the state of fruit\n// whenever a new option is selected from the dropdown\n    var handleAttributeChange = (e) => {\n      setAttribute(e.target.value)\n}\nvar totalsmoker = new VectorSource({\n  url:attribute.value,\n  format: new GeoJSON()\n})\n\n    //var breakarray= [300,400,500,600];\n    //var colorarray= ['#edf8fb','#b3cde3','#8c96c6','#88419d']\n    // use a for loop inside to assign stuff\n      var stylefunction = function(feature){\n        var style;\n        \n        var value=feature.get('brffs_smokers');\n        var county=feature.get('county');\n        \n        \n        console.log(county,value)\n        for (let i =0;i<metadata.break.length;i++){\n          if(value>metadata.break[i]){\n          style= new Style({\n            fill: new Fill({\n              color: metadata.color[i]\n            }),\n            stroke: new Stroke({\n              color:'black',\n              width:0.3\n            })\n\n          })\n\n        };\n      }\n\n        return style;\n\n    };\n\n    var vectorlayer = new VectorLayer({\n\n       source: totalsmoker,\n       style: stylefunction,\n       showLegend:true\n\n\n       })\n\n     /*\n    var lungdata = new TileLayer({\n      source : new TileWMS ({\n        url:'https://smartcommunityhealth.ahc.umn.edu/lung_cancer/wms',\n        serverType:'geoserver',\n        params: {'LAYERS': 'lung_cancer:total_smokers_v2', 'TILED': true},\n\n        transition: 0\n\n      }),\n      style: vectorstyle\n   const wmsSource = new ImageWMS({\n      url: 'https://ahocevar.com/geoserver/wms',\n      params: {'LAYERS': 'topp:states'},\n      target: \"maplegend\",\n      ratio: 1,\n      serverType: 'geoserver',\n    });\n\n\n\n    })*/\n\n    var remap=new Map({\n      layers: [basemap,vectorlayer],\n      target: \"mapContainer\",\n      view :new View({\n        center:fromLonLat([-94.6859,46.7296]),\n        zoom: 6\n      })\n\n\n\n    });\n\n\n\n  }\n\n\n  render() {\n    console.log(\"-> render App\");\n    return (\n\n\n      <div id=\"mapContainer\" style={{ width: \"100%\", height: \"500px\"}}></div>,\n\n      <div className=\"App\">\n      {/* Displaying the value of fruit */}\n      {attribute}\n      <br />\n  \n      <select onChange={handleAttributeChange}> \n        <option value=\" Select an attribute to display\"> -- Select an attribute -- </option>\n              {/* Mapping through each fruit object in our fruits array\n            and returning an option element with the appropriate attributes / values.\n           */}\n        {attributes.map((attribute) => <option value={attribute.value}>{attribute.label}</option>)}\n      </select>\n      </div>\n    \n\n\n    );\n  }\n\n\n}\n"]},"metadata":{},"sourceType":"module"}