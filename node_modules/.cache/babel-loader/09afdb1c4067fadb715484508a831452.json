{"ast":null,"code":"// @ag-grid-community/react v26.2.0\n\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar core_1 = require(\"@ag-grid-community/core\");\n\nvar beansContext_1 = require(\"./beansContext\");\n\nvar TabGuardCompRef = function (props, forwardRef) {\n  var children = props.children,\n      eFocusableElement = props.eFocusableElement,\n      onTabKeyDown = props.onTabKeyDown,\n      gridCtrl = props.gridCtrl;\n  var context = react_1.useContext(beansContext_1.BeansContext).context;\n  var topTabGuardRef = react_1.useRef(null);\n  var bottomTabGuardRef = react_1.useRef(null);\n  var tabGuardCtrlRef = react_1.useRef();\n\n  var _a = react_1.useState(),\n      tabIndex = _a[0],\n      setTabIndex = _a[1];\n\n  react_1.useImperativeHandle(forwardRef, function () {\n    return {\n      forceFocusOutOfContainer: function () {\n        tabGuardCtrlRef.current.forceFocusOutOfContainer();\n      }\n    };\n  });\n  react_1.useEffect(function () {\n    var eTopGuard = topTabGuardRef.current;\n    var eBottomGuard = bottomTabGuardRef.current;\n    var compProxy = {\n      setTabIndex: function (value) {\n        return value == null ? setTabIndex(undefined) : setTabIndex(parseInt(value, 10));\n      }\n    };\n    var ctrl = tabGuardCtrlRef.current = context.createBean(new core_1.TabGuardCtrl({\n      comp: compProxy,\n      eTopGuard: eTopGuard,\n      eBottomGuard: eBottomGuard,\n      eFocusableElement: eFocusableElement,\n      onTabKeyDown: onTabKeyDown,\n      focusInnerElement: function (fromBottom) {\n        return gridCtrl.focusInnerElement(fromBottom);\n      }\n    }));\n    return function () {\n      context.destroyBean(ctrl);\n    };\n  }, []);\n\n  var createTabGuard = function (side) {\n    return react_1.default.createElement(\"div\", {\n      className: \"ag-tab-guard ag-tab-guard-\" + side,\n      role: \"presentation\",\n      tabIndex: tabIndex,\n      ref: side === 'top' ? topTabGuardRef : bottomTabGuardRef\n    });\n  };\n\n  return react_1.default.createElement(react_1.default.Fragment, null, createTabGuard('top'), children, createTabGuard('bottom'));\n};\n\nvar TabGuardComp = react_1.forwardRef(TabGuardCompRef);\nexports.default = react_1.memo(TabGuardComp);","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/react/lib/reactUi/reactUi/tabGuardComp.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState, forwardRef, useImperativeHandle, RefForwardingComponent, memo, useContext } from 'react';\n\nimport {\n    Context, TabGuardCtrl, ITabGuard, GridCtrl\n} from '@ag-grid-community/core';\nimport { BeansContext } from './beansContext';\n\nexport interface TabGuardCompCallback {\n    forceFocusOutOfContainer(): void;\n}\n\ninterface TabGuardProps {\n    children: React.ReactNode,\n    eFocusableElement: HTMLDivElement,\n    onTabKeyDown: (e: KeyboardEvent) => void,\n    gridCtrl: GridCtrl,\n}\n\nconst TabGuardCompRef: RefForwardingComponent<TabGuardCompCallback, TabGuardProps> = (props, forwardRef) => {\n\n    const { children, eFocusableElement, onTabKeyDown, gridCtrl } = props;\n    const { context } = useContext(BeansContext);\n\n    const topTabGuardRef = useRef<HTMLDivElement>(null);\n    const bottomTabGuardRef = useRef<HTMLDivElement>(null);\n    const tabGuardCtrlRef = useRef<TabGuardCtrl>();\n    const [tabIndex, setTabIndex] = useState<number>();\n\n    useImperativeHandle(forwardRef, () => ({\n        forceFocusOutOfContainer() {\n            tabGuardCtrlRef.current!.forceFocusOutOfContainer();\n        }\n    }));\n\n    useEffect(() => {\n        const eTopGuard = topTabGuardRef.current!;\n        const eBottomGuard = bottomTabGuardRef.current!;\n\n        const compProxy: ITabGuard = {\n            setTabIndex: value => value == null ? setTabIndex(undefined) : setTabIndex(parseInt(value, 10))\n        }\n\n        const ctrl = tabGuardCtrlRef.current = context.createBean(new TabGuardCtrl({\n            comp: compProxy,\n            eTopGuard: eTopGuard,\n            eBottomGuard: eBottomGuard,\n            eFocusableElement: eFocusableElement,\n            \n            onTabKeyDown: onTabKeyDown,\n            focusInnerElement: fromBottom => gridCtrl.focusInnerElement(fromBottom)\n        }));\n\n        return () => {\n            context.destroyBean(ctrl);\n        };\n\n    }, []);\n\n    const createTabGuard = (side: 'top' | 'bottom') => (\n        <div \n            className={ `ag-tab-guard ag-tab-guard-${side}` }\n            role=\"presentation\"\n            tabIndex={ tabIndex }\n            ref={ side === 'top' ? topTabGuardRef : bottomTabGuardRef }\n        ></div>\n    )\n    return (\n        <>\n            {createTabGuard('top')}\n            { children }\n            {createTabGuard('bottom')}\n        </>\n    )\n};\n\nconst TabGuardComp = forwardRef(TabGuardCompRef);\n\nexport default memo(TabGuardComp);\n"]},"metadata":{},"sourceType":"script"}