{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.AgFeatureGrid = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _Style = _interopRequireDefault(require(\"ol/style/Style\"));\n\nvar _Fill = _interopRequireDefault(require(\"ol/style/Fill\"));\n\nvar _Circle = _interopRequireDefault(require(\"ol/style/Circle\"));\n\nvar _Stroke = _interopRequireDefault(require(\"ol/style/Stroke\"));\n\nvar _Vector = _interopRequireDefault(require(\"ol/source/Vector\"));\n\nvar _Vector2 = _interopRequireDefault(require(\"ol/layer/Vector\"));\n\nvar _Geometry = _interopRequireDefault(require(\"ol/geom/Geometry\"));\n\nvar _GeometryCollection = _interopRequireDefault(require(\"ol/geom/GeometryCollection\"));\n\nvar _ol = require(\"ol\");\n\nvar _isArray2 = _interopRequireDefault(require(\"lodash/isArray\"));\n\nvar _differenceWith2 = _interopRequireDefault(require(\"lodash/differenceWith\"));\n\nvar _isEqual2 = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _isFunction2 = _interopRequireDefault(require(\"lodash/isFunction\"));\n\nvar _kebabCase2 = _interopRequireDefault(require(\"lodash/kebabCase\"));\n\nvar _MapUtil = _interopRequireDefault(require(\"@terrestris/ol-util/dist/MapUtil/MapUtil\"));\n\nvar _constants = require(\"../../constants\");\n\nrequire(\"@ag-grid-community/core/dist/styles/ag-grid.css\");\n\nrequire(\"@ag-grid-community/core/dist/styles/ag-theme-balham.css\");\n\nrequire(\"@ag-grid-community/core/dist/styles/ag-theme-fresh.css\");\n\nvar _react2 = require(\"@ag-grid-community/react\");\n\nvar _clientSideRowModel = require(\"@ag-grid-community/client-side-row-model\");\n\nvar _isNil2 = _interopRequireDefault(require(\"lodash/isNil\"));\n\nvar _excluded = [\"className\", \"height\", \"width\", \"theme\", \"rowClassName\", \"features\", \"map\", \"attributeBlacklist\", \"onRowClick\", \"onRowMouseOver\", \"onRowMouseOut\", \"zoomToExtent\", \"selectable\", \"featureStyle\", \"highlightStyle\", \"selectStyle\", \"layerName\", \"columnDefs\", \"children\", \"rowData\"];\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * The AgFeatureGrid.\n *\n * @class The AgFeatureGrid\n * @extends React.Component\n */\n\n\nvar AgFeatureGrid = /*#__PURE__*/function (_React$Component) {\n  _inherits(AgFeatureGrid, _React$Component);\n\n  var _super = _createSuper(AgFeatureGrid);\n  /**\n   * The default properties.\n   */\n\n  /**\n   * The reference of this grid.\n   * @private\n   */\n\n  /**\n   * The className added to this component.\n   * @private\n   */\n\n  /**\n   * The class name to add to each table row.\n   * @private\n   */\n\n  /**\n   * The prefix to use for each table row class.\n   * @private\n   */\n\n  /**\n   * The hover class name.\n   * @private\n   */\n\n  /**\n   * The source holding the features of the grid.\n   * @private\n   */\n\n  /**\n   * The layer representing the features of the grid.\n   * @private\n   */\n\n  /**\n   * The constructor.\n   */\n\n\n  function AgFeatureGrid(_props) {\n    var _this;\n\n    _classCallCheck(this, AgFeatureGrid);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"_ref\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_className\", \"\".concat(_constants.CSS_PREFIX, \"ag-feature-grid\"));\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowClassName\", \"\".concat(_constants.CSS_PREFIX, \"ag-feature-grid-row\"));\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowKeyClassNamePrefix\", 'row-key-');\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowHoverClassName\", 'ag-row-hover');\n\n    _defineProperty(_assertThisInitialized(_this), \"_source\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_layer\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"initVectorLayer\", function (map) {\n      var _this$props = _this.props,\n          features = _this$props.features,\n          featureStyle = _this$props.featureStyle,\n          layerName = _this$props.layerName;\n\n      if (_MapUtil[\"default\"].getLayerByName(map, layerName)) {\n        return;\n      }\n\n      var source = new _Vector[\"default\"]({\n        features: features\n      });\n      var layer = new _Vector2[\"default\"]({\n        properties: {\n          name: layerName\n        },\n        source: source,\n        style: featureStyle\n      });\n      map.addLayer(layer);\n      _this._source = source;\n      _this._layer = layer;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"initMapEventHandlers\", function (map) {\n      var selectable = _this.props.selectable;\n      map.on('pointermove', _this.onMapPointerMove);\n\n      if (selectable) {\n        map.on('singleclick', _this.onMapSingleClick);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMapPointerMove\", function (olEvt) {\n      var _this$props2 = _this.props,\n          map = _this$props2.map,\n          features = _this$props2.features,\n          highlightStyle = _this$props2.highlightStyle,\n          selectStyle = _this$props2.selectStyle;\n      var grid = _this.state.grid;\n\n      var selectedRowKeys = _this.getSelectedRowKeys();\n\n      var selectedFeatures = map.getFeaturesAtPixel(olEvt.pixel, {\n        layerFilter: function layerFilter(layerCand) {\n          return layerCand === _this._layer;\n        }\n      }) || [];\n\n      if (!grid || !grid.api) {\n        return;\n      }\n\n      var rowRenderer = grid.api.rowRenderer;\n      features.forEach(function (feature) {\n        var key = _this.props.keyFunction(feature);\n\n        var rc;\n        rowRenderer.forEachRowComp(function (idx, rowComp) {\n          if (rowComp.getRowNode().data.key === key) {\n            rc = rowComp;\n          }\n        });\n\n        if (rc) {\n          var el = rc.getBodyRowElement();\n\n          if (el) {\n            el.classList.remove(_this._rowHoverClassName);\n          }\n        }\n\n        if (selectedRowKeys.includes(key)) {\n          feature.setStyle(selectStyle);\n        } else {\n          feature.setStyle(undefined);\n        }\n      });\n      selectedFeatures.forEach(function (feature) {\n        var key = _this.props.keyFunction(feature);\n\n        var rc;\n        rowRenderer.forEachRowComp(function (idx, rowComp) {\n          if (rowComp.getRowNode().data.key === key) {\n            rc = rowComp;\n          }\n        });\n\n        if (rc) {\n          var el = rc.getBodyRowElement();\n\n          if (el) {\n            el.classList.add(_this._rowHoverClassName);\n          }\n        }\n\n        feature.setStyle(highlightStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMapSingleClick\", function (olEvt) {\n      var _this$props3 = _this.props,\n          map = _this$props3.map,\n          selectStyle = _this$props3.selectStyle,\n          onMapSingleClick = _this$props3.onMapSingleClick;\n\n      var selectedRowKeys = _this.getSelectedRowKeys();\n\n      var selectedFeatures = map.getFeaturesAtPixel(olEvt.pixel, {\n        layerFilter: function layerFilter(layerCand) {\n          return layerCand === _this._layer;\n        }\n      }) || [];\n\n      if ((0, _isFunction2[\"default\"])(onMapSingleClick)) {\n        onMapSingleClick(olEvt, selectedFeatures);\n      }\n\n      selectedFeatures.forEach(function (selectedFeature) {\n        var key = _this.props.keyFunction(selectedFeature);\n\n        if (selectedRowKeys && selectedRowKeys.includes(key)) {\n          selectedFeature.setStyle(undefined);\n\n          var node = _this.getRowFromFeatureKey(key);\n\n          if (node) {\n            node.setSelected(false);\n          }\n        } else {\n          selectedFeature.setStyle(selectStyle);\n\n          var _node = _this.getRowFromFeatureKey(key);\n\n          if (_node) {\n            _node.setSelected(true);\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deinitVectorLayer\", function () {\n      var map = _this.props.map;\n\n      if ((0, _isNil2[\"default\"])(_this._layer)) {\n        return;\n      }\n\n      map.removeLayer(_this._layer);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deinitMapEventHandlers\", function () {\n      var _this$props4 = _this.props,\n          map = _this$props4.map,\n          selectable = _this$props4.selectable;\n      map.un('pointermove', _this.onMapPointerMove);\n\n      if (selectable) {\n        map.un('singleclick', _this.onMapSingleClick);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getColumnDefs\", function () {\n      var _this$props5 = _this.props,\n          attributeBlacklist = _this$props5.attributeBlacklist,\n          features = _this$props5.features,\n          columnDefs = _this$props5.columnDefs,\n          selectable = _this$props5.selectable;\n      var columns = [];\n\n      if (features.length < 1) {\n        return;\n      }\n\n      var feature = features[0];\n      var props = feature.getProperties();\n\n      if (selectable) {\n        columns.push({\n          headerName: '',\n          checkboxSelection: true,\n          headerCheckboxSelection: true,\n          width: 28,\n          pinned: 'left',\n          lockPosition: true,\n          suppressMenu: true,\n          suppressSorting: true,\n          suppressFilter: true,\n          suppressResize: true,\n          suppressMovable: true\n        });\n      }\n\n      var index = -1;\n      Object.keys(props).forEach(function (key) {\n        if (attributeBlacklist.includes(key)) {\n          return;\n        }\n\n        if (props[key] instanceof _Geometry[\"default\"]) {\n          return;\n        }\n\n        if (columnDefs[key] && columnDefs[key].index !== undefined) {\n          index = columnDefs[key].index;\n        } else {\n          ++index;\n        }\n\n        columns[index] = _objectSpread({\n          headerName: key,\n          field: key\n        }, columnDefs[key]);\n      });\n      return columns;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRowData\", function () {\n      var features = _this.props.features;\n      return features.map(function (feature) {\n        var properties = feature.getProperties();\n        var filtered = Object.keys(properties).filter(function (key) {\n          return !(properties[key] instanceof _Geometry[\"default\"]);\n        }).reduce(function (obj, key) {\n          obj[key] = properties[key];\n          return obj;\n        }, {});\n        return _objectSpread({\n          key: _this.props.keyFunction(feature)\n        }, filtered);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getFeatureFromRowKey\", function (key) {\n      var _this$props6 = _this.props,\n          features = _this$props6.features,\n          keyFunction = _this$props6.keyFunction;\n      var feature = features.filter(function (f) {\n        return keyFunction(f) === key;\n      });\n      return feature[0];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRowFromFeatureKey\", function (key) {\n      var grid = _this.state.grid;\n      var rowNode;\n\n      if (!grid || !grid.api) {\n        return;\n      }\n\n      grid.api.forEachNode(function (node) {\n        if (node.data.key === key) {\n          rowNode = node;\n        }\n      });\n      return rowNode;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getSelectedRowKeys\", function () {\n      var grid = _this.state.grid;\n\n      if (!grid || !grid.api) {\n        return [];\n      }\n\n      var selectedRows = grid.api.getSelectedRows();\n      return selectedRows.map(function (row) {\n        return row.key;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowClick\", function (evt) {\n      var onRowClick = _this.props.onRowClick;\n      var row = evt.data;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction2[\"default\"])(onRowClick)) {\n        onRowClick(row, feature, evt);\n      } else {\n        _this.zoomToFeatures([feature]);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowMouseOver\", function (evt) {\n      var onRowMouseOver = _this.props.onRowMouseOver;\n      var row = evt.data;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction2[\"default\"])(onRowMouseOver)) {\n        onRowMouseOver(row, feature, evt);\n      }\n\n      _this.highlightFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowMouseOut\", function (evt) {\n      var onRowMouseOut = _this.props.onRowMouseOut;\n      var row = evt.data;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction2[\"default\"])(onRowMouseOut)) {\n        onRowMouseOut(row, feature, evt);\n      }\n\n      _this.unhighlightFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomToFeatures\", function (features) {\n      var map = _this.props.map;\n      var featGeometries = features.map(function (f) {\n        return f.getGeometry();\n      }).filter(function (f) {\n        return !(0, _isNil2[\"default\"])(f);\n      });\n\n      if (featGeometries.length > 0) {\n        var geomCollection = new _GeometryCollection[\"default\"](featGeometries);\n        map.getView().fit(geomCollection.getExtent());\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightFeatures\", function (highlightFeatures) {\n      var highlightStyle = _this.props.highlightStyle;\n      highlightFeatures.forEach(function (feature) {\n        return feature.setStyle(highlightStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unhighlightFeatures\", function (unhighlightFeatures) {\n      var selectStyle = _this.props.selectStyle;\n\n      var selectedRowKeys = _this.getSelectedRowKeys();\n\n      unhighlightFeatures.forEach(function (feature) {\n        var key = _this.props.keyFunction(feature);\n\n        if (selectedRowKeys && selectedRowKeys.includes(key)) {\n          feature.setStyle(selectStyle);\n        } else {\n          feature.setStyle(undefined);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectFeatures\", function (features) {\n      var selectStyle = _this.props.selectStyle;\n      features.forEach(function (feature) {\n        if (feature) {\n          feature.setStyle(selectStyle);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetFeatureStyles\", function () {\n      var features = _this.props.features;\n      features.forEach(function (feature) {\n        return feature.setStyle(undefined);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectionChanged\", function (evt) {\n      var onRowSelectionChange = _this.props.onRowSelectionChange;\n      var _this$state = _this.state,\n          grid = _this$state.grid,\n          selectedRows = _this$state.selectedRows;\n      var selectedRowsAfter;\n\n      if (!grid || !grid.api) {\n        selectedRowsAfter = evt.api.getSelectedRows();\n      } else {\n        selectedRowsAfter = grid.api.getSelectedRows();\n      }\n\n      var deselectedRows = (0, _differenceWith2[\"default\"])(selectedRows, selectedRowsAfter, function (a, b) {\n        return a.key === b.key;\n      });\n      var selectedFeatures = selectedRowsAfter.map(function (row) {\n        return _this.getFeatureFromRowKey(row.key);\n      });\n      var deselectedFeatures = deselectedRows.map(function (row) {\n        return _this.getFeatureFromRowKey(row.key);\n      }); // update state\n\n      _this.setState({\n        selectedRows: selectedRowsAfter\n      });\n\n      if ((0, _isFunction2[\"default\"])(onRowSelectionChange)) {\n        onRowSelectionChange(selectedRowsAfter, selectedFeatures, deselectedRows, deselectedFeatures, evt);\n      }\n\n      _this.resetFeatureStyles();\n\n      _this.selectFeatures(selectedFeatures);\n    });\n\n    _this.state = {\n      grid: null,\n      selectedRows: []\n    };\n    return _this;\n  }\n  /**\n   * Called on lifecycle phase componentDidMount.\n   */\n\n\n  _createClass(AgFeatureGrid, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props7 = this.props,\n          map = _this$props7.map,\n          features = _this$props7.features,\n          zoomToExtent = _this$props7.zoomToExtent;\n      this.initVectorLayer(map);\n      this.initMapEventHandlers(map);\n\n      if (zoomToExtent) {\n        this.zoomToFeatures(features);\n      }\n    }\n    /**\n     * Invoked immediately after updating occurs. This method is not called for\n     * the initial render.\n     *\n     * @param prevProps The previous props.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props8 = this.props,\n          map = _this$props8.map,\n          features = _this$props8.features,\n          selectable = _this$props8.selectable,\n          zoomToExtent = _this$props8.zoomToExtent;\n\n      if (!(0, _isEqual2[\"default\"])(prevProps.map, map)) {\n        this.initVectorLayer(map);\n        this.initMapEventHandlers(map);\n      }\n\n      if (!(0, _isEqual2[\"default\"])(prevProps.features, features)) {\n        if (this._source) {\n          this._source.clear();\n\n          this._source.addFeatures(features);\n        }\n\n        if (zoomToExtent) {\n          this.zoomToFeatures(features);\n        }\n      }\n\n      if (!(0, _isEqual2[\"default\"])(prevProps.selectable, selectable)) {\n        if (selectable && map) {\n          map.on('singleclick', this.onMapSingleClick);\n        } else {\n          if (map) {\n            map.un('singleclick', this.onMapSingleClick);\n          }\n        }\n      }\n    }\n    /**\n     * Called on lifecycle phase componentWillUnmount.\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.deinitVectorLayer();\n      this.deinitMapEventHandlers();\n    }\n    /**\n     * Initialized the vector layer that will be used to draw the input features\n     * on and adds it to the map (if any).\n     *\n     * @param map The map to add the layer to.\n     */\n\n  }, {\n    key: \"onGridReady\",\n    value:\n    /**\n     *\n     * @param grid\n     */\n    function onGridReady(grid) {\n      this.setState({\n        grid: grid\n      }, this.onVisiblityChange);\n\n      if (this.props.onGridIsReady) {\n        this.props.onGridIsReady(grid);\n      }\n    }\n    /**\n     *\n     */\n\n  }, {\n    key: \"onVisiblityChange\",\n    value: function onVisiblityChange() {\n      if (this.state.grid) {\n        this.state.grid.api.sizeColumnsToFit();\n      }\n    }\n    /**\n     * The render method.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props9 = this.props,\n          className = _this$props9.className,\n          height = _this$props9.height,\n          width = _this$props9.width,\n          theme = _this$props9.theme,\n          rowClassName = _this$props9.rowClassName,\n          features = _this$props9.features,\n          map = _this$props9.map,\n          attributeBlacklist = _this$props9.attributeBlacklist,\n          onRowClick = _this$props9.onRowClick,\n          onRowMouseOver = _this$props9.onRowMouseOver,\n          onRowMouseOut = _this$props9.onRowMouseOut,\n          zoomToExtent = _this$props9.zoomToExtent,\n          selectable = _this$props9.selectable,\n          featureStyle = _this$props9.featureStyle,\n          highlightStyle = _this$props9.highlightStyle,\n          selectStyle = _this$props9.selectStyle,\n          layerName = _this$props9.layerName,\n          columnDefs = _this$props9.columnDefs,\n          children = _this$props9.children,\n          rowData = _this$props9.rowData,\n          passThroughProps = _objectWithoutProperties(_this$props9, _excluded);\n\n      var finalClassName = className ? \"\".concat(className, \" \").concat(this._className, \" \").concat(theme) : \"\".concat(this._className, \" \").concat(theme); // TODO: Not sure, if this is still needed. One may want to get a specific\n      // row by using getRowFromFeatureKey instead.\n\n      var rowClassNameFn;\n\n      if ((0, _isFunction2[\"default\"])(rowClassName)) {\n        rowClassNameFn = function rowClassNameFn(node) {\n          var determinedRowClass = rowClassName(node.data);\n          return \"\".concat(_this2._rowClassName, \" \").concat(determinedRowClass);\n        };\n      } else {\n        var finalRowClassName = rowClassName ? \"\".concat(rowClassName, \" \").concat(this._rowClassName) : this._rowClassName;\n\n        rowClassNameFn = function rowClassNameFn(node) {\n          return \"\".concat(finalRowClassName, \" \").concat(_this2._rowKeyClassNamePrefix).concat((0, _kebabCase2[\"default\"])(node.data.key));\n        };\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: finalClassName // TODO: move to less?!\n        ,\n        style: {\n          height: height,\n          width: width\n        }\n      }, /*#__PURE__*/React.createElement(_react2.AgGridReact, _extends({\n        columnDefs: columnDefs && (0, _isArray2[\"default\"])(columnDefs) ? columnDefs : this.getColumnDefs(),\n        rowData: rowData && (0, _isArray2[\"default\"])(rowData) ? rowData : this.getRowData(),\n        onGridReady: this.onGridReady.bind(this),\n        rowSelection: \"multiple\",\n        suppressRowClickSelection: true,\n        onSelectionChanged: this.onSelectionChanged.bind(this),\n        onRowClicked: this.onRowClick.bind(this),\n        onCellMouseOver: this.onRowMouseOver.bind(this),\n        onCellMouseOut: this.onRowMouseOut.bind(this),\n        ref: function ref(_ref) {\n          return _this2._ref = _ref;\n        },\n        getRowClass: rowClassNameFn,\n        modules: [_clientSideRowModel.ClientSideRowModelModule]\n      }, passThroughProps), children));\n    }\n  }]);\n\n  return AgFeatureGrid;\n}(React.Component);\n\nexports.AgFeatureGrid = AgFeatureGrid;\n\n_defineProperty(AgFeatureGrid, \"defaultProps\", {\n  theme: 'ag-theme-balham',\n  height: 250,\n  features: [],\n  attributeBlacklist: [],\n  featureStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(255, 255, 255, 0.5)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 1\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(255, 255, 255, 0.5)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 1\n      })\n    })\n  }),\n  highlightStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(230, 247, 255, 0.8)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 1\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(230, 247, 255, 0.8)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 1\n      })\n    })\n  }),\n  selectStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(230, 247, 255, 0.8)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 2\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(230, 247, 255, 0.8)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 2\n      })\n    })\n  }),\n  layerName: 'react-geo-feature-grid-layer',\n  columnDefs: {},\n  keyFunction: _ol.getUid,\n  zoomToExtent: false,\n  selectable: false\n});\n\nvar _default = AgFeatureGrid;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@terrestris/react-geo/dist/Grid/AgFeatureGrid/AgFeatureGrid.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","AgFeatureGrid","React","_interopRequireWildcard","require","_Style","_interopRequireDefault","_Fill","_Circle","_Stroke","_Vector","_Vector2","_Geometry","_GeometryCollection","_ol","_isArray2","_differenceWith2","_isEqual2","_isFunction2","_kebabCase2","_MapUtil","_constants","_react2","_clientSideRowModel","_isNil2","_excluded","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_extends","assign","target","i","arguments","length","source","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_React$Component","_super","_props","_this","concat","CSS_PREFIX","map","_this$props","features","featureStyle","layerName","getLayerByName","layer","properties","name","style","addLayer","_source","_layer","selectable","on","onMapPointerMove","onMapSingleClick","olEvt","_this$props2","highlightStyle","selectStyle","grid","state","selectedRowKeys","getSelectedRowKeys","selectedFeatures","getFeaturesAtPixel","pixel","layerFilter","layerCand","api","rowRenderer","feature","keyFunction","rc","forEachRowComp","idx","rowComp","getRowNode","data","el","getBodyRowElement","classList","remove","_rowHoverClassName","includes","setStyle","undefined","add","_this$props3","selectedFeature","node","getRowFromFeatureKey","setSelected","_node","removeLayer","_this$props4","un","_this$props5","attributeBlacklist","columnDefs","columns","getProperties","headerName","checkboxSelection","headerCheckboxSelection","width","pinned","lockPosition","suppressMenu","suppressSorting","suppressFilter","suppressResize","suppressMovable","index","field","filtered","reduce","_this$props6","f","rowNode","forEachNode","selectedRows","getSelectedRows","row","evt","onRowClick","getFeatureFromRowKey","zoomToFeatures","onRowMouseOver","highlightFeatures","onRowMouseOut","unhighlightFeatures","featGeometries","getGeometry","geomCollection","getView","fit","getExtent","onRowSelectionChange","_this$state","selectedRowsAfter","deselectedRows","a","b","deselectedFeatures","setState","resetFeatureStyles","selectFeatures","componentDidMount","_this$props7","zoomToExtent","initVectorLayer","initMapEventHandlers","componentDidUpdate","prevProps","_this$props8","clear","addFeatures","componentWillUnmount","deinitVectorLayer","deinitMapEventHandlers","onGridReady","onVisiblityChange","onGridIsReady","sizeColumnsToFit","render","_this2","_this$props9","className","height","theme","rowClassName","children","rowData","passThroughProps","finalClassName","_className","rowClassNameFn","determinedRowClass","_rowClassName","finalRowClassName","_rowKeyClassNamePrefix","createElement","AgGridReact","getColumnDefs","getRowData","bind","rowSelection","suppressRowClickSelection","onSelectionChanged","onRowClicked","onCellMouseOver","onCellMouseOut","ref","_ref","getRowClass","modules","ClientSideRowModelModule","Component","fill","color","stroke","image","radius","getUid","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.AgFeatureGrid = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _Style = _interopRequireDefault(require(\"ol/style/Style\"));\n\nvar _Fill = _interopRequireDefault(require(\"ol/style/Fill\"));\n\nvar _Circle = _interopRequireDefault(require(\"ol/style/Circle\"));\n\nvar _Stroke = _interopRequireDefault(require(\"ol/style/Stroke\"));\n\nvar _Vector = _interopRequireDefault(require(\"ol/source/Vector\"));\n\nvar _Vector2 = _interopRequireDefault(require(\"ol/layer/Vector\"));\n\nvar _Geometry = _interopRequireDefault(require(\"ol/geom/Geometry\"));\n\nvar _GeometryCollection = _interopRequireDefault(require(\"ol/geom/GeometryCollection\"));\n\nvar _ol = require(\"ol\");\n\nvar _isArray2 = _interopRequireDefault(require(\"lodash/isArray\"));\n\nvar _differenceWith2 = _interopRequireDefault(require(\"lodash/differenceWith\"));\n\nvar _isEqual2 = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _isFunction2 = _interopRequireDefault(require(\"lodash/isFunction\"));\n\nvar _kebabCase2 = _interopRequireDefault(require(\"lodash/kebabCase\"));\n\nvar _MapUtil = _interopRequireDefault(require(\"@terrestris/ol-util/dist/MapUtil/MapUtil\"));\n\nvar _constants = require(\"../../constants\");\n\nrequire(\"@ag-grid-community/core/dist/styles/ag-grid.css\");\n\nrequire(\"@ag-grid-community/core/dist/styles/ag-theme-balham.css\");\n\nrequire(\"@ag-grid-community/core/dist/styles/ag-theme-fresh.css\");\n\nvar _react2 = require(\"@ag-grid-community/react\");\n\nvar _clientSideRowModel = require(\"@ag-grid-community/client-side-row-model\");\n\nvar _isNil2 = _interopRequireDefault(require(\"lodash/isNil\"));\n\nvar _excluded = [\"className\", \"height\", \"width\", \"theme\", \"rowClassName\", \"features\", \"map\", \"attributeBlacklist\", \"onRowClick\", \"onRowMouseOver\", \"onRowMouseOut\", \"zoomToExtent\", \"selectable\", \"featureStyle\", \"highlightStyle\", \"selectStyle\", \"layerName\", \"columnDefs\", \"children\", \"rowData\"];\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * The AgFeatureGrid.\n *\n * @class The AgFeatureGrid\n * @extends React.Component\n */\nvar AgFeatureGrid = /*#__PURE__*/function (_React$Component) {\n  _inherits(AgFeatureGrid, _React$Component);\n\n  var _super = _createSuper(AgFeatureGrid);\n\n  /**\n   * The default properties.\n   */\n\n  /**\n   * The reference of this grid.\n   * @private\n   */\n\n  /**\n   * The className added to this component.\n   * @private\n   */\n\n  /**\n   * The class name to add to each table row.\n   * @private\n   */\n\n  /**\n   * The prefix to use for each table row class.\n   * @private\n   */\n\n  /**\n   * The hover class name.\n   * @private\n   */\n\n  /**\n   * The source holding the features of the grid.\n   * @private\n   */\n\n  /**\n   * The layer representing the features of the grid.\n   * @private\n   */\n\n  /**\n   * The constructor.\n   */\n  function AgFeatureGrid(_props) {\n    var _this;\n\n    _classCallCheck(this, AgFeatureGrid);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"_ref\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_className\", \"\".concat(_constants.CSS_PREFIX, \"ag-feature-grid\"));\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowClassName\", \"\".concat(_constants.CSS_PREFIX, \"ag-feature-grid-row\"));\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowKeyClassNamePrefix\", 'row-key-');\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowHoverClassName\", 'ag-row-hover');\n\n    _defineProperty(_assertThisInitialized(_this), \"_source\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_layer\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"initVectorLayer\", function (map) {\n      var _this$props = _this.props,\n          features = _this$props.features,\n          featureStyle = _this$props.featureStyle,\n          layerName = _this$props.layerName;\n\n      if (_MapUtil[\"default\"].getLayerByName(map, layerName)) {\n        return;\n      }\n\n      var source = new _Vector[\"default\"]({\n        features: features\n      });\n      var layer = new _Vector2[\"default\"]({\n        properties: {\n          name: layerName\n        },\n        source: source,\n        style: featureStyle\n      });\n      map.addLayer(layer);\n      _this._source = source;\n      _this._layer = layer;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"initMapEventHandlers\", function (map) {\n      var selectable = _this.props.selectable;\n      map.on('pointermove', _this.onMapPointerMove);\n\n      if (selectable) {\n        map.on('singleclick', _this.onMapSingleClick);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMapPointerMove\", function (olEvt) {\n      var _this$props2 = _this.props,\n          map = _this$props2.map,\n          features = _this$props2.features,\n          highlightStyle = _this$props2.highlightStyle,\n          selectStyle = _this$props2.selectStyle;\n      var grid = _this.state.grid;\n\n      var selectedRowKeys = _this.getSelectedRowKeys();\n\n      var selectedFeatures = map.getFeaturesAtPixel(olEvt.pixel, {\n        layerFilter: function layerFilter(layerCand) {\n          return layerCand === _this._layer;\n        }\n      }) || [];\n\n      if (!grid || !grid.api) {\n        return;\n      }\n\n      var rowRenderer = grid.api.rowRenderer;\n      features.forEach(function (feature) {\n        var key = _this.props.keyFunction(feature);\n\n        var rc;\n        rowRenderer.forEachRowComp(function (idx, rowComp) {\n          if (rowComp.getRowNode().data.key === key) {\n            rc = rowComp;\n          }\n        });\n\n        if (rc) {\n          var el = rc.getBodyRowElement();\n\n          if (el) {\n            el.classList.remove(_this._rowHoverClassName);\n          }\n        }\n\n        if (selectedRowKeys.includes(key)) {\n          feature.setStyle(selectStyle);\n        } else {\n          feature.setStyle(undefined);\n        }\n      });\n      selectedFeatures.forEach(function (feature) {\n        var key = _this.props.keyFunction(feature);\n\n        var rc;\n        rowRenderer.forEachRowComp(function (idx, rowComp) {\n          if (rowComp.getRowNode().data.key === key) {\n            rc = rowComp;\n          }\n        });\n\n        if (rc) {\n          var el = rc.getBodyRowElement();\n\n          if (el) {\n            el.classList.add(_this._rowHoverClassName);\n          }\n        }\n\n        feature.setStyle(highlightStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMapSingleClick\", function (olEvt) {\n      var _this$props3 = _this.props,\n          map = _this$props3.map,\n          selectStyle = _this$props3.selectStyle,\n          onMapSingleClick = _this$props3.onMapSingleClick;\n\n      var selectedRowKeys = _this.getSelectedRowKeys();\n\n      var selectedFeatures = map.getFeaturesAtPixel(olEvt.pixel, {\n        layerFilter: function layerFilter(layerCand) {\n          return layerCand === _this._layer;\n        }\n      }) || [];\n\n      if ((0, _isFunction2[\"default\"])(onMapSingleClick)) {\n        onMapSingleClick(olEvt, selectedFeatures);\n      }\n\n      selectedFeatures.forEach(function (selectedFeature) {\n        var key = _this.props.keyFunction(selectedFeature);\n\n        if (selectedRowKeys && selectedRowKeys.includes(key)) {\n          selectedFeature.setStyle(undefined);\n\n          var node = _this.getRowFromFeatureKey(key);\n\n          if (node) {\n            node.setSelected(false);\n          }\n        } else {\n          selectedFeature.setStyle(selectStyle);\n\n          var _node = _this.getRowFromFeatureKey(key);\n\n          if (_node) {\n            _node.setSelected(true);\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deinitVectorLayer\", function () {\n      var map = _this.props.map;\n\n      if ((0, _isNil2[\"default\"])(_this._layer)) {\n        return;\n      }\n\n      map.removeLayer(_this._layer);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deinitMapEventHandlers\", function () {\n      var _this$props4 = _this.props,\n          map = _this$props4.map,\n          selectable = _this$props4.selectable;\n      map.un('pointermove', _this.onMapPointerMove);\n\n      if (selectable) {\n        map.un('singleclick', _this.onMapSingleClick);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getColumnDefs\", function () {\n      var _this$props5 = _this.props,\n          attributeBlacklist = _this$props5.attributeBlacklist,\n          features = _this$props5.features,\n          columnDefs = _this$props5.columnDefs,\n          selectable = _this$props5.selectable;\n      var columns = [];\n\n      if (features.length < 1) {\n        return;\n      }\n\n      var feature = features[0];\n      var props = feature.getProperties();\n\n      if (selectable) {\n        columns.push({\n          headerName: '',\n          checkboxSelection: true,\n          headerCheckboxSelection: true,\n          width: 28,\n          pinned: 'left',\n          lockPosition: true,\n          suppressMenu: true,\n          suppressSorting: true,\n          suppressFilter: true,\n          suppressResize: true,\n          suppressMovable: true\n        });\n      }\n\n      var index = -1;\n      Object.keys(props).forEach(function (key) {\n        if (attributeBlacklist.includes(key)) {\n          return;\n        }\n\n        if (props[key] instanceof _Geometry[\"default\"]) {\n          return;\n        }\n\n        if (columnDefs[key] && columnDefs[key].index !== undefined) {\n          index = columnDefs[key].index;\n        } else {\n          ++index;\n        }\n\n        columns[index] = _objectSpread({\n          headerName: key,\n          field: key\n        }, columnDefs[key]);\n      });\n      return columns;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRowData\", function () {\n      var features = _this.props.features;\n      return features.map(function (feature) {\n        var properties = feature.getProperties();\n        var filtered = Object.keys(properties).filter(function (key) {\n          return !(properties[key] instanceof _Geometry[\"default\"]);\n        }).reduce(function (obj, key) {\n          obj[key] = properties[key];\n          return obj;\n        }, {});\n        return _objectSpread({\n          key: _this.props.keyFunction(feature)\n        }, filtered);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getFeatureFromRowKey\", function (key) {\n      var _this$props6 = _this.props,\n          features = _this$props6.features,\n          keyFunction = _this$props6.keyFunction;\n      var feature = features.filter(function (f) {\n        return keyFunction(f) === key;\n      });\n      return feature[0];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRowFromFeatureKey\", function (key) {\n      var grid = _this.state.grid;\n      var rowNode;\n\n      if (!grid || !grid.api) {\n        return;\n      }\n\n      grid.api.forEachNode(function (node) {\n        if (node.data.key === key) {\n          rowNode = node;\n        }\n      });\n      return rowNode;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getSelectedRowKeys\", function () {\n      var grid = _this.state.grid;\n\n      if (!grid || !grid.api) {\n        return [];\n      }\n\n      var selectedRows = grid.api.getSelectedRows();\n      return selectedRows.map(function (row) {\n        return row.key;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowClick\", function (evt) {\n      var onRowClick = _this.props.onRowClick;\n      var row = evt.data;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction2[\"default\"])(onRowClick)) {\n        onRowClick(row, feature, evt);\n      } else {\n        _this.zoomToFeatures([feature]);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowMouseOver\", function (evt) {\n      var onRowMouseOver = _this.props.onRowMouseOver;\n      var row = evt.data;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction2[\"default\"])(onRowMouseOver)) {\n        onRowMouseOver(row, feature, evt);\n      }\n\n      _this.highlightFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowMouseOut\", function (evt) {\n      var onRowMouseOut = _this.props.onRowMouseOut;\n      var row = evt.data;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction2[\"default\"])(onRowMouseOut)) {\n        onRowMouseOut(row, feature, evt);\n      }\n\n      _this.unhighlightFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomToFeatures\", function (features) {\n      var map = _this.props.map;\n      var featGeometries = features.map(function (f) {\n        return f.getGeometry();\n      }).filter(function (f) {\n        return !(0, _isNil2[\"default\"])(f);\n      });\n\n      if (featGeometries.length > 0) {\n        var geomCollection = new _GeometryCollection[\"default\"](featGeometries);\n        map.getView().fit(geomCollection.getExtent());\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightFeatures\", function (highlightFeatures) {\n      var highlightStyle = _this.props.highlightStyle;\n      highlightFeatures.forEach(function (feature) {\n        return feature.setStyle(highlightStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unhighlightFeatures\", function (unhighlightFeatures) {\n      var selectStyle = _this.props.selectStyle;\n\n      var selectedRowKeys = _this.getSelectedRowKeys();\n\n      unhighlightFeatures.forEach(function (feature) {\n        var key = _this.props.keyFunction(feature);\n\n        if (selectedRowKeys && selectedRowKeys.includes(key)) {\n          feature.setStyle(selectStyle);\n        } else {\n          feature.setStyle(undefined);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectFeatures\", function (features) {\n      var selectStyle = _this.props.selectStyle;\n      features.forEach(function (feature) {\n        if (feature) {\n          feature.setStyle(selectStyle);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetFeatureStyles\", function () {\n      var features = _this.props.features;\n      features.forEach(function (feature) {\n        return feature.setStyle(undefined);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectionChanged\", function (evt) {\n      var onRowSelectionChange = _this.props.onRowSelectionChange;\n      var _this$state = _this.state,\n          grid = _this$state.grid,\n          selectedRows = _this$state.selectedRows;\n      var selectedRowsAfter;\n\n      if (!grid || !grid.api) {\n        selectedRowsAfter = evt.api.getSelectedRows();\n      } else {\n        selectedRowsAfter = grid.api.getSelectedRows();\n      }\n\n      var deselectedRows = (0, _differenceWith2[\"default\"])(selectedRows, selectedRowsAfter, function (a, b) {\n        return a.key === b.key;\n      });\n      var selectedFeatures = selectedRowsAfter.map(function (row) {\n        return _this.getFeatureFromRowKey(row.key);\n      });\n      var deselectedFeatures = deselectedRows.map(function (row) {\n        return _this.getFeatureFromRowKey(row.key);\n      }); // update state\n\n      _this.setState({\n        selectedRows: selectedRowsAfter\n      });\n\n      if ((0, _isFunction2[\"default\"])(onRowSelectionChange)) {\n        onRowSelectionChange(selectedRowsAfter, selectedFeatures, deselectedRows, deselectedFeatures, evt);\n      }\n\n      _this.resetFeatureStyles();\n\n      _this.selectFeatures(selectedFeatures);\n    });\n\n    _this.state = {\n      grid: null,\n      selectedRows: []\n    };\n    return _this;\n  }\n  /**\n   * Called on lifecycle phase componentDidMount.\n   */\n\n\n  _createClass(AgFeatureGrid, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props7 = this.props,\n          map = _this$props7.map,\n          features = _this$props7.features,\n          zoomToExtent = _this$props7.zoomToExtent;\n      this.initVectorLayer(map);\n      this.initMapEventHandlers(map);\n\n      if (zoomToExtent) {\n        this.zoomToFeatures(features);\n      }\n    }\n    /**\n     * Invoked immediately after updating occurs. This method is not called for\n     * the initial render.\n     *\n     * @param prevProps The previous props.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props8 = this.props,\n          map = _this$props8.map,\n          features = _this$props8.features,\n          selectable = _this$props8.selectable,\n          zoomToExtent = _this$props8.zoomToExtent;\n\n      if (!(0, _isEqual2[\"default\"])(prevProps.map, map)) {\n        this.initVectorLayer(map);\n        this.initMapEventHandlers(map);\n      }\n\n      if (!(0, _isEqual2[\"default\"])(prevProps.features, features)) {\n        if (this._source) {\n          this._source.clear();\n\n          this._source.addFeatures(features);\n        }\n\n        if (zoomToExtent) {\n          this.zoomToFeatures(features);\n        }\n      }\n\n      if (!(0, _isEqual2[\"default\"])(prevProps.selectable, selectable)) {\n        if (selectable && map) {\n          map.on('singleclick', this.onMapSingleClick);\n        } else {\n          if (map) {\n            map.un('singleclick', this.onMapSingleClick);\n          }\n        }\n      }\n    }\n    /**\n     * Called on lifecycle phase componentWillUnmount.\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.deinitVectorLayer();\n      this.deinitMapEventHandlers();\n    }\n    /**\n     * Initialized the vector layer that will be used to draw the input features\n     * on and adds it to the map (if any).\n     *\n     * @param map The map to add the layer to.\n     */\n\n  }, {\n    key: \"onGridReady\",\n    value:\n    /**\n     *\n     * @param grid\n     */\n    function onGridReady(grid) {\n      this.setState({\n        grid: grid\n      }, this.onVisiblityChange);\n\n      if (this.props.onGridIsReady) {\n        this.props.onGridIsReady(grid);\n      }\n    }\n    /**\n     *\n     */\n\n  }, {\n    key: \"onVisiblityChange\",\n    value: function onVisiblityChange() {\n      if (this.state.grid) {\n        this.state.grid.api.sizeColumnsToFit();\n      }\n    }\n    /**\n     * The render method.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props9 = this.props,\n          className = _this$props9.className,\n          height = _this$props9.height,\n          width = _this$props9.width,\n          theme = _this$props9.theme,\n          rowClassName = _this$props9.rowClassName,\n          features = _this$props9.features,\n          map = _this$props9.map,\n          attributeBlacklist = _this$props9.attributeBlacklist,\n          onRowClick = _this$props9.onRowClick,\n          onRowMouseOver = _this$props9.onRowMouseOver,\n          onRowMouseOut = _this$props9.onRowMouseOut,\n          zoomToExtent = _this$props9.zoomToExtent,\n          selectable = _this$props9.selectable,\n          featureStyle = _this$props9.featureStyle,\n          highlightStyle = _this$props9.highlightStyle,\n          selectStyle = _this$props9.selectStyle,\n          layerName = _this$props9.layerName,\n          columnDefs = _this$props9.columnDefs,\n          children = _this$props9.children,\n          rowData = _this$props9.rowData,\n          passThroughProps = _objectWithoutProperties(_this$props9, _excluded);\n\n      var finalClassName = className ? \"\".concat(className, \" \").concat(this._className, \" \").concat(theme) : \"\".concat(this._className, \" \").concat(theme); // TODO: Not sure, if this is still needed. One may want to get a specific\n      // row by using getRowFromFeatureKey instead.\n\n      var rowClassNameFn;\n\n      if ((0, _isFunction2[\"default\"])(rowClassName)) {\n        rowClassNameFn = function rowClassNameFn(node) {\n          var determinedRowClass = rowClassName(node.data);\n          return \"\".concat(_this2._rowClassName, \" \").concat(determinedRowClass);\n        };\n      } else {\n        var finalRowClassName = rowClassName ? \"\".concat(rowClassName, \" \").concat(this._rowClassName) : this._rowClassName;\n\n        rowClassNameFn = function rowClassNameFn(node) {\n          return \"\".concat(finalRowClassName, \" \").concat(_this2._rowKeyClassNamePrefix).concat((0, _kebabCase2[\"default\"])(node.data.key));\n        };\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: finalClassName // TODO: move to less?!\n        ,\n        style: {\n          height: height,\n          width: width\n        }\n      }, /*#__PURE__*/React.createElement(_react2.AgGridReact, _extends({\n        columnDefs: columnDefs && (0, _isArray2[\"default\"])(columnDefs) ? columnDefs : this.getColumnDefs(),\n        rowData: rowData && (0, _isArray2[\"default\"])(rowData) ? rowData : this.getRowData(),\n        onGridReady: this.onGridReady.bind(this),\n        rowSelection: \"multiple\",\n        suppressRowClickSelection: true,\n        onSelectionChanged: this.onSelectionChanged.bind(this),\n        onRowClicked: this.onRowClick.bind(this),\n        onCellMouseOver: this.onRowMouseOver.bind(this),\n        onCellMouseOut: this.onRowMouseOut.bind(this),\n        ref: function ref(_ref) {\n          return _this2._ref = _ref;\n        },\n        getRowClass: rowClassNameFn,\n        modules: [_clientSideRowModel.ClientSideRowModelModule]\n      }, passThroughProps), children));\n    }\n  }]);\n\n  return AgFeatureGrid;\n}(React.Component);\n\nexports.AgFeatureGrid = AgFeatureGrid;\n\n_defineProperty(AgFeatureGrid, \"defaultProps\", {\n  theme: 'ag-theme-balham',\n  height: 250,\n  features: [],\n  attributeBlacklist: [],\n  featureStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(255, 255, 255, 0.5)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 1\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(255, 255, 255, 0.5)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 1\n      })\n    })\n  }),\n  highlightStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(230, 247, 255, 0.8)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 1\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(230, 247, 255, 0.8)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 1\n      })\n    })\n  }),\n  selectStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(230, 247, 255, 0.8)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 2\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(230, 247, 255, 0.8)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 2\n      })\n    })\n  }),\n  layerName: 'react-geo-feature-grid-layer',\n  columnDefs: {},\n  keyFunction: _ol.getUid,\n  zoomToExtent: false,\n  selectable: false\n});\n\nvar _default = AgFeatureGrid;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}