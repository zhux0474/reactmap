{"ast":null,"code":";\n\n(function () {\n  // closure for web browsers\n  if (typeof module === 'object' && module.exports) {\n    module.exports = LRUCache;\n  } else {\n    // just set the global for non-node platforms.\n    this.LRUCache = LRUCache;\n  }\n\n  function hOP(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n\n  function naiveLength() {\n    return 1;\n  }\n\n  var didTypeWarning = false;\n\n  function typeCheckKey(key) {\n    if (!didTypeWarning && typeof key !== 'string' && typeof key !== 'number') {\n      didTypeWarning = true;\n      console.error(new TypeError(\"LRU: key must be a string or number. Almost certainly a bug! \" + typeof key).stack);\n    }\n  }\n\n  function LRUCache(options) {\n    if (!(this instanceof LRUCache)) return new LRUCache(options);\n    if (typeof options === 'number') options = {\n      max: options\n    };\n    if (!options) options = {};\n    this._max = options.max; // Kind of weird to have a default max of Infinity, but oh well.\n\n    if (!this._max || !(typeof this._max === \"number\") || this._max <= 0) this._max = Infinity;\n    this._lengthCalculator = options.length || naiveLength;\n    if (typeof this._lengthCalculator !== \"function\") this._lengthCalculator = naiveLength;\n    this._allowStale = options.stale || false;\n    this._maxAge = options.maxAge || null;\n    this._dispose = options.dispose;\n    this.reset();\n  } // resize the cache when the max changes.\n\n\n  Object.defineProperty(LRUCache.prototype, \"max\", {\n    set: function (mL) {\n      if (!mL || !(typeof mL === \"number\") || mL <= 0) mL = Infinity;\n      this._max = mL;\n      if (this._length > this._max) trim(this);\n    },\n    get: function () {\n      return this._max;\n    },\n    enumerable: true\n  }); // resize the cache when the lengthCalculator changes.\n\n  Object.defineProperty(LRUCache.prototype, \"lengthCalculator\", {\n    set: function (lC) {\n      if (typeof lC !== \"function\") {\n        this._lengthCalculator = naiveLength;\n        this._length = this._itemCount;\n\n        for (var key in this._cache) {\n          this._cache[key].length = 1;\n        }\n      } else {\n        this._lengthCalculator = lC;\n        this._length = 0;\n\n        for (var key in this._cache) {\n          this._cache[key].length = this._lengthCalculator(this._cache[key].value);\n          this._length += this._cache[key].length;\n        }\n      }\n\n      if (this._length > this._max) trim(this);\n    },\n    get: function () {\n      return this._lengthCalculator;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(LRUCache.prototype, \"length\", {\n    get: function () {\n      return this._length;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(LRUCache.prototype, \"itemCount\", {\n    get: function () {\n      return this._itemCount;\n    },\n    enumerable: true\n  });\n\n  LRUCache.prototype.forEach = function (fn, thisp) {\n    thisp = thisp || this;\n    var i = 0;\n    var itemCount = this._itemCount;\n\n    for (var k = this._mru - 1; k >= 0 && i < itemCount; k--) if (this._lruList[k]) {\n      i++;\n      var hit = this._lruList[k];\n\n      if (isStale(this, hit)) {\n        del(this, hit);\n        if (!this._allowStale) hit = undefined;\n      }\n\n      if (hit) {\n        fn.call(thisp, hit.value, hit.key, this);\n      }\n    }\n  };\n\n  LRUCache.prototype.keys = function () {\n    var keys = new Array(this._itemCount);\n    var i = 0;\n\n    for (var k = this._mru - 1; k >= 0 && i < this._itemCount; k--) if (this._lruList[k]) {\n      var hit = this._lruList[k];\n      keys[i++] = hit.key;\n    }\n\n    return keys;\n  };\n\n  LRUCache.prototype.values = function () {\n    var values = new Array(this._itemCount);\n    var i = 0;\n\n    for (var k = this._mru - 1; k >= 0 && i < this._itemCount; k--) if (this._lruList[k]) {\n      var hit = this._lruList[k];\n      values[i++] = hit.value;\n    }\n\n    return values;\n  };\n\n  LRUCache.prototype.reset = function () {\n    if (this._dispose && this._cache) {\n      for (var k in this._cache) {\n        this._dispose(k, this._cache[k].value);\n      }\n    }\n\n    this._cache = Object.create(null); // hash of items by key\n\n    this._lruList = Object.create(null); // list of items in order of use recency\n\n    this._mru = 0; // most recently used\n\n    this._lru = 0; // least recently used\n\n    this._length = 0; // number of items in the list\n\n    this._itemCount = 0;\n  };\n\n  LRUCache.prototype.dump = function () {\n    var arr = [];\n    var i = 0;\n\n    for (var k = this._mru - 1; k >= 0 && i < this._itemCount; k--) if (this._lruList[k]) {\n      var hit = this._lruList[k];\n\n      if (!isStale(this, hit)) {\n        //Do not store staled hits\n        ++i;\n        arr.push({\n          k: hit.key,\n          v: hit.value,\n          e: hit.now + (hit.maxAge || 0)\n        });\n      }\n    } //arr has the most read first\n\n\n    return arr;\n  };\n\n  LRUCache.prototype.dumpLru = function () {\n    return this._lruList;\n  };\n\n  LRUCache.prototype.set = function (key, value, maxAge) {\n    maxAge = maxAge || this._maxAge;\n    typeCheckKey(key);\n    var now = maxAge ? Date.now() : 0;\n\n    var len = this._lengthCalculator(value);\n\n    if (hOP(this._cache, key)) {\n      if (len > this._max) {\n        del(this, this._cache[key]);\n        return false;\n      } // dispose of the old one before overwriting\n\n\n      if (this._dispose) this._dispose(key, this._cache[key].value);\n      this._cache[key].now = now;\n      this._cache[key].maxAge = maxAge;\n      this._cache[key].value = value;\n      this._length += len - this._cache[key].length;\n      this._cache[key].length = len;\n      this.get(key);\n      if (this._length > this._max) trim(this);\n      return true;\n    }\n\n    var hit = new Entry(key, value, this._mru++, len, now, maxAge); // oversized objects fall out of cache automatically.\n\n    if (hit.length > this._max) {\n      if (this._dispose) this._dispose(key, value);\n      return false;\n    }\n\n    this._length += hit.length;\n    this._lruList[hit.lu] = this._cache[key] = hit;\n    this._itemCount++;\n    if (this._length > this._max) trim(this);\n    return true;\n  };\n\n  LRUCache.prototype.has = function (key) {\n    typeCheckKey(key);\n    if (!hOP(this._cache, key)) return false;\n    var hit = this._cache[key];\n\n    if (isStale(this, hit)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  LRUCache.prototype.get = function (key) {\n    typeCheckKey(key);\n    return get(this, key, true);\n  };\n\n  LRUCache.prototype.peek = function (key) {\n    typeCheckKey(key);\n    return get(this, key, false);\n  };\n\n  LRUCache.prototype.pop = function () {\n    var hit = this._lruList[this._lru];\n    del(this, hit);\n    return hit || null;\n  };\n\n  LRUCache.prototype.del = function (key) {\n    typeCheckKey(key);\n    del(this, this._cache[key]);\n  };\n\n  LRUCache.prototype.load = function (arr) {\n    //reset the cache\n    this.reset();\n    var now = Date.now(); //A previous serialized cache has the most recent items first\n\n    for (var l = arr.length - 1; l >= 0; l--) {\n      var hit = arr[l];\n      typeCheckKey(hit.k);\n      var expiresAt = hit.e || 0;\n\n      if (expiresAt === 0) {\n        //the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v);\n      } else {\n        var maxAge = expiresAt - now; //dont add already expired items\n\n        if (maxAge > 0) this.set(hit.k, hit.v, maxAge);\n      }\n    }\n  };\n\n  function get(self, key, doUse) {\n    typeCheckKey(key);\n    var hit = self._cache[key];\n\n    if (hit) {\n      if (isStale(self, hit)) {\n        del(self, hit);\n        if (!self._allowStale) hit = undefined;\n      } else {\n        if (doUse) use(self, hit);\n      }\n\n      if (hit) hit = hit.value;\n    }\n\n    return hit;\n  }\n\n  function isStale(self, hit) {\n    if (!hit || !hit.maxAge && !self._maxAge) return false;\n    var stale = false;\n    var diff = Date.now() - hit.now;\n\n    if (hit.maxAge) {\n      stale = diff > hit.maxAge;\n    } else {\n      stale = self._maxAge && diff > self._maxAge;\n    }\n\n    return stale;\n  }\n\n  function use(self, hit) {\n    shiftLU(self, hit);\n    hit.lu = self._mru++;\n    self._lruList[hit.lu] = hit;\n  }\n\n  function trim(self) {\n    while (self._lru < self._mru && self._length > self._max) del(self, self._lruList[self._lru]);\n  }\n\n  function shiftLU(self, hit) {\n    delete self._lruList[hit.lu];\n\n    while (self._lru < self._mru && !self._lruList[self._lru]) self._lru++;\n  }\n\n  function del(self, hit) {\n    if (hit) {\n      if (self._dispose) self._dispose(hit.key, hit.value);\n      self._length -= hit.length;\n      self._itemCount--;\n      delete self._cache[hit.key];\n      shiftLU(self, hit);\n    }\n  } // classy, since V8 prefers predictable objects.\n\n\n  function Entry(key, value, lu, length, now, maxAge) {\n    this.key = key;\n    this.value = value;\n    this.lu = lu;\n    this.length = length;\n    this.now = now;\n    if (maxAge) this.maxAge = maxAge;\n  }\n})();","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/shpjs/node_modules/lru-cache/lib/lru-cache.js"],"names":["module","exports","LRUCache","hOP","obj","key","Object","prototype","hasOwnProperty","call","naiveLength","didTypeWarning","typeCheckKey","console","error","TypeError","stack","options","max","_max","Infinity","_lengthCalculator","length","_allowStale","stale","_maxAge","maxAge","_dispose","dispose","reset","defineProperty","set","mL","_length","trim","get","enumerable","lC","_itemCount","_cache","value","forEach","fn","thisp","i","itemCount","k","_mru","_lruList","hit","isStale","del","undefined","keys","Array","values","create","_lru","dump","arr","push","v","e","now","dumpLru","Date","len","Entry","lu","has","peek","pop","load","l","expiresAt","self","doUse","use","diff","shiftLU"],"mappings":"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","sourcesContent":[";(function () { // closure for web browsers\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = LRUCache\n} else {\n  // just set the global for non-node platforms.\n  this.LRUCache = LRUCache\n}\n\nfunction hOP (obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key)\n}\n\nfunction naiveLength () { return 1 }\n\nvar didTypeWarning = false\nfunction typeCheckKey(key) {\n  if (!didTypeWarning && typeof key !== 'string' && typeof key !== 'number') {\n    didTypeWarning = true\n    console.error(new TypeError(\"LRU: key must be a string or number. Almost certainly a bug! \" + typeof key).stack)\n  }\n}\n\nfunction LRUCache (options) {\n  if (!(this instanceof LRUCache))\n    return new LRUCache(options)\n\n  if (typeof options === 'number')\n    options = { max: options }\n\n  if (!options)\n    options = {}\n\n  this._max = options.max\n  // Kind of weird to have a default max of Infinity, but oh well.\n  if (!this._max || !(typeof this._max === \"number\") || this._max <= 0 )\n    this._max = Infinity\n\n  this._lengthCalculator = options.length || naiveLength\n  if (typeof this._lengthCalculator !== \"function\")\n    this._lengthCalculator = naiveLength\n\n  this._allowStale = options.stale || false\n  this._maxAge = options.maxAge || null\n  this._dispose = options.dispose\n  this.reset()\n}\n\n// resize the cache when the max changes.\nObject.defineProperty(LRUCache.prototype, \"max\",\n  { set : function (mL) {\n      if (!mL || !(typeof mL === \"number\") || mL <= 0 ) mL = Infinity\n      this._max = mL\n      if (this._length > this._max) trim(this)\n    }\n  , get : function () { return this._max }\n  , enumerable : true\n  })\n\n// resize the cache when the lengthCalculator changes.\nObject.defineProperty(LRUCache.prototype, \"lengthCalculator\",\n  { set : function (lC) {\n      if (typeof lC !== \"function\") {\n        this._lengthCalculator = naiveLength\n        this._length = this._itemCount\n        for (var key in this._cache) {\n          this._cache[key].length = 1\n        }\n      } else {\n        this._lengthCalculator = lC\n        this._length = 0\n        for (var key in this._cache) {\n          this._cache[key].length = this._lengthCalculator(this._cache[key].value)\n          this._length += this._cache[key].length\n        }\n      }\n\n      if (this._length > this._max) trim(this)\n    }\n  , get : function () { return this._lengthCalculator }\n  , enumerable : true\n  })\n\nObject.defineProperty(LRUCache.prototype, \"length\",\n  { get : function () { return this._length }\n  , enumerable : true\n  })\n\n\nObject.defineProperty(LRUCache.prototype, \"itemCount\",\n  { get : function () { return this._itemCount }\n  , enumerable : true\n  })\n\nLRUCache.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  var i = 0\n  var itemCount = this._itemCount\n\n  for (var k = this._mru - 1; k >= 0 && i < itemCount; k--) if (this._lruList[k]) {\n    i++\n    var hit = this._lruList[k]\n    if (isStale(this, hit)) {\n      del(this, hit)\n      if (!this._allowStale) hit = undefined\n    }\n    if (hit) {\n      fn.call(thisp, hit.value, hit.key, this)\n    }\n  }\n}\n\nLRUCache.prototype.keys = function () {\n  var keys = new Array(this._itemCount)\n  var i = 0\n  for (var k = this._mru - 1; k >= 0 && i < this._itemCount; k--) if (this._lruList[k]) {\n    var hit = this._lruList[k]\n    keys[i++] = hit.key\n  }\n  return keys\n}\n\nLRUCache.prototype.values = function () {\n  var values = new Array(this._itemCount)\n  var i = 0\n  for (var k = this._mru - 1; k >= 0 && i < this._itemCount; k--) if (this._lruList[k]) {\n    var hit = this._lruList[k]\n    values[i++] = hit.value\n  }\n  return values\n}\n\nLRUCache.prototype.reset = function () {\n  if (this._dispose && this._cache) {\n    for (var k in this._cache) {\n      this._dispose(k, this._cache[k].value)\n    }\n  }\n\n  this._cache = Object.create(null) // hash of items by key\n  this._lruList = Object.create(null) // list of items in order of use recency\n  this._mru = 0 // most recently used\n  this._lru = 0 // least recently used\n  this._length = 0 // number of items in the list\n  this._itemCount = 0\n}\n\nLRUCache.prototype.dump = function () {\n  var arr = []\n  var i = 0\n\n  for (var k = this._mru - 1; k >= 0 && i < this._itemCount; k--) if (this._lruList[k]) {\n    var hit = this._lruList[k]\n    if (!isStale(this, hit)) {\n      //Do not store staled hits\n      ++i\n      arr.push({\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      });\n    }\n  }\n  //arr has the most read first\n  return arr\n}\n\nLRUCache.prototype.dumpLru = function () {\n  return this._lruList\n}\n\nLRUCache.prototype.set = function (key, value, maxAge) {\n  maxAge = maxAge || this._maxAge\n  typeCheckKey(key)\n\n  var now = maxAge ? Date.now() : 0\n  var len = this._lengthCalculator(value)\n\n  if (hOP(this._cache, key)) {\n    if (len > this._max) {\n      del(this, this._cache[key])\n      return false\n    }\n    // dispose of the old one before overwriting\n    if (this._dispose)\n      this._dispose(key, this._cache[key].value)\n\n    this._cache[key].now = now\n    this._cache[key].maxAge = maxAge\n    this._cache[key].value = value\n    this._length += (len - this._cache[key].length)\n    this._cache[key].length = len\n    this.get(key)\n\n    if (this._length > this._max)\n      trim(this)\n\n    return true\n  }\n\n  var hit = new Entry(key, value, this._mru++, len, now, maxAge)\n\n  // oversized objects fall out of cache automatically.\n  if (hit.length > this._max) {\n    if (this._dispose) this._dispose(key, value)\n    return false\n  }\n\n  this._length += hit.length\n  this._lruList[hit.lu] = this._cache[key] = hit\n  this._itemCount ++\n\n  if (this._length > this._max)\n    trim(this)\n\n  return true\n}\n\nLRUCache.prototype.has = function (key) {\n  typeCheckKey(key)\n  if (!hOP(this._cache, key)) return false\n  var hit = this._cache[key]\n  if (isStale(this, hit)) {\n    return false\n  }\n  return true\n}\n\nLRUCache.prototype.get = function (key) {\n  typeCheckKey(key)\n  return get(this, key, true)\n}\n\nLRUCache.prototype.peek = function (key) {\n  typeCheckKey(key)\n  return get(this, key, false)\n}\n\nLRUCache.prototype.pop = function () {\n  var hit = this._lruList[this._lru]\n  del(this, hit)\n  return hit || null\n}\n\nLRUCache.prototype.del = function (key) {\n  typeCheckKey(key)\n  del(this, this._cache[key])\n}\n\nLRUCache.prototype.load = function (arr) {\n  //reset the cache\n  this.reset();\n\n  var now = Date.now()\n  //A previous serialized cache has the most recent items first\n  for (var l = arr.length - 1; l >= 0; l-- ) {\n    var hit = arr[l]\n    typeCheckKey(hit.k)\n    var expiresAt = hit.e || 0\n    if (expiresAt === 0) {\n      //the item was created without expiration in a non aged cache\n      this.set(hit.k, hit.v)\n    } else {\n      var maxAge = expiresAt - now\n      //dont add already expired items\n      if (maxAge > 0) this.set(hit.k, hit.v, maxAge)\n    }\n  }\n}\n\nfunction get (self, key, doUse) {\n  typeCheckKey(key)\n  var hit = self._cache[key]\n  if (hit) {\n    if (isStale(self, hit)) {\n      del(self, hit)\n      if (!self._allowStale) hit = undefined\n    } else {\n      if (doUse) use(self, hit)\n    }\n    if (hit) hit = hit.value\n  }\n  return hit\n}\n\nfunction isStale(self, hit) {\n  if (!hit || (!hit.maxAge && !self._maxAge)) return false\n  var stale = false;\n  var diff = Date.now() - hit.now\n  if (hit.maxAge) {\n    stale = diff > hit.maxAge\n  } else {\n    stale = self._maxAge && (diff > self._maxAge)\n  }\n  return stale;\n}\n\nfunction use (self, hit) {\n  shiftLU(self, hit)\n  hit.lu = self._mru ++\n  self._lruList[hit.lu] = hit\n}\n\nfunction trim (self) {\n  while (self._lru < self._mru && self._length > self._max)\n    del(self, self._lruList[self._lru])\n}\n\nfunction shiftLU (self, hit) {\n  delete self._lruList[ hit.lu ]\n  while (self._lru < self._mru && !self._lruList[self._lru]) self._lru ++\n}\n\nfunction del (self, hit) {\n  if (hit) {\n    if (self._dispose) self._dispose(hit.key, hit.value)\n    self._length -= hit.length\n    self._itemCount --\n    delete self._cache[ hit.key ]\n    shiftLU(self, hit)\n  }\n}\n\n// classy, since V8 prefers predictable objects.\nfunction Entry (key, value, lu, length, now, maxAge) {\n  this.key = key\n  this.value = value\n  this.lu = lu\n  this.length = length\n  this.now = now\n  if (maxAge) this.maxAge = maxAge\n}\n\n})()\n"]},"metadata":{},"sourceType":"script"}