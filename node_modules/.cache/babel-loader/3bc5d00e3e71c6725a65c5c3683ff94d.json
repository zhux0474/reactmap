{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { BeanStub } from \"../context/beanStub\";\nimport { PostConstruct, Bean, Autowired, PreDestroy } from \"../context/context\";\nimport { escapeString } from \"../utils/string\";\nimport { createIcon } from \"../utils/icon\";\nimport { removeFromArray } from \"../utils/array\";\nimport { find } from \"../utils/generic\";\nimport { getBodyHeight, getBodyWidth } from \"../utils/browser\";\nimport { loadTemplate, addCssClass, clearElement, addOrRemoveCssClass } from \"../utils/dom\";\nimport { isFunction } from \"../utils/function\";\nexport var DragSourceType;\n\n(function (DragSourceType) {\n  DragSourceType[DragSourceType[\"ToolPanel\"] = 0] = \"ToolPanel\";\n  DragSourceType[DragSourceType[\"HeaderCell\"] = 1] = \"HeaderCell\";\n  DragSourceType[DragSourceType[\"RowDrag\"] = 2] = \"RowDrag\";\n  DragSourceType[DragSourceType[\"ChartPanel\"] = 3] = \"ChartPanel\";\n})(DragSourceType || (DragSourceType = {}));\n\nexport var VerticalDirection;\n\n(function (VerticalDirection) {\n  VerticalDirection[VerticalDirection[\"Up\"] = 0] = \"Up\";\n  VerticalDirection[VerticalDirection[\"Down\"] = 1] = \"Down\";\n})(VerticalDirection || (VerticalDirection = {}));\n\nexport var HorizontalDirection;\n\n(function (HorizontalDirection) {\n  HorizontalDirection[HorizontalDirection[\"Left\"] = 0] = \"Left\";\n  HorizontalDirection[HorizontalDirection[\"Right\"] = 1] = \"Right\";\n})(HorizontalDirection || (HorizontalDirection = {}));\n\nvar DragAndDropService =\n/** @class */\nfunction (_super) {\n  __extends(DragAndDropService, _super);\n\n  function DragAndDropService() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.dragSourceAndParamsList = [];\n    _this.dropTargets = [];\n    return _this;\n  }\n\n  DragAndDropService_1 = DragAndDropService;\n\n  DragAndDropService.prototype.init = function () {\n    this.ePinnedIcon = createIcon('columnMovePin', this.gridOptionsWrapper, null);\n    this.eHideIcon = createIcon('columnMoveHide', this.gridOptionsWrapper, null);\n    this.eMoveIcon = createIcon('columnMoveMove', this.gridOptionsWrapper, null);\n    this.eLeftIcon = createIcon('columnMoveLeft', this.gridOptionsWrapper, null);\n    this.eRightIcon = createIcon('columnMoveRight', this.gridOptionsWrapper, null);\n    this.eGroupIcon = createIcon('columnMoveGroup', this.gridOptionsWrapper, null);\n    this.eAggregateIcon = createIcon('columnMoveValue', this.gridOptionsWrapper, null);\n    this.ePivotIcon = createIcon('columnMovePivot', this.gridOptionsWrapper, null);\n    this.eDropNotAllowedIcon = createIcon('dropNotAllowed', this.gridOptionsWrapper, null);\n  };\n\n  DragAndDropService.prototype.addDragSource = function (dragSource, allowTouch) {\n    if (allowTouch === void 0) {\n      allowTouch = false;\n    }\n\n    var params = {\n      eElement: dragSource.eElement,\n      dragStartPixels: dragSource.dragStartPixels,\n      onDragStart: this.onDragStart.bind(this, dragSource),\n      onDragStop: this.onDragStop.bind(this),\n      onDragging: this.onDragging.bind(this)\n    };\n    this.dragSourceAndParamsList.push({\n      params: params,\n      dragSource: dragSource\n    });\n    this.dragService.addDragSource(params, allowTouch);\n  };\n\n  DragAndDropService.prototype.removeDragSource = function (dragSource) {\n    var sourceAndParams = find(this.dragSourceAndParamsList, function (item) {\n      return item.dragSource === dragSource;\n    });\n\n    if (sourceAndParams) {\n      this.dragService.removeDragSource(sourceAndParams.params);\n      removeFromArray(this.dragSourceAndParamsList, sourceAndParams);\n    }\n  };\n\n  DragAndDropService.prototype.clearDragSourceParamsList = function () {\n    var _this = this;\n\n    this.dragSourceAndParamsList.forEach(function (sourceAndParams) {\n      return _this.dragService.removeDragSource(sourceAndParams.params);\n    });\n    this.dragSourceAndParamsList.length = 0;\n  };\n\n  DragAndDropService.prototype.nudge = function () {\n    if (this.dragging) {\n      this.onDragging(this.eventLastTime, true);\n    }\n  };\n\n  DragAndDropService.prototype.onDragStart = function (dragSource, mouseEvent) {\n    this.dragging = true;\n    this.dragSource = dragSource;\n    this.eventLastTime = mouseEvent;\n    this.dragItem = this.dragSource.getDragItem();\n    this.lastDropTarget = this.dragSource.dragSourceDropTarget;\n\n    if (this.dragSource.onDragStarted) {\n      this.dragSource.onDragStarted();\n    }\n\n    this.createGhost();\n  };\n\n  DragAndDropService.prototype.onDragStop = function (mouseEvent) {\n    this.eventLastTime = null;\n    this.dragging = false;\n\n    if (this.dragSource.onDragStopped) {\n      this.dragSource.onDragStopped();\n    }\n\n    if (this.lastDropTarget && this.lastDropTarget.onDragStop) {\n      var draggingEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, null, null, false);\n      this.lastDropTarget.onDragStop(draggingEvent);\n    }\n\n    this.lastDropTarget = null;\n    this.dragItem = null;\n    this.removeGhost();\n  };\n\n  DragAndDropService.prototype.onDragging = function (mouseEvent, fromNudge) {\n    var _this = this;\n\n    var hDirection = this.getHorizontalDirection(mouseEvent);\n    var vDirection = this.getVerticalDirection(mouseEvent);\n    this.eventLastTime = mouseEvent;\n    this.positionGhost(mouseEvent); // check if mouseEvent intersects with any of the drop targets\n\n    var validDropTargets = this.dropTargets.filter(function (target) {\n      return _this.isMouseOnDropTarget(mouseEvent, target);\n    });\n    var len = validDropTargets.length;\n    var dropTarget = null;\n\n    if (len > 0) {\n      dropTarget = len === 1 ? validDropTargets[0] // the current mouse position could intersect with more than 1 element\n      // if they are nested. In that case we need to get the most specific\n      // container, which is the one that does not contain any other targets.\n      : validDropTargets.reduce(function (prevTarget, currTarget) {\n        if (!prevTarget) {\n          return currTarget;\n        }\n\n        var prevContainer = prevTarget.getContainer();\n        var currContainer = currTarget.getContainer();\n\n        if (prevContainer.contains(currContainer)) {\n          return currTarget;\n        }\n\n        return prevTarget;\n      });\n    }\n\n    if (dropTarget !== this.lastDropTarget) {\n      this.leaveLastTargetIfExists(mouseEvent, hDirection, vDirection, fromNudge);\n      this.enterDragTargetIfExists(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      this.lastDropTarget = dropTarget;\n    } else if (dropTarget && dropTarget.onDragging) {\n      var draggingEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      dropTarget.onDragging(draggingEvent);\n    }\n  };\n\n  DragAndDropService.prototype.enterDragTargetIfExists = function (dropTarget, mouseEvent, hDirection, vDirection, fromNudge) {\n    if (!dropTarget) {\n      return;\n    }\n\n    if (dropTarget.onDragEnter) {\n      var dragEnterEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      dropTarget.onDragEnter(dragEnterEvent);\n    }\n\n    this.setGhostIcon(dropTarget.getIconName ? dropTarget.getIconName() : null);\n  };\n\n  DragAndDropService.prototype.leaveLastTargetIfExists = function (mouseEvent, hDirection, vDirection, fromNudge) {\n    if (!this.lastDropTarget) {\n      return;\n    }\n\n    if (this.lastDropTarget.onDragLeave) {\n      var dragLeaveEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      this.lastDropTarget.onDragLeave(dragLeaveEvent);\n    }\n\n    this.setGhostIcon(null);\n  };\n\n  DragAndDropService.prototype.getAllContainersFromDropTarget = function (dropTarget) {\n    var secondaryContainers = dropTarget.getSecondaryContainers ? dropTarget.getSecondaryContainers() : null;\n    var containers = [[dropTarget.getContainer()]];\n    return secondaryContainers ? containers.concat(secondaryContainers) : containers;\n  };\n\n  DragAndDropService.prototype.allContainersIntersect = function (mouseEvent, containers) {\n    for (var _i = 0, containers_1 = containers; _i < containers_1.length; _i++) {\n      var container = containers_1[_i];\n      var rect = container.getBoundingClientRect(); // if element is not visible, then width and height are zero\n\n      if (rect.width === 0 || rect.height === 0) {\n        return false;\n      }\n\n      var horizontalFit = mouseEvent.clientX >= rect.left && mouseEvent.clientX < rect.right;\n      var verticalFit = mouseEvent.clientY >= rect.top && mouseEvent.clientY < rect.bottom;\n\n      if (!horizontalFit || !verticalFit) {\n        return false;\n      }\n    }\n\n    return true;\n  }; // checks if the mouse is on the drop target. it checks eContainer and eSecondaryContainers\n\n\n  DragAndDropService.prototype.isMouseOnDropTarget = function (mouseEvent, dropTarget) {\n    var allContainersFromDropTarget = this.getAllContainersFromDropTarget(dropTarget);\n    var mouseOverTarget = false;\n\n    for (var _i = 0, allContainersFromDropTarget_1 = allContainersFromDropTarget; _i < allContainersFromDropTarget_1.length; _i++) {\n      var currentContainers = allContainersFromDropTarget_1[_i];\n\n      if (this.allContainersIntersect(mouseEvent, currentContainers)) {\n        mouseOverTarget = true;\n        break;\n      }\n    }\n\n    return mouseOverTarget && dropTarget.isInterestedIn(this.dragSource.type);\n  };\n\n  DragAndDropService.prototype.addDropTarget = function (dropTarget) {\n    this.dropTargets.push(dropTarget);\n  };\n\n  DragAndDropService.prototype.removeDropTarget = function (dropTarget) {\n    this.dropTargets = this.dropTargets.filter(function (target) {\n      return target.getContainer() !== dropTarget.getContainer();\n    });\n  };\n\n  DragAndDropService.prototype.hasExternalDropZones = function () {\n    return this.dropTargets.some(function (zones) {\n      return zones.external;\n    });\n  };\n\n  DragAndDropService.prototype.findExternalZone = function (params) {\n    var externalTargets = this.dropTargets.filter(function (target) {\n      return target.external;\n    });\n    return find(externalTargets, function (zone) {\n      return zone.getContainer() === params.getContainer();\n    });\n  };\n\n  DragAndDropService.prototype.getHorizontalDirection = function (event) {\n    var clientX = this.eventLastTime && this.eventLastTime.clientX;\n    var eClientX = event.clientX;\n\n    if (clientX === eClientX) {\n      return null;\n    }\n\n    return clientX > eClientX ? HorizontalDirection.Left : HorizontalDirection.Right;\n  };\n\n  DragAndDropService.prototype.getVerticalDirection = function (event) {\n    var clientY = this.eventLastTime && this.eventLastTime.clientY;\n    var eClientY = event.clientY;\n\n    if (clientY === eClientY) {\n      return null;\n    }\n\n    return clientY > eClientY ? VerticalDirection.Up : VerticalDirection.Down;\n  };\n\n  DragAndDropService.prototype.createDropTargetEvent = function (dropTarget, event, hDirection, vDirection, fromNudge) {\n    // localise x and y to the target\n    var dropZoneTarget = dropTarget.getContainer();\n    var rect = dropZoneTarget.getBoundingClientRect();\n\n    var _a = this,\n        api = _a.gridApi,\n        columnApi = _a.columnApi,\n        dragItem = _a.dragItem,\n        dragSource = _a.dragSource;\n\n    var x = event.clientX - rect.left;\n    var y = event.clientY - rect.top;\n    return {\n      event: event,\n      x: x,\n      y: y,\n      vDirection: vDirection,\n      hDirection: hDirection,\n      dragSource: dragSource,\n      fromNudge: fromNudge,\n      dragItem: dragItem,\n      api: api,\n      columnApi: columnApi,\n      dropZoneTarget: dropZoneTarget\n    };\n  };\n\n  DragAndDropService.prototype.positionGhost = function (event) {\n    var ghost = this.eGhost;\n\n    if (!ghost) {\n      return;\n    }\n\n    var ghostRect = ghost.getBoundingClientRect();\n    var ghostHeight = ghostRect.height; // for some reason, without the '-2', it still overlapped by 1 or 2 pixels, which\n    // then brought in scrollbars to the browser. no idea why, but putting in -2 here\n    // works around it which is good enough for me.\n\n    var browserWidth = getBodyWidth() - 2;\n    var browserHeight = getBodyHeight() - 2;\n    var top = event.pageY - ghostHeight / 2;\n    var left = event.pageX - 10;\n    var usrDocument = this.gridOptionsWrapper.getDocument();\n    var windowScrollY = window.pageYOffset || usrDocument.documentElement.scrollTop;\n    var windowScrollX = window.pageXOffset || usrDocument.documentElement.scrollLeft; // check ghost is not positioned outside of the browser\n\n    if (browserWidth > 0 && left + ghost.clientWidth > browserWidth + windowScrollX) {\n      left = browserWidth + windowScrollX - ghost.clientWidth;\n    }\n\n    if (left < 0) {\n      left = 0;\n    }\n\n    if (browserHeight > 0 && top + ghost.clientHeight > browserHeight + windowScrollY) {\n      top = browserHeight + windowScrollY - ghost.clientHeight;\n    }\n\n    if (top < 0) {\n      top = 0;\n    }\n\n    ghost.style.left = left + \"px\";\n    ghost.style.top = top + \"px\";\n  };\n\n  DragAndDropService.prototype.removeGhost = function () {\n    if (this.eGhost && this.eGhostParent) {\n      this.eGhostParent.removeChild(this.eGhost);\n    }\n\n    this.eGhost = null;\n  };\n\n  DragAndDropService.prototype.createGhost = function () {\n    this.eGhost = loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);\n    var theme = this.environment.getTheme().theme;\n\n    if (theme) {\n      addCssClass(this.eGhost, theme);\n    }\n\n    this.eGhostIcon = this.eGhost.querySelector('.ag-dnd-ghost-icon');\n    this.setGhostIcon(null);\n    var eText = this.eGhost.querySelector('.ag-dnd-ghost-label');\n    var dragItemName = this.dragSource.dragItemName;\n\n    if (isFunction(dragItemName)) {\n      dragItemName = dragItemName();\n    }\n\n    eText.innerHTML = escapeString(dragItemName) || '';\n    this.eGhost.style.height = '25px';\n    this.eGhost.style.top = '20px';\n    this.eGhost.style.left = '20px';\n    var usrDocument = this.gridOptionsWrapper.getDocument();\n    var targetEl = usrDocument.fullscreenElement || usrDocument.querySelector('body');\n    this.eGhostParent = targetEl;\n\n    if (!this.eGhostParent) {\n      console.warn('AG Grid: could not find document body, it is needed for dragging columns');\n    } else {\n      this.eGhostParent.appendChild(this.eGhost);\n    }\n  };\n\n  DragAndDropService.prototype.setGhostIcon = function (iconName, shake) {\n    if (shake === void 0) {\n      shake = false;\n    }\n\n    clearElement(this.eGhostIcon);\n    var eIcon = null;\n\n    if (!iconName) {\n      iconName = this.dragSource.defaultIconName || DragAndDropService_1.ICON_NOT_ALLOWED;\n    }\n\n    switch (iconName) {\n      case DragAndDropService_1.ICON_PINNED:\n        eIcon = this.ePinnedIcon;\n        break;\n\n      case DragAndDropService_1.ICON_MOVE:\n        eIcon = this.eMoveIcon;\n        break;\n\n      case DragAndDropService_1.ICON_LEFT:\n        eIcon = this.eLeftIcon;\n        break;\n\n      case DragAndDropService_1.ICON_RIGHT:\n        eIcon = this.eRightIcon;\n        break;\n\n      case DragAndDropService_1.ICON_GROUP:\n        eIcon = this.eGroupIcon;\n        break;\n\n      case DragAndDropService_1.ICON_AGGREGATE:\n        eIcon = this.eAggregateIcon;\n        break;\n\n      case DragAndDropService_1.ICON_PIVOT:\n        eIcon = this.ePivotIcon;\n        break;\n\n      case DragAndDropService_1.ICON_NOT_ALLOWED:\n        eIcon = this.eDropNotAllowedIcon;\n        break;\n\n      case DragAndDropService_1.ICON_HIDE:\n        eIcon = this.eHideIcon;\n        break;\n    }\n\n    addOrRemoveCssClass(this.eGhostIcon, 'ag-shake-left-to-right', shake);\n\n    if (eIcon === this.eHideIcon && this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()) {\n      return;\n    }\n\n    if (eIcon) {\n      this.eGhostIcon.appendChild(eIcon);\n    }\n  };\n\n  var DragAndDropService_1;\n  DragAndDropService.ICON_PINNED = 'pinned';\n  DragAndDropService.ICON_MOVE = 'move';\n  DragAndDropService.ICON_LEFT = 'left';\n  DragAndDropService.ICON_RIGHT = 'right';\n  DragAndDropService.ICON_GROUP = 'group';\n  DragAndDropService.ICON_AGGREGATE = 'aggregate';\n  DragAndDropService.ICON_PIVOT = 'pivot';\n  DragAndDropService.ICON_NOT_ALLOWED = 'notAllowed';\n  DragAndDropService.ICON_HIDE = 'hide';\n  DragAndDropService.GHOST_TEMPLATE = \"<div class=\\\"ag-dnd-ghost ag-unselectable\\\">\\n            <span class=\\\"ag-dnd-ghost-icon ag-shake-left-to-right\\\"></span>\\n            <div class=\\\"ag-dnd-ghost-label\\\"></div>\\n        </div>\";\n\n  __decorate([Autowired('dragService')], DragAndDropService.prototype, \"dragService\", void 0);\n\n  __decorate([Autowired('environment')], DragAndDropService.prototype, \"environment\", void 0);\n\n  __decorate([Autowired('columnApi')], DragAndDropService.prototype, \"columnApi\", void 0);\n\n  __decorate([Autowired('gridApi')], DragAndDropService.prototype, \"gridApi\", void 0);\n\n  __decorate([PostConstruct], DragAndDropService.prototype, \"init\", null);\n\n  __decorate([PreDestroy], DragAndDropService.prototype, \"clearDragSourceParamsList\", null);\n\n  DragAndDropService = DragAndDropService_1 = __decorate([Bean('dragAndDropService')], DragAndDropService);\n  return DragAndDropService;\n}(BeanStub);\n\nexport { DragAndDropService };","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/core/dist/es6/dragAndDrop/dragAndDropService.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","BeanStub","PostConstruct","Bean","Autowired","PreDestroy","escapeString","createIcon","removeFromArray","find","getBodyHeight","getBodyWidth","loadTemplate","addCssClass","clearElement","addOrRemoveCssClass","isFunction","DragSourceType","VerticalDirection","HorizontalDirection","DragAndDropService","_super","_this","apply","dragSourceAndParamsList","dropTargets","DragAndDropService_1","init","ePinnedIcon","gridOptionsWrapper","eHideIcon","eMoveIcon","eLeftIcon","eRightIcon","eGroupIcon","eAggregateIcon","ePivotIcon","eDropNotAllowedIcon","addDragSource","dragSource","allowTouch","params","eElement","dragStartPixels","onDragStart","bind","onDragStop","onDragging","push","dragService","removeDragSource","sourceAndParams","item","clearDragSourceParamsList","forEach","nudge","dragging","eventLastTime","mouseEvent","dragItem","getDragItem","lastDropTarget","dragSourceDropTarget","onDragStarted","createGhost","onDragStopped","draggingEvent","createDropTargetEvent","removeGhost","fromNudge","hDirection","getHorizontalDirection","vDirection","getVerticalDirection","positionGhost","validDropTargets","filter","isMouseOnDropTarget","len","dropTarget","reduce","prevTarget","currTarget","prevContainer","getContainer","currContainer","contains","leaveLastTargetIfExists","enterDragTargetIfExists","onDragEnter","dragEnterEvent","setGhostIcon","getIconName","onDragLeave","dragLeaveEvent","getAllContainersFromDropTarget","secondaryContainers","getSecondaryContainers","containers","concat","allContainersIntersect","_i","containers_1","container","rect","getBoundingClientRect","width","height","horizontalFit","clientX","left","right","verticalFit","clientY","top","bottom","allContainersFromDropTarget","mouseOverTarget","allContainersFromDropTarget_1","currentContainers","isInterestedIn","type","addDropTarget","removeDropTarget","hasExternalDropZones","some","zones","external","findExternalZone","externalTargets","zone","event","eClientX","Left","Right","eClientY","Up","Down","dropZoneTarget","_a","api","gridApi","columnApi","x","y","ghost","eGhost","ghostRect","ghostHeight","browserWidth","browserHeight","pageY","pageX","usrDocument","getDocument","windowScrollY","window","pageYOffset","documentElement","scrollTop","windowScrollX","pageXOffset","scrollLeft","clientWidth","clientHeight","style","eGhostParent","removeChild","GHOST_TEMPLATE","theme","environment","getTheme","eGhostIcon","querySelector","eText","dragItemName","innerHTML","targetEl","fullscreenElement","console","warn","appendChild","iconName","shake","eIcon","defaultIconName","ICON_NOT_ALLOWED","ICON_PINNED","ICON_MOVE","ICON_LEFT","ICON_RIGHT","ICON_GROUP","ICON_AGGREGATE","ICON_PIVOT","ICON_HIDE","isSuppressDragLeaveHidesColumns"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { BeanStub } from \"../context/beanStub\";\nimport { PostConstruct, Bean, Autowired, PreDestroy } from \"../context/context\";\nimport { escapeString } from \"../utils/string\";\nimport { createIcon } from \"../utils/icon\";\nimport { removeFromArray } from \"../utils/array\";\nimport { find } from \"../utils/generic\";\nimport { getBodyHeight, getBodyWidth } from \"../utils/browser\";\nimport { loadTemplate, addCssClass, clearElement, addOrRemoveCssClass } from \"../utils/dom\";\nimport { isFunction } from \"../utils/function\";\nexport var DragSourceType;\n(function (DragSourceType) {\n    DragSourceType[DragSourceType[\"ToolPanel\"] = 0] = \"ToolPanel\";\n    DragSourceType[DragSourceType[\"HeaderCell\"] = 1] = \"HeaderCell\";\n    DragSourceType[DragSourceType[\"RowDrag\"] = 2] = \"RowDrag\";\n    DragSourceType[DragSourceType[\"ChartPanel\"] = 3] = \"ChartPanel\";\n})(DragSourceType || (DragSourceType = {}));\nexport var VerticalDirection;\n(function (VerticalDirection) {\n    VerticalDirection[VerticalDirection[\"Up\"] = 0] = \"Up\";\n    VerticalDirection[VerticalDirection[\"Down\"] = 1] = \"Down\";\n})(VerticalDirection || (VerticalDirection = {}));\nexport var HorizontalDirection;\n(function (HorizontalDirection) {\n    HorizontalDirection[HorizontalDirection[\"Left\"] = 0] = \"Left\";\n    HorizontalDirection[HorizontalDirection[\"Right\"] = 1] = \"Right\";\n})(HorizontalDirection || (HorizontalDirection = {}));\nvar DragAndDropService = /** @class */ (function (_super) {\n    __extends(DragAndDropService, _super);\n    function DragAndDropService() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dragSourceAndParamsList = [];\n        _this.dropTargets = [];\n        return _this;\n    }\n    DragAndDropService_1 = DragAndDropService;\n    DragAndDropService.prototype.init = function () {\n        this.ePinnedIcon = createIcon('columnMovePin', this.gridOptionsWrapper, null);\n        this.eHideIcon = createIcon('columnMoveHide', this.gridOptionsWrapper, null);\n        this.eMoveIcon = createIcon('columnMoveMove', this.gridOptionsWrapper, null);\n        this.eLeftIcon = createIcon('columnMoveLeft', this.gridOptionsWrapper, null);\n        this.eRightIcon = createIcon('columnMoveRight', this.gridOptionsWrapper, null);\n        this.eGroupIcon = createIcon('columnMoveGroup', this.gridOptionsWrapper, null);\n        this.eAggregateIcon = createIcon('columnMoveValue', this.gridOptionsWrapper, null);\n        this.ePivotIcon = createIcon('columnMovePivot', this.gridOptionsWrapper, null);\n        this.eDropNotAllowedIcon = createIcon('dropNotAllowed', this.gridOptionsWrapper, null);\n    };\n    DragAndDropService.prototype.addDragSource = function (dragSource, allowTouch) {\n        if (allowTouch === void 0) { allowTouch = false; }\n        var params = {\n            eElement: dragSource.eElement,\n            dragStartPixels: dragSource.dragStartPixels,\n            onDragStart: this.onDragStart.bind(this, dragSource),\n            onDragStop: this.onDragStop.bind(this),\n            onDragging: this.onDragging.bind(this)\n        };\n        this.dragSourceAndParamsList.push({ params: params, dragSource: dragSource });\n        this.dragService.addDragSource(params, allowTouch);\n    };\n    DragAndDropService.prototype.removeDragSource = function (dragSource) {\n        var sourceAndParams = find(this.dragSourceAndParamsList, function (item) { return item.dragSource === dragSource; });\n        if (sourceAndParams) {\n            this.dragService.removeDragSource(sourceAndParams.params);\n            removeFromArray(this.dragSourceAndParamsList, sourceAndParams);\n        }\n    };\n    DragAndDropService.prototype.clearDragSourceParamsList = function () {\n        var _this = this;\n        this.dragSourceAndParamsList.forEach(function (sourceAndParams) { return _this.dragService.removeDragSource(sourceAndParams.params); });\n        this.dragSourceAndParamsList.length = 0;\n    };\n    DragAndDropService.prototype.nudge = function () {\n        if (this.dragging) {\n            this.onDragging(this.eventLastTime, true);\n        }\n    };\n    DragAndDropService.prototype.onDragStart = function (dragSource, mouseEvent) {\n        this.dragging = true;\n        this.dragSource = dragSource;\n        this.eventLastTime = mouseEvent;\n        this.dragItem = this.dragSource.getDragItem();\n        this.lastDropTarget = this.dragSource.dragSourceDropTarget;\n        if (this.dragSource.onDragStarted) {\n            this.dragSource.onDragStarted();\n        }\n        this.createGhost();\n    };\n    DragAndDropService.prototype.onDragStop = function (mouseEvent) {\n        this.eventLastTime = null;\n        this.dragging = false;\n        if (this.dragSource.onDragStopped) {\n            this.dragSource.onDragStopped();\n        }\n        if (this.lastDropTarget && this.lastDropTarget.onDragStop) {\n            var draggingEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, null, null, false);\n            this.lastDropTarget.onDragStop(draggingEvent);\n        }\n        this.lastDropTarget = null;\n        this.dragItem = null;\n        this.removeGhost();\n    };\n    DragAndDropService.prototype.onDragging = function (mouseEvent, fromNudge) {\n        var _this = this;\n        var hDirection = this.getHorizontalDirection(mouseEvent);\n        var vDirection = this.getVerticalDirection(mouseEvent);\n        this.eventLastTime = mouseEvent;\n        this.positionGhost(mouseEvent);\n        // check if mouseEvent intersects with any of the drop targets\n        var validDropTargets = this.dropTargets.filter(function (target) { return _this.isMouseOnDropTarget(mouseEvent, target); });\n        var len = validDropTargets.length;\n        var dropTarget = null;\n        if (len > 0) {\n            dropTarget = len === 1\n                ? validDropTargets[0]\n                // the current mouse position could intersect with more than 1 element\n                // if they are nested. In that case we need to get the most specific\n                // container, which is the one that does not contain any other targets.\n                : validDropTargets.reduce(function (prevTarget, currTarget) {\n                    if (!prevTarget) {\n                        return currTarget;\n                    }\n                    var prevContainer = prevTarget.getContainer();\n                    var currContainer = currTarget.getContainer();\n                    if (prevContainer.contains(currContainer)) {\n                        return currTarget;\n                    }\n                    return prevTarget;\n                });\n        }\n        if (dropTarget !== this.lastDropTarget) {\n            this.leaveLastTargetIfExists(mouseEvent, hDirection, vDirection, fromNudge);\n            this.enterDragTargetIfExists(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            this.lastDropTarget = dropTarget;\n        }\n        else if (dropTarget && dropTarget.onDragging) {\n            var draggingEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            dropTarget.onDragging(draggingEvent);\n        }\n    };\n    DragAndDropService.prototype.enterDragTargetIfExists = function (dropTarget, mouseEvent, hDirection, vDirection, fromNudge) {\n        if (!dropTarget) {\n            return;\n        }\n        if (dropTarget.onDragEnter) {\n            var dragEnterEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            dropTarget.onDragEnter(dragEnterEvent);\n        }\n        this.setGhostIcon(dropTarget.getIconName ? dropTarget.getIconName() : null);\n    };\n    DragAndDropService.prototype.leaveLastTargetIfExists = function (mouseEvent, hDirection, vDirection, fromNudge) {\n        if (!this.lastDropTarget) {\n            return;\n        }\n        if (this.lastDropTarget.onDragLeave) {\n            var dragLeaveEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            this.lastDropTarget.onDragLeave(dragLeaveEvent);\n        }\n        this.setGhostIcon(null);\n    };\n    DragAndDropService.prototype.getAllContainersFromDropTarget = function (dropTarget) {\n        var secondaryContainers = dropTarget.getSecondaryContainers ? dropTarget.getSecondaryContainers() : null;\n        var containers = [[dropTarget.getContainer()]];\n        return secondaryContainers ? containers.concat(secondaryContainers) : containers;\n    };\n    DragAndDropService.prototype.allContainersIntersect = function (mouseEvent, containers) {\n        for (var _i = 0, containers_1 = containers; _i < containers_1.length; _i++) {\n            var container = containers_1[_i];\n            var rect = container.getBoundingClientRect();\n            // if element is not visible, then width and height are zero\n            if (rect.width === 0 || rect.height === 0) {\n                return false;\n            }\n            var horizontalFit = mouseEvent.clientX >= rect.left && mouseEvent.clientX < rect.right;\n            var verticalFit = mouseEvent.clientY >= rect.top && mouseEvent.clientY < rect.bottom;\n            if (!horizontalFit || !verticalFit) {\n                return false;\n            }\n        }\n        return true;\n    };\n    // checks if the mouse is on the drop target. it checks eContainer and eSecondaryContainers\n    DragAndDropService.prototype.isMouseOnDropTarget = function (mouseEvent, dropTarget) {\n        var allContainersFromDropTarget = this.getAllContainersFromDropTarget(dropTarget);\n        var mouseOverTarget = false;\n        for (var _i = 0, allContainersFromDropTarget_1 = allContainersFromDropTarget; _i < allContainersFromDropTarget_1.length; _i++) {\n            var currentContainers = allContainersFromDropTarget_1[_i];\n            if (this.allContainersIntersect(mouseEvent, currentContainers)) {\n                mouseOverTarget = true;\n                break;\n            }\n        }\n        return mouseOverTarget && dropTarget.isInterestedIn(this.dragSource.type);\n    };\n    DragAndDropService.prototype.addDropTarget = function (dropTarget) {\n        this.dropTargets.push(dropTarget);\n    };\n    DragAndDropService.prototype.removeDropTarget = function (dropTarget) {\n        this.dropTargets = this.dropTargets.filter(function (target) { return target.getContainer() !== dropTarget.getContainer(); });\n    };\n    DragAndDropService.prototype.hasExternalDropZones = function () {\n        return this.dropTargets.some(function (zones) { return zones.external; });\n    };\n    DragAndDropService.prototype.findExternalZone = function (params) {\n        var externalTargets = this.dropTargets.filter(function (target) { return target.external; });\n        return find(externalTargets, function (zone) { return zone.getContainer() === params.getContainer(); });\n    };\n    DragAndDropService.prototype.getHorizontalDirection = function (event) {\n        var clientX = this.eventLastTime && this.eventLastTime.clientX;\n        var eClientX = event.clientX;\n        if (clientX === eClientX) {\n            return null;\n        }\n        return clientX > eClientX ? HorizontalDirection.Left : HorizontalDirection.Right;\n    };\n    DragAndDropService.prototype.getVerticalDirection = function (event) {\n        var clientY = this.eventLastTime && this.eventLastTime.clientY;\n        var eClientY = event.clientY;\n        if (clientY === eClientY) {\n            return null;\n        }\n        return clientY > eClientY ? VerticalDirection.Up : VerticalDirection.Down;\n    };\n    DragAndDropService.prototype.createDropTargetEvent = function (dropTarget, event, hDirection, vDirection, fromNudge) {\n        // localise x and y to the target\n        var dropZoneTarget = dropTarget.getContainer();\n        var rect = dropZoneTarget.getBoundingClientRect();\n        var _a = this, api = _a.gridApi, columnApi = _a.columnApi, dragItem = _a.dragItem, dragSource = _a.dragSource;\n        var x = event.clientX - rect.left;\n        var y = event.clientY - rect.top;\n        return { event: event, x: x, y: y, vDirection: vDirection, hDirection: hDirection, dragSource: dragSource, fromNudge: fromNudge, dragItem: dragItem, api: api, columnApi: columnApi, dropZoneTarget: dropZoneTarget };\n    };\n    DragAndDropService.prototype.positionGhost = function (event) {\n        var ghost = this.eGhost;\n        if (!ghost) {\n            return;\n        }\n        var ghostRect = ghost.getBoundingClientRect();\n        var ghostHeight = ghostRect.height;\n        // for some reason, without the '-2', it still overlapped by 1 or 2 pixels, which\n        // then brought in scrollbars to the browser. no idea why, but putting in -2 here\n        // works around it which is good enough for me.\n        var browserWidth = getBodyWidth() - 2;\n        var browserHeight = getBodyHeight() - 2;\n        var top = event.pageY - (ghostHeight / 2);\n        var left = event.pageX - 10;\n        var usrDocument = this.gridOptionsWrapper.getDocument();\n        var windowScrollY = window.pageYOffset || usrDocument.documentElement.scrollTop;\n        var windowScrollX = window.pageXOffset || usrDocument.documentElement.scrollLeft;\n        // check ghost is not positioned outside of the browser\n        if (browserWidth > 0 && ((left + ghost.clientWidth) > (browserWidth + windowScrollX))) {\n            left = browserWidth + windowScrollX - ghost.clientWidth;\n        }\n        if (left < 0) {\n            left = 0;\n        }\n        if (browserHeight > 0 && ((top + ghost.clientHeight) > (browserHeight + windowScrollY))) {\n            top = browserHeight + windowScrollY - ghost.clientHeight;\n        }\n        if (top < 0) {\n            top = 0;\n        }\n        ghost.style.left = left + \"px\";\n        ghost.style.top = top + \"px\";\n    };\n    DragAndDropService.prototype.removeGhost = function () {\n        if (this.eGhost && this.eGhostParent) {\n            this.eGhostParent.removeChild(this.eGhost);\n        }\n        this.eGhost = null;\n    };\n    DragAndDropService.prototype.createGhost = function () {\n        this.eGhost = loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);\n        var theme = this.environment.getTheme().theme;\n        if (theme) {\n            addCssClass(this.eGhost, theme);\n        }\n        this.eGhostIcon = this.eGhost.querySelector('.ag-dnd-ghost-icon');\n        this.setGhostIcon(null);\n        var eText = this.eGhost.querySelector('.ag-dnd-ghost-label');\n        var dragItemName = this.dragSource.dragItemName;\n        if (isFunction(dragItemName)) {\n            dragItemName = dragItemName();\n        }\n        eText.innerHTML = escapeString(dragItemName) || '';\n        this.eGhost.style.height = '25px';\n        this.eGhost.style.top = '20px';\n        this.eGhost.style.left = '20px';\n        var usrDocument = this.gridOptionsWrapper.getDocument();\n        var targetEl = usrDocument.fullscreenElement || usrDocument.querySelector('body');\n        this.eGhostParent = targetEl;\n        if (!this.eGhostParent) {\n            console.warn('AG Grid: could not find document body, it is needed for dragging columns');\n        }\n        else {\n            this.eGhostParent.appendChild(this.eGhost);\n        }\n    };\n    DragAndDropService.prototype.setGhostIcon = function (iconName, shake) {\n        if (shake === void 0) { shake = false; }\n        clearElement(this.eGhostIcon);\n        var eIcon = null;\n        if (!iconName) {\n            iconName = this.dragSource.defaultIconName || DragAndDropService_1.ICON_NOT_ALLOWED;\n        }\n        switch (iconName) {\n            case DragAndDropService_1.ICON_PINNED:\n                eIcon = this.ePinnedIcon;\n                break;\n            case DragAndDropService_1.ICON_MOVE:\n                eIcon = this.eMoveIcon;\n                break;\n            case DragAndDropService_1.ICON_LEFT:\n                eIcon = this.eLeftIcon;\n                break;\n            case DragAndDropService_1.ICON_RIGHT:\n                eIcon = this.eRightIcon;\n                break;\n            case DragAndDropService_1.ICON_GROUP:\n                eIcon = this.eGroupIcon;\n                break;\n            case DragAndDropService_1.ICON_AGGREGATE:\n                eIcon = this.eAggregateIcon;\n                break;\n            case DragAndDropService_1.ICON_PIVOT:\n                eIcon = this.ePivotIcon;\n                break;\n            case DragAndDropService_1.ICON_NOT_ALLOWED:\n                eIcon = this.eDropNotAllowedIcon;\n                break;\n            case DragAndDropService_1.ICON_HIDE:\n                eIcon = this.eHideIcon;\n                break;\n        }\n        addOrRemoveCssClass(this.eGhostIcon, 'ag-shake-left-to-right', shake);\n        if (eIcon === this.eHideIcon && this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()) {\n            return;\n        }\n        if (eIcon) {\n            this.eGhostIcon.appendChild(eIcon);\n        }\n    };\n    var DragAndDropService_1;\n    DragAndDropService.ICON_PINNED = 'pinned';\n    DragAndDropService.ICON_MOVE = 'move';\n    DragAndDropService.ICON_LEFT = 'left';\n    DragAndDropService.ICON_RIGHT = 'right';\n    DragAndDropService.ICON_GROUP = 'group';\n    DragAndDropService.ICON_AGGREGATE = 'aggregate';\n    DragAndDropService.ICON_PIVOT = 'pivot';\n    DragAndDropService.ICON_NOT_ALLOWED = 'notAllowed';\n    DragAndDropService.ICON_HIDE = 'hide';\n    DragAndDropService.GHOST_TEMPLATE = \"<div class=\\\"ag-dnd-ghost ag-unselectable\\\">\\n            <span class=\\\"ag-dnd-ghost-icon ag-shake-left-to-right\\\"></span>\\n            <div class=\\\"ag-dnd-ghost-label\\\"></div>\\n        </div>\";\n    __decorate([\n        Autowired('dragService')\n    ], DragAndDropService.prototype, \"dragService\", void 0);\n    __decorate([\n        Autowired('environment')\n    ], DragAndDropService.prototype, \"environment\", void 0);\n    __decorate([\n        Autowired('columnApi')\n    ], DragAndDropService.prototype, \"columnApi\", void 0);\n    __decorate([\n        Autowired('gridApi')\n    ], DragAndDropService.prototype, \"gridApi\", void 0);\n    __decorate([\n        PostConstruct\n    ], DragAndDropService.prototype, \"init\", null);\n    __decorate([\n        PreDestroy\n    ], DragAndDropService.prototype, \"clearDragSourceParamsList\", null);\n    DragAndDropService = DragAndDropService_1 = __decorate([\n        Bean('dragAndDropService')\n    ], DragAndDropService);\n    return DragAndDropService;\n}(BeanStub));\nexport { DragAndDropService };\n"]},"metadata":{},"sourceType":"module"}