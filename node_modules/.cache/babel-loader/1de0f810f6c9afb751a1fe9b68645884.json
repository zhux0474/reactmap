{"ast":null,"code":"// @ag-grid-community/react v26.2.0\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar beansContext_1 = require(\"../beansContext\");\n\nvar utils_1 = require(\"../utils\");\n\nvar jsComp_1 = require(\"../jsComp\");\n\nvar HeaderCellComp = function (props) {\n  var context = react_1.useContext(beansContext_1.BeansContext).context;\n\n  var _a = react_1.useState(new utils_1.CssClasses()),\n      cssClasses = _a[0],\n      setCssClasses = _a[1];\n\n  var _b = react_1.useState(),\n      width = _b[0],\n      setWidth = _b[1];\n\n  var _c = react_1.useState(),\n      title = _c[0],\n      setTitle = _c[1];\n\n  var _d = react_1.useState(),\n      colId = _d[0],\n      setColId = _d[1];\n\n  var _e = react_1.useState(),\n      ariaSort = _e[0],\n      setAriaSort = _e[1];\n\n  var _f = react_1.useState(),\n      ariaDescribedBy = _f[0],\n      setAriaDescribedBy = _f[1];\n\n  var _g = react_1.useState(),\n      userCompDetails = _g[0],\n      setUserCompDetails = _g[1];\n\n  var eGui = react_1.useRef(null);\n  var eResize = react_1.useRef(null);\n  var userCompRef = react_1.useRef();\n  var ctrl = props.ctrl;\n  react_1.useEffect(function () {\n    var compProxy = {\n      setWidth: function (width) {\n        return setWidth(width);\n      },\n      addOrRemoveCssClass: function (name, on) {\n        return setCssClasses(function (prev) {\n          return prev.setClass(name, on);\n        });\n      },\n      setAriaSort: function (sort) {\n        return setAriaSort(sort);\n      },\n      setColId: function (id) {\n        return setColId(id);\n      },\n      setTitle: function (title) {\n        return setTitle(title);\n      },\n      setAriaDescribedBy: function (value) {\n        return setAriaDescribedBy(value);\n      },\n      setUserCompDetails: function (compDetails) {\n        return setUserCompDetails(compDetails);\n      },\n      getUserCompInstance: function () {\n        return userCompRef.current || undefined;\n      }\n    };\n    ctrl.setComp(compProxy, eGui.current, eResize.current);\n    var selectAllGui = ctrl.getSelectAllGui();\n    eResize.current.insertAdjacentElement('afterend', selectAllGui);\n  }, []); // js comps\n\n  react_1.useEffect(function () {\n    return jsComp_1.showJsComp(userCompDetails, context, eGui.current, userCompRef);\n  }, [userCompDetails]); // add drag handling, must be done after component is added to the dom\n\n  react_1.useEffect(function () {\n    var userCompDomElement = undefined;\n    eGui.current.childNodes.forEach(function (node) {\n      if (node != null && node !== eResize.current) {\n        userCompDomElement = node;\n      }\n    });\n    ctrl.setDragSource(userCompDomElement);\n  }, [userCompDetails]);\n  var style = react_1.useMemo(function () {\n    return {\n      width: width\n    };\n  }, [width]);\n  var className = react_1.useMemo(function () {\n    return 'ag-header-cell ' + cssClasses.toString();\n  }, [cssClasses]);\n  var userCompStateless = react_1.useMemo(function () {\n    var res = userCompDetails && userCompDetails.componentFromFramework && utils_1.isComponentStateless(userCompDetails.componentClass);\n    return !!res;\n  }, [userCompDetails]);\n  var reactUserComp = userCompDetails && userCompDetails.componentFromFramework;\n  var UserCompClass = userCompDetails && userCompDetails.componentClass;\n  return react_1.default.createElement(\"div\", {\n    ref: eGui,\n    className: className,\n    style: style,\n    title: title,\n    \"col-id\": colId,\n    \"aria-sort\": ariaSort,\n    role: \"columnheader\",\n    unselectable: \"on\",\n    tabIndex: -1,\n    \"aria-describedby\": ariaDescribedBy\n  }, react_1.default.createElement(\"div\", {\n    ref: eResize,\n    className: \"ag-header-cell-resize\",\n    role: \"presentation\"\n  }), reactUserComp && userCompStateless && react_1.default.createElement(UserCompClass, __assign({}, userCompDetails.params)), reactUserComp && !userCompStateless && react_1.default.createElement(UserCompClass, __assign({}, userCompDetails.params, {\n    ref: userCompRef\n  })));\n};\n\nexports.default = react_1.memo(HeaderCellComp);","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/react/lib/reactUi/header/reactUi/header/headerCellComp.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { memo, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { BeansContext } from '../beansContext';\nimport { ColumnSortState, HeaderCellCtrl, IHeader, IHeaderCellComp, UserCompDetails } from '@ag-grid-community/core';\nimport { CssClasses, isComponentStateless } from '../utils';\nimport { showJsComp } from '../jsComp';\n\nconst HeaderCellComp = (props: {ctrl: HeaderCellCtrl}) => {\n\n    const {context} = useContext(BeansContext);\n\n    const [cssClasses, setCssClasses] = useState<CssClasses>(new CssClasses());\n    const [width, setWidth] = useState<string>();\n    const [title, setTitle] = useState<string>();\n    const [colId, setColId] = useState<string>();\n    const [ariaSort, setAriaSort] = useState<ColumnSortState>();\n    const [ariaDescribedBy, setAriaDescribedBy] = useState<string>();\n    const [userCompDetails, setUserCompDetails] = useState<UserCompDetails>();\n\n    const eGui = useRef<HTMLDivElement>(null);\n    const eResize = useRef<HTMLDivElement>(null);\n    const userCompRef = useRef<IHeader>();\n\n    const { ctrl } = props;\n\n    useEffect(() => {\n\n        const compProxy: IHeaderCellComp = {\n            setWidth: width => setWidth(width),\n            addOrRemoveCssClass: (name, on) => setCssClasses(prev => prev.setClass(name, on)),\n            setAriaSort: sort => setAriaSort(sort),\n            setColId: id => setColId(id),\n            setTitle: title => setTitle(title),\n            setAriaDescribedBy: value => setAriaDescribedBy(value),\n            setUserCompDetails: compDetails => setUserCompDetails(compDetails),\n            getUserCompInstance: ()=> userCompRef.current || undefined\n        };\n\n        ctrl.setComp(compProxy, eGui.current!, eResize.current!);\n\n        const selectAllGui = ctrl.getSelectAllGui();\n        eResize.current!.insertAdjacentElement('afterend', selectAllGui);\n\n    }, []);\n\n    // js comps\n    useEffect(() => {\n        return showJsComp(userCompDetails, context, eGui.current!, userCompRef);\n    }, [userCompDetails]);\n\n    // add drag handling, must be done after component is added to the dom\n    useEffect(()=> {\n        let userCompDomElement: HTMLElement | undefined = undefined;\n        eGui.current!.childNodes.forEach( node => {\n            if (node!=null && node!==eResize.current) {\n                userCompDomElement = node as HTMLElement;\n            }\n        });\n\n        ctrl.setDragSource(userCompDomElement);\n    }, [userCompDetails]);\n\n    const style = useMemo( ()=> ({\n        width: width\n    }), [width]);\n\n    const className = useMemo( ()=> 'ag-header-cell ' + cssClasses.toString(), [cssClasses] );\n\n    const userCompStateless = useMemo( ()=> {\n        const res = userCompDetails \n                    && userCompDetails.componentFromFramework \n                    && isComponentStateless(userCompDetails.componentClass);\n        return !!res;\n    }, [userCompDetails]);\n\n    const reactUserComp = userCompDetails && userCompDetails.componentFromFramework;\n    const UserCompClass = userCompDetails && userCompDetails.componentClass;\n\n    return (\n        <div ref={eGui} className={className} style={style} title={title} col-id={colId} \n                    aria-sort={ariaSort} role=\"columnheader\" unselectable=\"on\" tabIndex={-1}\n                    aria-describedby={ariaDescribedBy}>\n            <div ref={eResize} className=\"ag-header-cell-resize\" role=\"presentation\"></div>\n            { reactUserComp && userCompStateless && <UserCompClass { ...userCompDetails!.params } /> }\n            { reactUserComp && !userCompStateless && <UserCompClass { ...userCompDetails!.params } ref={ userCompRef }/> }\n        </div>\n    );\n};\n\nexport default memo(HeaderCellComp);\n"]},"metadata":{},"sourceType":"script"}