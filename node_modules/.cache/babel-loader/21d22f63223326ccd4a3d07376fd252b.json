{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport { DragAndDropService, DragSourceType, VerticalDirection } from \"../dragAndDrop/dragAndDropService\";\nimport { Autowired, Optional, PostConstruct } from \"../context/context\";\nimport { Events } from \"../eventKeys\";\nimport { RowHighlightPosition } from \"../entities/rowNode\";\nimport { last } from '../utils/array';\nimport { BeanStub } from \"../context/beanStub\";\nimport { missingOrEmpty } from \"../utils/generic\";\nimport { doOnce } from \"../utils/function\";\nimport { AutoScrollService } from \"../autoScrollService\";\n\nvar RowDragFeature =\n/** @class */\nfunction (_super) {\n  __extends(RowDragFeature, _super);\n\n  function RowDragFeature(eContainer) {\n    var _this = _super.call(this) || this;\n\n    _this.isMultiRowDrag = false;\n    _this.isGridSorted = false;\n    _this.isGridFiltered = false;\n    _this.isRowGroupActive = false;\n    _this.eContainer = eContainer;\n    return _this;\n  }\n\n  RowDragFeature.prototype.postConstruct = function () {\n    var _this = this;\n\n    if (this.gridOptionsWrapper.isRowModelDefault()) {\n      this.clientSideRowModel = this.rowModel;\n    }\n\n    var refreshStatus = function () {\n      _this.onSortChanged();\n\n      _this.onFilterChanged();\n\n      _this.onRowGroupChanged();\n    };\n\n    this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));\n    this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));\n    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onRowGroupChanged.bind(this));\n    this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, function () {\n      refreshStatus();\n    });\n    refreshStatus();\n    this.ctrlsService.whenReady(function () {\n      var gridBodyCon = _this.ctrlsService.getGridBodyCtrl();\n\n      _this.autoScrollService = new AutoScrollService({\n        scrollContainer: gridBodyCon.getBodyViewportElement(),\n        scrollAxis: 'y',\n        getVerticalPosition: function () {\n          return gridBodyCon.getScrollFeature().getVScrollPosition().top;\n        },\n        setVerticalPosition: function (position) {\n          return gridBodyCon.getScrollFeature().setVerticalScrollPosition(position);\n        },\n        onScrollCallback: function () {\n          _this.onDragging(_this.lastDraggingEvent);\n        }\n      });\n    });\n  };\n\n  RowDragFeature.prototype.onSortChanged = function () {\n    this.isGridSorted = this.sortController.isSortActive();\n  };\n\n  RowDragFeature.prototype.onFilterChanged = function () {\n    this.isGridFiltered = this.filterManager.isAnyFilterPresent();\n  };\n\n  RowDragFeature.prototype.onRowGroupChanged = function () {\n    var rowGroups = this.columnModel.getRowGroupColumns();\n    this.isRowGroupActive = !missingOrEmpty(rowGroups);\n  };\n\n  RowDragFeature.prototype.getContainer = function () {\n    return this.eContainer;\n  };\n\n  RowDragFeature.prototype.isInterestedIn = function (type) {\n    return type === DragSourceType.RowDrag;\n  };\n\n  RowDragFeature.prototype.getIconName = function () {\n    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n\n    if (managedDrag && this.shouldPreventRowMove()) {\n      return DragAndDropService.ICON_NOT_ALLOWED;\n    }\n\n    return DragAndDropService.ICON_MOVE;\n  };\n\n  RowDragFeature.prototype.shouldPreventRowMove = function () {\n    return this.isGridSorted || this.isGridFiltered || this.isRowGroupActive;\n  };\n\n  RowDragFeature.prototype.getRowNodes = function (draggingEvent) {\n    if (!this.isFromThisGrid(draggingEvent)) {\n      return draggingEvent.dragItem.rowNodes || [];\n    }\n\n    var isRowDragMultiRow = this.gridOptionsWrapper.isRowDragMultiRow();\n    var selectedNodes = this.selectionService.getSelectedNodes();\n    var currentNode = draggingEvent.dragItem.rowNode;\n\n    if (isRowDragMultiRow && selectedNodes.indexOf(currentNode) !== -1) {\n      this.isMultiRowDrag = true;\n      return __spreadArrays(selectedNodes);\n    }\n\n    this.isMultiRowDrag = false;\n    return [currentNode];\n  };\n\n  RowDragFeature.prototype.onDragEnter = function (draggingEvent) {\n    // when entering, we fire the enter event, then in onEnterOrDragging,\n    // we also fire the move event. so we get both events when entering.\n    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER, draggingEvent);\n    this.getRowNodes(draggingEvent).forEach(function (rowNode) {\n      rowNode.setDragging(true);\n    });\n    this.onEnterOrDragging(draggingEvent);\n  };\n\n  RowDragFeature.prototype.onDragging = function (draggingEvent) {\n    this.onEnterOrDragging(draggingEvent);\n  };\n\n  RowDragFeature.prototype.isFromThisGrid = function (draggingEvent) {\n    var dragSourceDomDataKey = draggingEvent.dragSource.dragSourceDomDataKey;\n    return dragSourceDomDataKey === this.gridOptionsWrapper.getDomDataKey();\n  };\n\n  RowDragFeature.prototype.isDropZoneWithinThisGrid = function (draggingEvent) {\n    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();\n    var gridGui = gridBodyCon.getGui();\n    var dropZoneTarget = draggingEvent.dropZoneTarget;\n    return !gridGui.contains(dropZoneTarget);\n  };\n\n  RowDragFeature.prototype.onEnterOrDragging = function (draggingEvent) {\n    // this event is fired for enter and move\n    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE, draggingEvent);\n    this.lastDraggingEvent = draggingEvent;\n    var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n\n    if (managedDrag) {\n      this.doManagedDrag(draggingEvent, pixel);\n    }\n\n    this.autoScrollService.check(draggingEvent.event);\n  };\n\n  RowDragFeature.prototype.doManagedDrag = function (draggingEvent, pixel) {\n    var _this = this;\n\n    var rowNodes;\n    var isFromThisGrid = this.isFromThisGrid(draggingEvent);\n\n    if (isFromThisGrid) {\n      rowNodes = [draggingEvent.dragItem.rowNode];\n\n      if (this.isMultiRowDrag) {\n        rowNodes = __spreadArrays(this.selectionService.getSelectedNodes()).sort(function (a, b) {\n          return _this.getRowIndexNumber(a) - _this.getRowIndexNumber(b);\n        });\n      }\n\n      draggingEvent.dragItem.rowNodes = rowNodes;\n    } else {\n      rowNodes = draggingEvent.dragItem.rowNodes;\n    }\n\n    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n\n    if (managedDrag && this.shouldPreventRowMove()) {\n      return;\n    }\n\n    if (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !isFromThisGrid) {\n      if (!this.isDropZoneWithinThisGrid(draggingEvent)) {\n        this.clientSideRowModel.highlightRowAtPixel(rowNodes[0], pixel);\n      }\n    } else {\n      this.moveRows(rowNodes, pixel);\n    }\n  };\n\n  RowDragFeature.prototype.getRowIndexNumber = function (rowNode) {\n    return parseInt(last(rowNode.getRowIndexString().split('-')), 10);\n  };\n\n  RowDragFeature.prototype.moveRowAndClearHighlight = function (draggingEvent) {\n    var _this = this;\n\n    var lastHighlightedRowNode = this.clientSideRowModel.getLastHighlightedRowNode();\n    var isBelow = lastHighlightedRowNode && lastHighlightedRowNode.highlighted === RowHighlightPosition.Below;\n    var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n    var rowNodes = draggingEvent.dragItem.rowNodes;\n    var increment = isBelow ? 1 : 0;\n\n    if (this.isFromThisGrid(draggingEvent)) {\n      rowNodes.forEach(function (rowNode) {\n        if (rowNode.rowTop < pixel) {\n          increment -= 1;\n        }\n      });\n      this.moveRows(rowNodes, pixel, increment);\n    } else {\n      var getRowNodeId_1 = this.gridOptionsWrapper.getRowNodeIdFunc();\n      var addIndex = this.clientSideRowModel.getRowIndexAtPixel(pixel) + 1;\n\n      if (this.clientSideRowModel.getHighlightPosition(pixel) === RowHighlightPosition.Above) {\n        addIndex--;\n      }\n\n      this.clientSideRowModel.updateRowData({\n        add: rowNodes.map(function (node) {\n          return node.data;\n        }).filter(function (data) {\n          return !_this.clientSideRowModel.getRowNode(getRowNodeId_1 ? getRowNodeId_1(data) : data.id);\n        }),\n        addIndex: addIndex\n      });\n    }\n\n    this.clearRowHighlight();\n  };\n\n  RowDragFeature.prototype.clearRowHighlight = function () {\n    this.clientSideRowModel.highlightRowAtPixel(null);\n  };\n\n  RowDragFeature.prototype.moveRows = function (rowNodes, pixel, increment) {\n    if (increment === void 0) {\n      increment = 0;\n    }\n\n    var rowWasMoved = this.clientSideRowModel.ensureRowsAtPixel(rowNodes, pixel, increment);\n\n    if (rowWasMoved) {\n      this.focusService.clearFocusedCell();\n\n      if (this.rangeService) {\n        this.rangeService.removeAllCellRanges();\n      }\n    }\n  };\n\n  RowDragFeature.prototype.addRowDropZone = function (params) {\n    var _this = this;\n\n    if (!params.getContainer()) {\n      doOnce(function () {\n        return console.warn('AG Grid: addRowDropZone - A container target needs to be provided');\n      }, 'add-drop-zone-empty-target');\n      return;\n    }\n\n    if (this.dragAndDropService.findExternalZone(params)) {\n      console.warn('AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.');\n      return;\n    }\n\n    var processedParams = {\n      getContainer: params.getContainer\n    };\n\n    if (params.fromGrid) {\n      params.fromGrid = undefined;\n      processedParams = params;\n    } else {\n      if (params.onDragEnter) {\n        processedParams.onDragEnter = function (e) {\n          params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));\n        };\n      }\n\n      if (params.onDragLeave) {\n        processedParams.onDragLeave = function (e) {\n          params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));\n        };\n      }\n\n      if (params.onDragging) {\n        processedParams.onDragging = function (e) {\n          params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));\n        };\n      }\n\n      if (params.onDragStop) {\n        processedParams.onDragStop = function (e) {\n          params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));\n        };\n      }\n    }\n\n    this.dragAndDropService.addDropTarget(__assign({\n      isInterestedIn: function (type) {\n        return type === DragSourceType.RowDrag;\n      },\n      getIconName: function () {\n        return DragAndDropService.ICON_MOVE;\n      },\n      external: true\n    }, processedParams));\n  };\n\n  RowDragFeature.prototype.getRowDropZone = function (events) {\n    var _this = this;\n\n    var getContainer = this.getContainer.bind(this);\n    var onDragEnter = this.onDragEnter.bind(this);\n    var onDragLeave = this.onDragLeave.bind(this);\n    var onDragging = this.onDragging.bind(this);\n    var onDragStop = this.onDragStop.bind(this);\n\n    if (!events) {\n      return {\n        getContainer: getContainer,\n        onDragEnter: onDragEnter,\n        onDragLeave: onDragLeave,\n        onDragging: onDragging,\n        onDragStop: onDragStop,\n\n        /* @private */\n        fromGrid: true\n      };\n    }\n\n    return {\n      getContainer: getContainer,\n      onDragEnter: events.onDragEnter ? function (e) {\n        onDragEnter(e);\n        events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));\n      } : onDragEnter,\n      onDragLeave: events.onDragLeave ? function (e) {\n        onDragLeave(e);\n        events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));\n      } : onDragLeave,\n      onDragging: events.onDragging ? function (e) {\n        onDragging(e);\n        events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));\n      } : onDragging,\n      onDragStop: events.onDragStop ? function (e) {\n        onDragStop(e);\n        events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));\n      } : onDragStop,\n      fromGrid: true\n      /* @private */\n\n    };\n  };\n\n  RowDragFeature.prototype.draggingToRowDragEvent = function (type, draggingEvent) {\n    var yNormalised = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n    var mouseIsPastLastRow = yNormalised > this.paginationProxy.getCurrentPageHeight();\n    var overIndex = -1;\n    var overNode;\n\n    if (!mouseIsPastLastRow) {\n      overIndex = this.rowModel.getRowIndexAtPixel(yNormalised);\n      overNode = this.rowModel.getRow(overIndex);\n    }\n\n    var vDirectionString;\n\n    switch (draggingEvent.vDirection) {\n      case VerticalDirection.Down:\n        vDirectionString = 'down';\n        break;\n\n      case VerticalDirection.Up:\n        vDirectionString = 'up';\n        break;\n\n      default:\n        vDirectionString = null;\n        break;\n    }\n\n    var event = {\n      type: type,\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi(),\n      event: draggingEvent.event,\n      node: draggingEvent.dragItem.rowNode,\n      nodes: draggingEvent.dragItem.rowNodes,\n      overIndex: overIndex,\n      overNode: overNode,\n      y: yNormalised,\n      vDirection: vDirectionString\n    };\n    return event;\n  };\n\n  RowDragFeature.prototype.dispatchGridEvent = function (type, draggingEvent) {\n    var event = this.draggingToRowDragEvent(type, draggingEvent);\n    this.eventService.dispatchEvent(event);\n  };\n\n  RowDragFeature.prototype.onDragLeave = function (draggingEvent) {\n    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE, draggingEvent);\n    this.stopDragging(draggingEvent);\n\n    if (this.gridOptionsWrapper.isRowDragManaged()) {\n      this.clearRowHighlight();\n    }\n\n    if (this.isFromThisGrid(draggingEvent)) {\n      this.isMultiRowDrag = false;\n    }\n  };\n\n  RowDragFeature.prototype.onDragStop = function (draggingEvent) {\n    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END, draggingEvent);\n    this.stopDragging(draggingEvent);\n\n    if (this.gridOptionsWrapper.isRowDragManaged() && (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !this.isFromThisGrid(draggingEvent)) && !this.isDropZoneWithinThisGrid(draggingEvent)) {\n      this.moveRowAndClearHighlight(draggingEvent);\n    }\n  };\n\n  RowDragFeature.prototype.stopDragging = function (draggingEvent) {\n    this.autoScrollService.ensureCleared();\n    this.getRowNodes(draggingEvent).forEach(function (rowNode) {\n      rowNode.setDragging(false);\n    });\n  };\n\n  __decorate([Autowired('dragAndDropService')], RowDragFeature.prototype, \"dragAndDropService\", void 0);\n\n  __decorate([Autowired('rowModel')], RowDragFeature.prototype, \"rowModel\", void 0);\n\n  __decorate([Autowired('paginationProxy')], RowDragFeature.prototype, \"paginationProxy\", void 0);\n\n  __decorate([Autowired('columnModel')], RowDragFeature.prototype, \"columnModel\", void 0);\n\n  __decorate([Autowired('focusService')], RowDragFeature.prototype, \"focusService\", void 0);\n\n  __decorate([Autowired('sortController')], RowDragFeature.prototype, \"sortController\", void 0);\n\n  __decorate([Autowired('filterManager')], RowDragFeature.prototype, \"filterManager\", void 0);\n\n  __decorate([Autowired('selectionService')], RowDragFeature.prototype, \"selectionService\", void 0);\n\n  __decorate([Autowired('mouseEventService')], RowDragFeature.prototype, \"mouseEventService\", void 0);\n\n  __decorate([Autowired('ctrlsService')], RowDragFeature.prototype, \"ctrlsService\", void 0);\n\n  __decorate([Optional('rangeService')], RowDragFeature.prototype, \"rangeService\", void 0);\n\n  __decorate([PostConstruct], RowDragFeature.prototype, \"postConstruct\", null);\n\n  return RowDragFeature;\n}(BeanStub);\n\nexport { RowDragFeature };","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/core/dist/es6/gridBodyComp/rowDragFeature.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__spreadArrays","il","k","a","j","jl","DragAndDropService","DragSourceType","VerticalDirection","Autowired","Optional","PostConstruct","Events","RowHighlightPosition","last","BeanStub","missingOrEmpty","doOnce","AutoScrollService","RowDragFeature","_super","eContainer","_this","isMultiRowDrag","isGridSorted","isGridFiltered","isRowGroupActive","postConstruct","gridOptionsWrapper","isRowModelDefault","clientSideRowModel","rowModel","refreshStatus","onSortChanged","onFilterChanged","onRowGroupChanged","addManagedListener","eventService","EVENT_SORT_CHANGED","bind","EVENT_FILTER_CHANGED","EVENT_COLUMN_ROW_GROUP_CHANGED","EVENT_MODEL_UPDATED","ctrlsService","whenReady","gridBodyCon","getGridBodyCtrl","autoScrollService","scrollContainer","getBodyViewportElement","scrollAxis","getVerticalPosition","getScrollFeature","getVScrollPosition","top","setVerticalPosition","position","setVerticalScrollPosition","onScrollCallback","onDragging","lastDraggingEvent","sortController","isSortActive","filterManager","isAnyFilterPresent","rowGroups","columnModel","getRowGroupColumns","getContainer","isInterestedIn","type","RowDrag","getIconName","managedDrag","isRowDragManaged","shouldPreventRowMove","ICON_NOT_ALLOWED","ICON_MOVE","getRowNodes","draggingEvent","isFromThisGrid","dragItem","rowNodes","isRowDragMultiRow","selectedNodes","selectionService","getSelectedNodes","currentNode","rowNode","indexOf","onDragEnter","dispatchGridEvent","EVENT_ROW_DRAG_ENTER","forEach","setDragging","onEnterOrDragging","dragSourceDomDataKey","dragSource","getDomDataKey","isDropZoneWithinThisGrid","gridGui","getGui","dropZoneTarget","contains","EVENT_ROW_DRAG_MOVE","pixel","mouseEventService","getNormalisedPosition","y","doManagedDrag","check","event","sort","getRowIndexNumber","isSuppressMoveWhenRowDragging","highlightRowAtPixel","moveRows","parseInt","getRowIndexString","split","moveRowAndClearHighlight","lastHighlightedRowNode","getLastHighlightedRowNode","isBelow","highlighted","Below","increment","rowTop","getRowNodeId_1","getRowNodeIdFunc","addIndex","getRowIndexAtPixel","getHighlightPosition","Above","updateRowData","add","map","node","data","filter","getRowNode","id","clearRowHighlight","rowWasMoved","ensureRowsAtPixel","focusService","clearFocusedCell","rangeService","removeAllCellRanges","addRowDropZone","params","console","warn","dragAndDropService","findExternalZone","processedParams","fromGrid","undefined","e","draggingToRowDragEvent","onDragLeave","EVENT_ROW_DRAG_LEAVE","onDragStop","EVENT_ROW_DRAG_END","addDropTarget","external","getRowDropZone","events","yNormalised","mouseIsPastLastRow","paginationProxy","getCurrentPageHeight","overIndex","overNode","getRow","vDirectionString","vDirection","Down","Up","api","getApi","columnApi","getColumnApi","nodes","dispatchEvent","stopDragging","ensureCleared"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { DragAndDropService, DragSourceType, VerticalDirection } from \"../dragAndDrop/dragAndDropService\";\nimport { Autowired, Optional, PostConstruct } from \"../context/context\";\nimport { Events } from \"../eventKeys\";\nimport { RowHighlightPosition } from \"../entities/rowNode\";\nimport { last } from '../utils/array';\nimport { BeanStub } from \"../context/beanStub\";\nimport { missingOrEmpty } from \"../utils/generic\";\nimport { doOnce } from \"../utils/function\";\nimport { AutoScrollService } from \"../autoScrollService\";\nvar RowDragFeature = /** @class */ (function (_super) {\n    __extends(RowDragFeature, _super);\n    function RowDragFeature(eContainer) {\n        var _this = _super.call(this) || this;\n        _this.isMultiRowDrag = false;\n        _this.isGridSorted = false;\n        _this.isGridFiltered = false;\n        _this.isRowGroupActive = false;\n        _this.eContainer = eContainer;\n        return _this;\n    }\n    RowDragFeature.prototype.postConstruct = function () {\n        var _this = this;\n        if (this.gridOptionsWrapper.isRowModelDefault()) {\n            this.clientSideRowModel = this.rowModel;\n        }\n        var refreshStatus = function () {\n            _this.onSortChanged();\n            _this.onFilterChanged();\n            _this.onRowGroupChanged();\n        };\n        this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));\n        this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));\n        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onRowGroupChanged.bind(this));\n        this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, function () {\n            refreshStatus();\n        });\n        refreshStatus();\n        this.ctrlsService.whenReady(function () {\n            var gridBodyCon = _this.ctrlsService.getGridBodyCtrl();\n            _this.autoScrollService = new AutoScrollService({\n                scrollContainer: gridBodyCon.getBodyViewportElement(),\n                scrollAxis: 'y',\n                getVerticalPosition: function () { return gridBodyCon.getScrollFeature().getVScrollPosition().top; },\n                setVerticalPosition: function (position) { return gridBodyCon.getScrollFeature().setVerticalScrollPosition(position); },\n                onScrollCallback: function () { _this.onDragging(_this.lastDraggingEvent); }\n            });\n        });\n    };\n    RowDragFeature.prototype.onSortChanged = function () {\n        this.isGridSorted = this.sortController.isSortActive();\n    };\n    RowDragFeature.prototype.onFilterChanged = function () {\n        this.isGridFiltered = this.filterManager.isAnyFilterPresent();\n    };\n    RowDragFeature.prototype.onRowGroupChanged = function () {\n        var rowGroups = this.columnModel.getRowGroupColumns();\n        this.isRowGroupActive = !missingOrEmpty(rowGroups);\n    };\n    RowDragFeature.prototype.getContainer = function () {\n        return this.eContainer;\n    };\n    RowDragFeature.prototype.isInterestedIn = function (type) {\n        return type === DragSourceType.RowDrag;\n    };\n    RowDragFeature.prototype.getIconName = function () {\n        var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n        if (managedDrag && this.shouldPreventRowMove()) {\n            return DragAndDropService.ICON_NOT_ALLOWED;\n        }\n        return DragAndDropService.ICON_MOVE;\n    };\n    RowDragFeature.prototype.shouldPreventRowMove = function () {\n        return this.isGridSorted || this.isGridFiltered || this.isRowGroupActive;\n    };\n    RowDragFeature.prototype.getRowNodes = function (draggingEvent) {\n        if (!this.isFromThisGrid(draggingEvent)) {\n            return draggingEvent.dragItem.rowNodes || [];\n        }\n        var isRowDragMultiRow = this.gridOptionsWrapper.isRowDragMultiRow();\n        var selectedNodes = this.selectionService.getSelectedNodes();\n        var currentNode = draggingEvent.dragItem.rowNode;\n        if (isRowDragMultiRow && selectedNodes.indexOf(currentNode) !== -1) {\n            this.isMultiRowDrag = true;\n            return __spreadArrays(selectedNodes);\n        }\n        this.isMultiRowDrag = false;\n        return [currentNode];\n    };\n    RowDragFeature.prototype.onDragEnter = function (draggingEvent) {\n        // when entering, we fire the enter event, then in onEnterOrDragging,\n        // we also fire the move event. so we get both events when entering.\n        this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER, draggingEvent);\n        this.getRowNodes(draggingEvent).forEach(function (rowNode) {\n            rowNode.setDragging(true);\n        });\n        this.onEnterOrDragging(draggingEvent);\n    };\n    RowDragFeature.prototype.onDragging = function (draggingEvent) {\n        this.onEnterOrDragging(draggingEvent);\n    };\n    RowDragFeature.prototype.isFromThisGrid = function (draggingEvent) {\n        var dragSourceDomDataKey = draggingEvent.dragSource.dragSourceDomDataKey;\n        return dragSourceDomDataKey === this.gridOptionsWrapper.getDomDataKey();\n    };\n    RowDragFeature.prototype.isDropZoneWithinThisGrid = function (draggingEvent) {\n        var gridBodyCon = this.ctrlsService.getGridBodyCtrl();\n        var gridGui = gridBodyCon.getGui();\n        var dropZoneTarget = draggingEvent.dropZoneTarget;\n        return !gridGui.contains(dropZoneTarget);\n    };\n    RowDragFeature.prototype.onEnterOrDragging = function (draggingEvent) {\n        // this event is fired for enter and move\n        this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE, draggingEvent);\n        this.lastDraggingEvent = draggingEvent;\n        var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n        var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n        if (managedDrag) {\n            this.doManagedDrag(draggingEvent, pixel);\n        }\n        this.autoScrollService.check(draggingEvent.event);\n    };\n    RowDragFeature.prototype.doManagedDrag = function (draggingEvent, pixel) {\n        var _this = this;\n        var rowNodes;\n        var isFromThisGrid = this.isFromThisGrid(draggingEvent);\n        if (isFromThisGrid) {\n            rowNodes = [draggingEvent.dragItem.rowNode];\n            if (this.isMultiRowDrag) {\n                rowNodes = __spreadArrays(this.selectionService.getSelectedNodes()).sort(function (a, b) { return _this.getRowIndexNumber(a) - _this.getRowIndexNumber(b); });\n            }\n            draggingEvent.dragItem.rowNodes = rowNodes;\n        }\n        else {\n            rowNodes = draggingEvent.dragItem.rowNodes;\n        }\n        var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n        if (managedDrag && this.shouldPreventRowMove()) {\n            return;\n        }\n        if (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !isFromThisGrid) {\n            if (!this.isDropZoneWithinThisGrid(draggingEvent)) {\n                this.clientSideRowModel.highlightRowAtPixel(rowNodes[0], pixel);\n            }\n        }\n        else {\n            this.moveRows(rowNodes, pixel);\n        }\n    };\n    RowDragFeature.prototype.getRowIndexNumber = function (rowNode) {\n        return parseInt(last(rowNode.getRowIndexString().split('-')), 10);\n    };\n    RowDragFeature.prototype.moveRowAndClearHighlight = function (draggingEvent) {\n        var _this = this;\n        var lastHighlightedRowNode = this.clientSideRowModel.getLastHighlightedRowNode();\n        var isBelow = lastHighlightedRowNode && lastHighlightedRowNode.highlighted === RowHighlightPosition.Below;\n        var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n        var rowNodes = draggingEvent.dragItem.rowNodes;\n        var increment = isBelow ? 1 : 0;\n        if (this.isFromThisGrid(draggingEvent)) {\n            rowNodes.forEach(function (rowNode) {\n                if (rowNode.rowTop < pixel) {\n                    increment -= 1;\n                }\n            });\n            this.moveRows(rowNodes, pixel, increment);\n        }\n        else {\n            var getRowNodeId_1 = this.gridOptionsWrapper.getRowNodeIdFunc();\n            var addIndex = this.clientSideRowModel.getRowIndexAtPixel(pixel) + 1;\n            if (this.clientSideRowModel.getHighlightPosition(pixel) === RowHighlightPosition.Above) {\n                addIndex--;\n            }\n            this.clientSideRowModel.updateRowData({\n                add: rowNodes\n                    .map(function (node) { return node.data; })\n                    .filter(function (data) { return !_this.clientSideRowModel.getRowNode(getRowNodeId_1 ? getRowNodeId_1(data) : data.id); }),\n                addIndex: addIndex\n            });\n        }\n        this.clearRowHighlight();\n    };\n    RowDragFeature.prototype.clearRowHighlight = function () {\n        this.clientSideRowModel.highlightRowAtPixel(null);\n    };\n    RowDragFeature.prototype.moveRows = function (rowNodes, pixel, increment) {\n        if (increment === void 0) { increment = 0; }\n        var rowWasMoved = this.clientSideRowModel.ensureRowsAtPixel(rowNodes, pixel, increment);\n        if (rowWasMoved) {\n            this.focusService.clearFocusedCell();\n            if (this.rangeService) {\n                this.rangeService.removeAllCellRanges();\n            }\n        }\n    };\n    RowDragFeature.prototype.addRowDropZone = function (params) {\n        var _this = this;\n        if (!params.getContainer()) {\n            doOnce(function () { return console.warn('AG Grid: addRowDropZone - A container target needs to be provided'); }, 'add-drop-zone-empty-target');\n            return;\n        }\n        if (this.dragAndDropService.findExternalZone(params)) {\n            console.warn('AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.');\n            return;\n        }\n        var processedParams = {\n            getContainer: params.getContainer\n        };\n        if (params.fromGrid) {\n            params.fromGrid = undefined;\n            processedParams = params;\n        }\n        else {\n            if (params.onDragEnter) {\n                processedParams.onDragEnter = function (e) {\n                    params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));\n                };\n            }\n            if (params.onDragLeave) {\n                processedParams.onDragLeave = function (e) {\n                    params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));\n                };\n            }\n            if (params.onDragging) {\n                processedParams.onDragging = function (e) {\n                    params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));\n                };\n            }\n            if (params.onDragStop) {\n                processedParams.onDragStop = function (e) {\n                    params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));\n                };\n            }\n        }\n        this.dragAndDropService.addDropTarget(__assign({ isInterestedIn: function (type) { return type === DragSourceType.RowDrag; }, getIconName: function () { return DragAndDropService.ICON_MOVE; }, external: true }, processedParams));\n    };\n    RowDragFeature.prototype.getRowDropZone = function (events) {\n        var _this = this;\n        var getContainer = this.getContainer.bind(this);\n        var onDragEnter = this.onDragEnter.bind(this);\n        var onDragLeave = this.onDragLeave.bind(this);\n        var onDragging = this.onDragging.bind(this);\n        var onDragStop = this.onDragStop.bind(this);\n        if (!events) {\n            return { getContainer: getContainer, onDragEnter: onDragEnter, onDragLeave: onDragLeave, onDragging: onDragging, onDragStop: onDragStop, /* @private */ fromGrid: true };\n        }\n        return {\n            getContainer: getContainer,\n            onDragEnter: events.onDragEnter\n                ? (function (e) {\n                    onDragEnter(e);\n                    events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));\n                })\n                : onDragEnter,\n            onDragLeave: events.onDragLeave\n                ? (function (e) {\n                    onDragLeave(e);\n                    events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));\n                })\n                : onDragLeave,\n            onDragging: events.onDragging\n                ? (function (e) {\n                    onDragging(e);\n                    events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));\n                })\n                : onDragging,\n            onDragStop: events.onDragStop\n                ? (function (e) {\n                    onDragStop(e);\n                    events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));\n                })\n                : onDragStop,\n            fromGrid: true /* @private */\n        };\n    };\n    RowDragFeature.prototype.draggingToRowDragEvent = function (type, draggingEvent) {\n        var yNormalised = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n        var mouseIsPastLastRow = yNormalised > this.paginationProxy.getCurrentPageHeight();\n        var overIndex = -1;\n        var overNode;\n        if (!mouseIsPastLastRow) {\n            overIndex = this.rowModel.getRowIndexAtPixel(yNormalised);\n            overNode = this.rowModel.getRow(overIndex);\n        }\n        var vDirectionString;\n        switch (draggingEvent.vDirection) {\n            case VerticalDirection.Down:\n                vDirectionString = 'down';\n                break;\n            case VerticalDirection.Up:\n                vDirectionString = 'up';\n                break;\n            default:\n                vDirectionString = null;\n                break;\n        }\n        var event = {\n            type: type,\n            api: this.gridOptionsWrapper.getApi(),\n            columnApi: this.gridOptionsWrapper.getColumnApi(),\n            event: draggingEvent.event,\n            node: draggingEvent.dragItem.rowNode,\n            nodes: draggingEvent.dragItem.rowNodes,\n            overIndex: overIndex,\n            overNode: overNode,\n            y: yNormalised,\n            vDirection: vDirectionString\n        };\n        return event;\n    };\n    RowDragFeature.prototype.dispatchGridEvent = function (type, draggingEvent) {\n        var event = this.draggingToRowDragEvent(type, draggingEvent);\n        this.eventService.dispatchEvent(event);\n    };\n    RowDragFeature.prototype.onDragLeave = function (draggingEvent) {\n        this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE, draggingEvent);\n        this.stopDragging(draggingEvent);\n        if (this.gridOptionsWrapper.isRowDragManaged()) {\n            this.clearRowHighlight();\n        }\n        if (this.isFromThisGrid(draggingEvent)) {\n            this.isMultiRowDrag = false;\n        }\n    };\n    RowDragFeature.prototype.onDragStop = function (draggingEvent) {\n        this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END, draggingEvent);\n        this.stopDragging(draggingEvent);\n        if (this.gridOptionsWrapper.isRowDragManaged() &&\n            (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !this.isFromThisGrid(draggingEvent)) &&\n            !this.isDropZoneWithinThisGrid(draggingEvent)) {\n            this.moveRowAndClearHighlight(draggingEvent);\n        }\n    };\n    RowDragFeature.prototype.stopDragging = function (draggingEvent) {\n        this.autoScrollService.ensureCleared();\n        this.getRowNodes(draggingEvent).forEach(function (rowNode) {\n            rowNode.setDragging(false);\n        });\n    };\n    __decorate([\n        Autowired('dragAndDropService')\n    ], RowDragFeature.prototype, \"dragAndDropService\", void 0);\n    __decorate([\n        Autowired('rowModel')\n    ], RowDragFeature.prototype, \"rowModel\", void 0);\n    __decorate([\n        Autowired('paginationProxy')\n    ], RowDragFeature.prototype, \"paginationProxy\", void 0);\n    __decorate([\n        Autowired('columnModel')\n    ], RowDragFeature.prototype, \"columnModel\", void 0);\n    __decorate([\n        Autowired('focusService')\n    ], RowDragFeature.prototype, \"focusService\", void 0);\n    __decorate([\n        Autowired('sortController')\n    ], RowDragFeature.prototype, \"sortController\", void 0);\n    __decorate([\n        Autowired('filterManager')\n    ], RowDragFeature.prototype, \"filterManager\", void 0);\n    __decorate([\n        Autowired('selectionService')\n    ], RowDragFeature.prototype, \"selectionService\", void 0);\n    __decorate([\n        Autowired('mouseEventService')\n    ], RowDragFeature.prototype, \"mouseEventService\", void 0);\n    __decorate([\n        Autowired('ctrlsService')\n    ], RowDragFeature.prototype, \"ctrlsService\", void 0);\n    __decorate([\n        Optional('rangeService')\n    ], RowDragFeature.prototype, \"rangeService\", void 0);\n    __decorate([\n        PostConstruct\n    ], RowDragFeature.prototype, \"postConstruct\", null);\n    return RowDragFeature;\n}(BeanStub));\nexport { RowDragFeature };\n"]},"metadata":{},"sourceType":"module"}