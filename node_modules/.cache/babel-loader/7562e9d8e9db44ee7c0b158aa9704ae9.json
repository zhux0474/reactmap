{"ast":null,"code":"// @ag-grid-community/react v26.2.0\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar beansContext_1 = require(\"../beansContext\");\n\nvar core_1 = require(\"@ag-grid-community/core\");\n\nvar utils_1 = require(\"../utils\");\n\nvar jsComp_1 = require(\"../jsComp\");\n\nvar HeaderFilterCellComp = function (props) {\n  var context = react_1.useContext(beansContext_1.BeansContext).context;\n\n  var _a = react_1.useState(new utils_1.CssClasses()),\n      cssClasses = _a[0],\n      setCssClasses = _a[1];\n\n  var _b = react_1.useState(new utils_1.CssClasses()),\n      cssBodyClasses = _b[0],\n      setBodyCssClasses = _b[1];\n\n  var _c = react_1.useState(new utils_1.CssClasses()),\n      cssButtonWrapperClasses = _c[0],\n      setButtonWrapperCssClasses = _c[1];\n\n  var _d = react_1.useState(),\n      width = _d[0],\n      setWidth = _d[1];\n\n  var _e = react_1.useState(),\n      userCompDetails = _e[0],\n      setUserCompDetails = _e[1];\n\n  var eGui = react_1.useRef(null);\n  var eFloatingFilterBody = react_1.useRef(null);\n  var eButtonWrapper = react_1.useRef(null);\n  var eButtonShowMainFilter = react_1.useRef(null);\n  var userCompRef = react_1.useRef();\n  var ctrl = props.ctrl;\n  react_1.useEffect(function () {\n    var compProxy = {\n      addOrRemoveCssClass: function (name, on) {\n        return setCssClasses(function (prev) {\n          return prev.setClass(name, on);\n        });\n      },\n      addOrRemoveBodyCssClass: function (name, on) {\n        return setBodyCssClasses(function (prev) {\n          return prev.setClass(name, on);\n        });\n      },\n      addOrRemoveButtonWrapperCssClass: function (name, on) {\n        return setButtonWrapperCssClasses(function (prev) {\n          return prev.setClass(name, on);\n        });\n      },\n      setWidth: function (width) {\n        return setWidth(width);\n      },\n      setCompDetails: function (compDetails) {\n        return setUserCompDetails(compDetails);\n      },\n      getFloatingFilterComp: function () {\n        return userCompRef.current ? core_1.AgPromise.resolve(userCompRef.current) : null;\n      },\n      setMenuIcon: function (eIcon) {\n        return eButtonShowMainFilter.current.appendChild(eIcon);\n      }\n    };\n    ctrl.setComp(compProxy, eGui.current, eButtonShowMainFilter.current, eFloatingFilterBody.current);\n  }, []); // js comps\n\n  react_1.useEffect(function () {\n    return jsComp_1.showJsComp(userCompDetails, context, eFloatingFilterBody.current, userCompRef);\n  }, [userCompDetails]);\n  var style = react_1.useMemo(function () {\n    return {\n      width: width\n    };\n  }, [width]);\n  var className = react_1.useMemo(function () {\n    return 'ag-header-cell ag-floating-filter ' + cssClasses.toString();\n  }, [cssClasses]);\n  var bodyClassName = react_1.useMemo(function () {\n    return cssBodyClasses.toString();\n  }, [cssBodyClasses]);\n  var buttonWrapperClassName = react_1.useMemo(function () {\n    return 'ag-floating-filter-button ' + cssButtonWrapperClasses.toString();\n  }, [cssBodyClasses]);\n  var userCompStateless = react_1.useMemo(function () {\n    var res = userCompDetails && userCompDetails.componentFromFramework && utils_1.isComponentStateless(userCompDetails.componentClass);\n    return !!res;\n  }, [userCompDetails]);\n  var reactUserComp = userCompDetails && userCompDetails.componentFromFramework;\n  var UserCompClass = userCompDetails && userCompDetails.componentClass;\n  return react_1.default.createElement(\"div\", {\n    ref: eGui,\n    className: className,\n    style: style,\n    role: \"gridcell\",\n    tabIndex: -1\n  }, react_1.default.createElement(\"div\", {\n    ref: eFloatingFilterBody,\n    className: bodyClassName,\n    role: \"presentation\"\n  }, reactUserComp && userCompStateless && react_1.default.createElement(UserCompClass, __assign({}, userCompDetails.params)), reactUserComp && !userCompStateless && react_1.default.createElement(UserCompClass, __assign({}, userCompDetails.params, {\n    ref: userCompRef\n  }))), react_1.default.createElement(\"div\", {\n    ref: eButtonWrapper,\n    className: buttonWrapperClassName,\n    role: \"presentation\"\n  }, react_1.default.createElement(\"button\", {\n    ref: eButtonShowMainFilter,\n    type: \"button\",\n    \"aria-label\": \"Open Filter Menu\",\n    className: \"ag-floating-filter-button-button\",\n    tabIndex: -1\n  })));\n};\n\nexports.default = react_1.memo(HeaderFilterCellComp);","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/react/lib/reactUi/header/reactUi/header/headerFilterCellComp.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { memo, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { BeansContext } from '../beansContext';\nimport { AgPromise, ColumnSortState, HeaderFilterCellCtrl, IFloatingFilter, IHeader, IHeaderFilterCellComp, UserCompDetails } from '@ag-grid-community/core';\nimport { CssClasses, isComponentStateless } from '../utils';\nimport { showJsComp } from '../jsComp';\n\nconst HeaderFilterCellComp = (props: {ctrl: HeaderFilterCellCtrl}) => {\n\n    const {context} = useContext(BeansContext);\n\n    const [cssClasses, setCssClasses] = useState<CssClasses>(new CssClasses());\n    const [cssBodyClasses, setBodyCssClasses] = useState<CssClasses>(new CssClasses());\n    const [cssButtonWrapperClasses, setButtonWrapperCssClasses] = useState<CssClasses>(new CssClasses());\n    const [width, setWidth] = useState<string>();\n    const [userCompDetails, setUserCompDetails] = useState<UserCompDetails>();\n\n    const eGui = useRef<HTMLDivElement>(null);\n    const eFloatingFilterBody = useRef<HTMLDivElement>(null);\n    const eButtonWrapper = useRef<HTMLDivElement>(null);\n    const eButtonShowMainFilter = useRef<HTMLButtonElement>(null);\n    const userCompRef = useRef<IFloatingFilter>();\n\n    const { ctrl } = props;\n\n    useEffect(() => {\n\n        const compProxy: IHeaderFilterCellComp = {\n            addOrRemoveCssClass: (name, on) => setCssClasses(prev => prev.setClass(name, on)),\n            addOrRemoveBodyCssClass: (name, on) => setBodyCssClasses(prev => prev.setClass(name, on)),\n            addOrRemoveButtonWrapperCssClass: (name, on) => setButtonWrapperCssClasses(prev => prev.setClass(name, on)),\n            setWidth: width => setWidth(width),\n            setCompDetails: compDetails => setUserCompDetails(compDetails),\n            getFloatingFilterComp: ()=> userCompRef.current ? AgPromise.resolve(userCompRef.current) : null,\n            setMenuIcon: eIcon => eButtonShowMainFilter.current!.appendChild(eIcon)\n        };\n\n        ctrl.setComp(compProxy, eGui.current!, eButtonShowMainFilter.current!, eFloatingFilterBody.current!);\n\n    }, []);\n\n    // js comps\n    useEffect(() => {\n        return showJsComp(userCompDetails, context, eFloatingFilterBody.current!, userCompRef);\n    }, [userCompDetails]);\n\n    const style = useMemo( ()=> ({\n        width: width\n    }), [width]);\n    \n    const className = useMemo( ()=> 'ag-header-cell ag-floating-filter ' + cssClasses.toString(), [cssClasses] );\n    const bodyClassName = useMemo( ()=> cssBodyClasses.toString(), [cssBodyClasses] );\n    const buttonWrapperClassName = useMemo( ()=> 'ag-floating-filter-button ' + cssButtonWrapperClasses.toString(), [cssBodyClasses] );\n\n    const userCompStateless = useMemo( ()=> {\n        const res = userCompDetails \n                    && userCompDetails.componentFromFramework \n                    && isComponentStateless(userCompDetails.componentClass);\n        return !!res;\n    }, [userCompDetails]);\n\n    const reactUserComp = userCompDetails && userCompDetails.componentFromFramework;\n    const UserCompClass = userCompDetails && userCompDetails.componentClass;\n\n    return (\n        <div ref={eGui} className={className} style={style} role=\"gridcell\" tabIndex={-1}>\n            <div ref={eFloatingFilterBody} className={bodyClassName} role=\"presentation\">\n                { reactUserComp && userCompStateless && <UserCompClass { ...userCompDetails!.params } /> }\n                { reactUserComp && !userCompStateless && <UserCompClass { ...userCompDetails!.params } ref={ userCompRef }/> }\n            </div>\n            <div ref={eButtonWrapper} className={buttonWrapperClassName} role=\"presentation\">\n                <button ref={eButtonShowMainFilter} type=\"button\" aria-label=\"Open Filter Menu\" className=\"ag-floating-filter-button-button\" tabIndex={-1}></button>\n            </div>\n        </div>\n    );\n};\n\nexport default memo(HeaderFilterCellComp);"]},"metadata":{},"sourceType":"script"}