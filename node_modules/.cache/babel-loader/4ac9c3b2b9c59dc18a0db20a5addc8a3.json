{"ast":null,"code":"var _jsxFileName = \"/Users/rongxuan/Desktop/reactmap/reactmap/src/components/SmokerMap.js\";\nimport React from \"react\";\nimport { fromLonLat, get } from \"ol/proj\"; //import \"./SmokerMap.css\";\n\nimport Map from \"ol/Map\"; //import Feature from \"ol/Feature\";\n\nimport View from \"ol/View\"; //import { Point, Style, Circle, Fill, Feature } from \"ol\";\n\nimport TileLayer from \"ol/layer/Tile\"; //import TileWMS from 'ol/source/TileWMS';\n\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\nimport GeoJSON from 'ol/format/GeoJSON';\nimport OSM from \"ol/source/OSM\";\nimport { Fill, Stroke, Style } from 'ol/style'; //import cityboundary from \"./Minneapolis_Police_Precincts.geojson\";\n\nimport ImageWMS from 'ol/source/ImageWMS';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class SmokerMap extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(this.props);\n    this.mapRef = /*#__PURE__*/React.createRef();\n    this.legendRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    var basemap = new TileLayer({\n      source: new OSM()\n    });\n    const wmsSource = new ImageWMS({\n      url: 'https://ahocevar.com/geoserver/wms',\n      params: {\n        'LAYERS': 'topp:states'\n      },\n      target: \"maplegend\",\n      ratio: 1,\n      serverType: 'geoserver'\n    });\n\n    const updateLegend = function (resolution) {\n      const graphicUrl = wmsSource.getLegendUrl(resolution); //const img = document.getElementById('legend');\n      //const img.src = graphicUrl;\n    };\n\n    const resolution = this.map.getView().getResolution();\n    updateLegend(resolution);\n    this.map.getView().on('change:resolution', function (event) {\n      const resolution = event.target.getResolution();\n      updateLegend(resolution);\n    });\n    /*\n    var vectorstyle = new Style({\n      fill: new Fill({\n        color: '#eeeeee'\n      }),\n      stroke: new Stroke({\n        color:'black',\n        width:1\n      })\n    })*/\n\n    var totalsmoker = new VectorSource({\n      url: \"https://smartcommunityhealth.ahc.umn.edu/lung_cancer/wms?service=WMS&version=1.1.0&request=GetMap&layers=lung_cancer%3Atotal_smokers_v2&bbox=-97.239209%2C43.499383499%2C-89.4917389999999%2C49.3843580000001&width=768&height=583&srs=EPSG%3A4326&format=geojson\",\n      format: new GeoJSON()\n    });\n\n    var stylefunction = function (feature) {\n      var style;\n      var value = feature.get('brffs_smokers');\n      console.log(value); //var color= value <100 ? '#ffffff': value <200 ? '#ff3f3f' : '#3f0000';\n      //this.style.getFill().setColor(color);\n\n      if (feature.get('brffs_smokers') > '400') {\n        style = new Style({\n          fill: new Fill({\n            color: '#eeeeee'\n          }),\n          stroke: new Stroke({\n            color: 'black',\n            width: 1\n          })\n        });\n      } else style = new Style({\n        fill: new Fill({\n          color: '#B4DFB4'\n        }),\n        stroke: new Stroke({\n          color: 'black',\n          width: 1\n        })\n      });\n\n      return style;\n    };\n\n    var vectorlayer = new VectorLayer({\n      source: totalsmoker,\n      style: stylefunction,\n      showLegend: true\n    });\n    /*  \n    var lungdata = new TileLayer({\n     source : new TileWMS ({\n       url:'https://smartcommunityhealth.ahc.umn.edu/lung_cancer/wms',\n       serverType:'geoserver',\n       params: {'LAYERS': 'lung_cancer:total_smokers_v2', 'TILED': true},\n       \n       transition: 0\n      }),\n     style: vectorstyle\n       })*/\n\n    this.map = new Map({\n      layers: [basemap, vectorlayer],\n      target: \"mapContainer\",\n      view: new View({\n        center: fromLonLat([-94.6859, 46.7296]),\n        zoom: 6\n      })\n    });\n  }\n\n  render() {\n    console.log(\"-> render App\");\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"mapContainer\",\n      ref: this.mapRef,\n      style: {\n        width: \"100%\",\n        height: \"500px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"maplegend\",\n      ref: this.legendRef,\n      style: {\n        width: \"20%\",\n        height: \"100px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/*\nconst SmokerMap = ({ counties}) =>{\n    /*\n    const mapStyle={\n        fillColor: \"white\",\n        weight: 1,\n        color: \"black\",\n        fillOpacity: 1,\n    };\n    const onEachCountry = (country, layer) => {\n        layer.options.fillColor = country.properties.color;\n        const name = country.properties.ADMIN;\n        const confirmedText = country.properties.confirmedText;\n        layer.bindPopup(`${name} ${confirmedText}`);\n      };*/\n\n/*return (\n  <Map style={{ height: \"90vh\" }} zoom={2} center={[-94.6859,46.7296]}>\n    <GeoJSON\n      style={mapStyle}\n      data={countries}\n      onEachFeature={onEachCountry}\n    />\n  </Map>\n);\n return (\n  <div className=\"map_div\">\n  <Map className=\"smoker_map\" view={{center:fromLonLat([-94.6859,46.7296]),zoom:6}}>\n    <Layers>\n      <layer.Tile></layer.Tile>\n      </Layers>\n       </Map>\n  \n  </div>\n);\n};\nexport default SmokerMap;\n*/","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/src/components/SmokerMap.js"],"names":["React","fromLonLat","get","Map","View","TileLayer","VectorLayer","VectorSource","GeoJSON","OSM","Fill","Stroke","Style","ImageWMS","SmokerMap","Component","constructor","props","console","log","mapRef","createRef","legendRef","componentDidMount","basemap","source","wmsSource","url","params","target","ratio","serverType","updateLegend","resolution","graphicUrl","getLegendUrl","map","getView","getResolution","on","event","totalsmoker","format","stylefunction","feature","style","value","fill","color","stroke","width","vectorlayer","showLegend","layers","view","center","zoom","render","height"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { fromLonLat, get } from \"ol/proj\";\n//import \"./SmokerMap.css\";\nimport Map from \"ol/Map\";\n//import Feature from \"ol/Feature\";\nimport View from \"ol/View\";\n//import { Point, Style, Circle, Fill, Feature } from \"ol\";\nimport TileLayer from \"ol/layer/Tile\";\n//import TileWMS from 'ol/source/TileWMS';\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\nimport GeoJSON from 'ol/format/GeoJSON';\nimport OSM from \"ol/source/OSM\";\nimport {Fill, Stroke, Style} from 'ol/style';\n//import cityboundary from \"./Minneapolis_Police_Precincts.geojson\";\n\nimport ImageWMS from 'ol/source/ImageWMS';\n\n\n\n\nexport default class SmokerMap extends React.Component{\n  constructor(props){\n    super(props);\n    console.log(this.props);\n    this.mapRef=React.createRef();\n    this.legendRef=React.createRef();\n  }\n  componentDidMount(){\n\n    var basemap =new TileLayer({\n      source: new OSM()\n    })\n\n    const wmsSource = new ImageWMS({\n      url: 'https://ahocevar.com/geoserver/wms',\n      params: {'LAYERS': 'topp:states'},\n      target: \"maplegend\",\n      ratio: 1,\n      serverType: 'geoserver',\n    });\n    const updateLegend = function (resolution) {\n      const graphicUrl = wmsSource.getLegendUrl(resolution);\n      //const img = document.getElementById('legend');\n      //const img.src = graphicUrl;\n    };\n    \n    const resolution = this.map.getView().getResolution();\n    updateLegend(resolution);\n\n    this.map.getView().on('change:resolution', function (event) {\n      const resolution = event.target.getResolution();\n      updateLegend(resolution);\n    });\n\n    \n    /*\n    var vectorstyle = new Style({\n      fill: new Fill({\n        color: '#eeeeee'\n      }),\n      stroke: new Stroke({\n        color:'black',\n        width:1\n      })\n    })*/\n\n    var totalsmoker = new VectorSource({\n      url:\"https://smartcommunityhealth.ahc.umn.edu/lung_cancer/wms?service=WMS&version=1.1.0&request=GetMap&layers=lung_cancer%3Atotal_smokers_v2&bbox=-97.239209%2C43.499383499%2C-89.4917389999999%2C49.3843580000001&width=768&height=583&srs=EPSG%3A4326&format=geojson\",\n      format: new GeoJSON()\n    })\n\n \n      var stylefunction = function(feature){\n        var style;\n        var value=feature.get('brffs_smokers');\n        console.log(value);\n        //var color= value <100 ? '#ffffff': value <200 ? '#ff3f3f' : '#3f0000';\n\n        //this.style.getFill().setColor(color);\n      if(feature.get('brffs_smokers')>'400'){\n        style= new Style({\n          fill: new Fill({\n            color: '#eeeeee'\n          }),\n          stroke: new Stroke({\n            color:'black',\n            width:1\n          })\n\n        })\n\n      }\n      else \n        style= new Style({\n         fill: new Fill({\n            color: '#B4DFB4'\n          }),\n         stroke: new Stroke({\n           color:'black',\n            width:1\n         })\n\n      })\n      \n        return style;\n\n    };\n\n    var vectorlayer = new VectorLayer({\n     \n       source: totalsmoker,\n       style: stylefunction,\n       showLegend:true\n       \n    \n       })\n\n     /*  \n    var lungdata = new TileLayer({\n      source : new TileWMS ({\n        url:'https://smartcommunityhealth.ahc.umn.edu/lung_cancer/wms',\n        serverType:'geoserver',\n        params: {'LAYERS': 'lung_cancer:total_smokers_v2', 'TILED': true},\n        \n        transition: 0\n\n      }),\n      style: vectorstyle\n\n\n\n\n    })*/\n    \n    this.map=new Map({\n      layers: [basemap,vectorlayer],\n      target: \"mapContainer\",\n      view :new View({\n        center:fromLonLat([-94.6859,46.7296]),\n        zoom: 6\n      })\n\n    \n\n    });\n    \n   \n   \n  }\n  render() {\n    console.log(\"-> render App\");\n    return (\n      <div\n        id=\"mapContainer\"\n        ref={this.mapRef}\n        style={{ width: \"100%\", height: \"500px\" }}\n      >\n       \n      </div>,\n\n      <div\n        id= \"maplegend\"\n        ref= {this.legendRef}\n        style={{ width: \"20%\", height: \"100px\" }}\n\n      >\n        \n\n      </div>\n    );\n  }\n\n\n}\n/*\nconst SmokerMap = ({ counties}) =>{\n    /*\n    const mapStyle={\n        fillColor: \"white\",\n        weight: 1,\n        color: \"black\",\n        fillOpacity: 1,\n    };\n    const onEachCountry = (country, layer) => {\n        layer.options.fillColor = country.properties.color;\n        const name = country.properties.ADMIN;\n        const confirmedText = country.properties.confirmedText;\n        layer.bindPopup(`${name} ${confirmedText}`);\n      };*/\n\n      /*return (\n        <Map style={{ height: \"90vh\" }} zoom={2} center={[-94.6859,46.7296]}>\n          <GeoJSON\n            style={mapStyle}\n            data={countries}\n            onEachFeature={onEachCountry}\n          />\n        </Map>\n      );\n\n      return (\n        <div className=\"map_div\">\n        <Map className=\"smoker_map\" view={{center:fromLonLat([-94.6859,46.7296]),zoom:6}}>\n          <Layers>\n            <layer.Tile></layer.Tile>\n            </Layers>\n    \n        </Map>\n        \n        </div>\n      );\n\n};\nexport default SmokerMap;\n*/\n"]},"metadata":{},"sourceType":"module"}