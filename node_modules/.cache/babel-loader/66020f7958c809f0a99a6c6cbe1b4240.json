{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Bean, PreDestroy, Autowired, PostConstruct } from \"../context/context\";\nimport { Events } from \"../events\";\nimport { BeanStub } from \"../context/beanStub\";\nimport { find, exists } from \"../utils/generic\";\nimport { removeFromArray } from \"../utils/array\";\nimport { areEventsNear } from \"../utils/mouse\";\n/** Adds drag listening onto an element. In AG Grid this is used twice, first is resizing columns,\n * second is moving the columns and column groups around (ie the 'drag' part of Drag and Drop. */\n\nvar DragService =\n/** @class */\nfunction (_super) {\n  __extends(DragService, _super);\n\n  function DragService() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.dragEndFunctions = [];\n    _this.dragSources = [];\n    return _this;\n  }\n\n  DragService.prototype.init = function () {\n    this.logger = this.loggerFactory.create('DragService');\n  };\n\n  DragService.prototype.removeAllListeners = function () {\n    this.dragSources.forEach(this.removeListener.bind(this));\n    this.dragSources.length = 0;\n  };\n\n  DragService.prototype.removeListener = function (dragSourceAndListener) {\n    var element = dragSourceAndListener.dragSource.eElement;\n    var mouseDownListener = dragSourceAndListener.mouseDownListener;\n    element.removeEventListener('mousedown', mouseDownListener); // remove touch listener only if it exists\n\n    if (dragSourceAndListener.touchEnabled) {\n      var touchStartListener = dragSourceAndListener.touchStartListener;\n      element.removeEventListener('touchstart', touchStartListener, {\n        passive: true\n      });\n    }\n  };\n\n  DragService.prototype.removeDragSource = function (params) {\n    var dragSourceAndListener = find(this.dragSources, function (item) {\n      return item.dragSource === params;\n    });\n\n    if (!dragSourceAndListener) {\n      return;\n    }\n\n    this.removeListener(dragSourceAndListener);\n    removeFromArray(this.dragSources, dragSourceAndListener);\n  };\n\n  DragService.prototype.isDragging = function () {\n    return this.dragging;\n  };\n\n  DragService.prototype.addDragSource = function (params, includeTouch) {\n    var _this = this;\n\n    if (includeTouch === void 0) {\n      includeTouch = false;\n    }\n\n    var mouseListener = this.onMouseDown.bind(this, params);\n    params.eElement.addEventListener('mousedown', mouseListener);\n    var touchListener = null;\n    var suppressTouch = this.gridOptionsWrapper.isSuppressTouch();\n\n    if (includeTouch && !suppressTouch) {\n      touchListener = function (touchEvent) {\n        touchEvent.preventDefault();\n\n        _this.onTouchStart(params, touchEvent);\n      };\n\n      params.eElement.addEventListener('touchstart', touchListener, {\n        passive: true\n      });\n    }\n\n    this.dragSources.push({\n      dragSource: params,\n      mouseDownListener: mouseListener,\n      touchStartListener: touchListener,\n      touchEnabled: includeTouch\n    });\n  }; // gets called whenever mouse down on any drag source\n\n\n  DragService.prototype.onTouchStart = function (params, touchEvent) {\n    var _this = this;\n\n    this.currentDragParams = params;\n    this.dragging = false;\n    var touch = touchEvent.touches[0];\n    this.touchLastTime = touch;\n    this.touchStart = touch;\n\n    var touchMoveEvent = function (e) {\n      return _this.onTouchMove(e, params.eElement);\n    };\n\n    var touchEndEvent = function (e) {\n      return _this.onTouchUp(e, params.eElement);\n    };\n\n    var documentTouchMove = function (e) {\n      if (e.cancelable) {\n        e.preventDefault();\n      }\n    };\n\n    var target = params.eElement;\n    var events = [// Prevents the page document from moving while we are dragging items around.\n    // preventDefault needs to be called in the touchmove listener and never inside the\n    // touchstart, because using touchstart causes the click event to be cancelled on touch devices.\n    {\n      target: document,\n      type: 'touchmove',\n      listener: documentTouchMove,\n      options: {\n        passive: false\n      }\n    }, {\n      target: target,\n      type: 'touchmove',\n      listener: touchMoveEvent,\n      options: {\n        passive: true\n      }\n    }, {\n      target: target,\n      type: 'touchend',\n      listener: touchEndEvent,\n      options: {\n        passive: true\n      }\n    }, {\n      target: target,\n      type: 'touchcancel',\n      listener: touchEndEvent,\n      options: {\n        passive: true\n      }\n    }]; // temporally add these listeners, for the duration of the drag\n\n    this.addTemporaryEvents(events); // see if we want to start dragging straight away\n\n    if (params.dragStartPixels === 0) {\n      this.onCommonMove(touch, this.touchStart, params.eElement);\n    }\n  }; // gets called whenever mouse down on any drag source\n\n\n  DragService.prototype.onMouseDown = function (params, mouseEvent) {\n    var _this = this;\n\n    var e = mouseEvent;\n\n    if (params.skipMouseEvent && params.skipMouseEvent(mouseEvent)) {\n      return;\n    } // if there are two elements with parent / child relationship, and both are draggable,\n    // when we drag the child, we should NOT drag the parent. an example of this is row moving\n    // and range selection - row moving should get preference when use drags the rowDrag component.\n\n\n    if (e._alreadyProcessedByDragService) {\n      return;\n    }\n\n    e._alreadyProcessedByDragService = true; // only interested in left button clicks\n\n    if (mouseEvent.button !== 0) {\n      return;\n    }\n\n    this.currentDragParams = params;\n    this.dragging = false;\n    this.mouseStartEvent = mouseEvent;\n    var eDocument = this.gridOptionsWrapper.getDocument();\n\n    var mouseMoveEvent = function (event) {\n      return _this.onMouseMove(event, params.eElement);\n    };\n\n    var mouseUpEvent = function (event) {\n      return _this.onMouseUp(event, params.eElement);\n    };\n\n    var contextEvent = function (event) {\n      return event.preventDefault();\n    };\n\n    var target = eDocument;\n    var events = [{\n      target: target,\n      type: 'mousemove',\n      listener: mouseMoveEvent\n    }, {\n      target: target,\n      type: 'mouseup',\n      listener: mouseUpEvent\n    }, {\n      target: target,\n      type: 'contextmenu',\n      listener: contextEvent\n    }]; // temporally add these listeners, for the duration of the drag\n\n    this.addTemporaryEvents(events); //see if we want to start dragging straight away\n\n    if (params.dragStartPixels === 0) {\n      this.onMouseMove(mouseEvent, params.eElement);\n    }\n  };\n\n  DragService.prototype.addTemporaryEvents = function (events) {\n    events.forEach(function (currentEvent) {\n      var target = currentEvent.target,\n          type = currentEvent.type,\n          listener = currentEvent.listener,\n          options = currentEvent.options;\n      target.addEventListener(type, listener, options);\n    });\n    this.dragEndFunctions.push(function () {\n      events.forEach(function (currentEvent) {\n        var target = currentEvent.target,\n            type = currentEvent.type,\n            listener = currentEvent.listener,\n            options = currentEvent.options;\n        target.removeEventListener(type, listener, options);\n      });\n    });\n  }; // returns true if the event is close to the original event by X pixels either vertically or horizontally.\n  // we only start dragging after X pixels so this allows us to know if we should start dragging yet.\n\n\n  DragService.prototype.isEventNearStartEvent = function (currentEvent, startEvent) {\n    // by default, we wait 4 pixels before starting the drag\n    var dragStartPixels = this.currentDragParams.dragStartPixels;\n    var requiredPixelDiff = exists(dragStartPixels) ? dragStartPixels : 4;\n    return areEventsNear(currentEvent, startEvent, requiredPixelDiff);\n  };\n\n  DragService.prototype.getFirstActiveTouch = function (touchList) {\n    for (var i = 0; i < touchList.length; i++) {\n      if (touchList[i].identifier === this.touchStart.identifier) {\n        return touchList[i];\n      }\n    }\n\n    return null;\n  };\n\n  DragService.prototype.onCommonMove = function (currentEvent, startEvent, el) {\n    if (!this.dragging) {\n      // if mouse hasn't travelled from the start position enough, do nothing\n      if (!this.dragging && this.isEventNearStartEvent(currentEvent, startEvent)) {\n        return;\n      }\n\n      this.dragging = true;\n      var event_1 = {\n        type: Events.EVENT_DRAG_STARTED,\n        api: this.gridApi,\n        columnApi: this.columnApi,\n        target: el\n      };\n      this.eventService.dispatchEvent(event_1);\n      this.currentDragParams.onDragStart(startEvent); // we need ONE drag action at the startEvent, so that we are guaranteed the drop target\n      // at the start gets notified. this is because the drag can start outside of the element\n      // that started it, as the mouse is allowed drag away from the mouse down before it's\n      // considered a drag (the isEventNearStartEvent() above). if we didn't do this, then\n      // it would be possible to click a column by the edge, then drag outside of the drop zone\n      // in less than 4 pixels and the drag officially starts outside of the header but the header\n      // wouldn't be notified of the dragging.\n\n      this.currentDragParams.onDragging(startEvent);\n    }\n\n    this.currentDragParams.onDragging(currentEvent);\n  };\n\n  DragService.prototype.onTouchMove = function (touchEvent, el) {\n    var touch = this.getFirstActiveTouch(touchEvent.touches);\n\n    if (!touch) {\n      return;\n    } // this.___statusPanel.setInfoText(Math.random() + ' onTouchMove preventDefault stopPropagation');\n\n\n    this.onCommonMove(touch, this.touchStart, el);\n  }; // only gets called after a mouse down - as this is only added after mouseDown\n  // and is removed when mouseUp happens\n\n\n  DragService.prototype.onMouseMove = function (mouseEvent, el) {\n    this.onCommonMove(mouseEvent, this.mouseStartEvent, el);\n  };\n\n  DragService.prototype.onTouchUp = function (touchEvent, el) {\n    var touch = this.getFirstActiveTouch(touchEvent.changedTouches); // i haven't worked this out yet, but there is no matching touch\n    // when we get the touch up event. to get around this, we swap in\n    // the last touch. this is a hack to 'get it working' while we\n    // figure out what's going on, why we are not getting a touch in\n    // current event.\n\n    if (!touch) {\n      touch = this.touchLastTime;\n    } // if mouse was left up before we started to move, then this is a tap.\n    // we check this before onUpCommon as onUpCommon resets the dragging\n    // let tap = !this.dragging;\n    // let tapTarget = this.currentDragParams.eElement;\n\n\n    this.onUpCommon(touch, el); // if tap, tell user\n    // console.log(`${Math.random()} tap = ${tap}`);\n    // if (tap) {\n    //     tapTarget.click();\n    // }\n  };\n\n  DragService.prototype.onMouseUp = function (mouseEvent, el) {\n    this.onUpCommon(mouseEvent, el);\n  };\n\n  DragService.prototype.onUpCommon = function (eventOrTouch, el) {\n    if (this.dragging) {\n      this.dragging = false;\n      this.currentDragParams.onDragStop(eventOrTouch);\n      var event_2 = {\n        type: Events.EVENT_DRAG_STOPPED,\n        api: this.gridApi,\n        columnApi: this.columnApi,\n        target: el\n      };\n      this.eventService.dispatchEvent(event_2);\n    }\n\n    this.mouseStartEvent = null;\n    this.touchStart = null;\n    this.touchLastTime = null;\n    this.currentDragParams = null;\n    this.dragEndFunctions.forEach(function (func) {\n      return func();\n    });\n    this.dragEndFunctions.length = 0;\n  };\n\n  __decorate([Autowired('loggerFactory')], DragService.prototype, \"loggerFactory\", void 0);\n\n  __decorate([Autowired('columnApi')], DragService.prototype, \"columnApi\", void 0);\n\n  __decorate([Autowired('gridApi')], DragService.prototype, \"gridApi\", void 0);\n\n  __decorate([PostConstruct], DragService.prototype, \"init\", null);\n\n  __decorate([PreDestroy], DragService.prototype, \"removeAllListeners\", null);\n\n  DragService = __decorate([Bean('dragService')], DragService);\n  return DragService;\n}(BeanStub);\n\nexport { DragService };","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/core/dist/es6/dragAndDrop/dragService.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Bean","PreDestroy","Autowired","PostConstruct","Events","BeanStub","find","exists","removeFromArray","areEventsNear","DragService","_super","_this","apply","dragEndFunctions","dragSources","init","logger","loggerFactory","removeAllListeners","forEach","removeListener","bind","dragSourceAndListener","element","dragSource","eElement","mouseDownListener","removeEventListener","touchEnabled","touchStartListener","passive","removeDragSource","params","item","isDragging","dragging","addDragSource","includeTouch","mouseListener","onMouseDown","addEventListener","touchListener","suppressTouch","gridOptionsWrapper","isSuppressTouch","touchEvent","preventDefault","onTouchStart","push","currentDragParams","touch","touches","touchLastTime","touchStart","touchMoveEvent","e","onTouchMove","touchEndEvent","onTouchUp","documentTouchMove","cancelable","events","document","type","listener","options","addTemporaryEvents","dragStartPixels","onCommonMove","mouseEvent","skipMouseEvent","_alreadyProcessedByDragService","button","mouseStartEvent","eDocument","getDocument","mouseMoveEvent","event","onMouseMove","mouseUpEvent","onMouseUp","contextEvent","currentEvent","isEventNearStartEvent","startEvent","requiredPixelDiff","getFirstActiveTouch","touchList","identifier","el","event_1","EVENT_DRAG_STARTED","api","gridApi","columnApi","eventService","dispatchEvent","onDragStart","onDragging","changedTouches","onUpCommon","eventOrTouch","onDragStop","event_2","EVENT_DRAG_STOPPED","func"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Bean, PreDestroy, Autowired, PostConstruct } from \"../context/context\";\nimport { Events } from \"../events\";\nimport { BeanStub } from \"../context/beanStub\";\nimport { find, exists } from \"../utils/generic\";\nimport { removeFromArray } from \"../utils/array\";\nimport { areEventsNear } from \"../utils/mouse\";\n/** Adds drag listening onto an element. In AG Grid this is used twice, first is resizing columns,\n * second is moving the columns and column groups around (ie the 'drag' part of Drag and Drop. */\nvar DragService = /** @class */ (function (_super) {\n    __extends(DragService, _super);\n    function DragService() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dragEndFunctions = [];\n        _this.dragSources = [];\n        return _this;\n    }\n    DragService.prototype.init = function () {\n        this.logger = this.loggerFactory.create('DragService');\n    };\n    DragService.prototype.removeAllListeners = function () {\n        this.dragSources.forEach(this.removeListener.bind(this));\n        this.dragSources.length = 0;\n    };\n    DragService.prototype.removeListener = function (dragSourceAndListener) {\n        var element = dragSourceAndListener.dragSource.eElement;\n        var mouseDownListener = dragSourceAndListener.mouseDownListener;\n        element.removeEventListener('mousedown', mouseDownListener);\n        // remove touch listener only if it exists\n        if (dragSourceAndListener.touchEnabled) {\n            var touchStartListener = dragSourceAndListener.touchStartListener;\n            element.removeEventListener('touchstart', touchStartListener, { passive: true });\n        }\n    };\n    DragService.prototype.removeDragSource = function (params) {\n        var dragSourceAndListener = find(this.dragSources, function (item) { return item.dragSource === params; });\n        if (!dragSourceAndListener) {\n            return;\n        }\n        this.removeListener(dragSourceAndListener);\n        removeFromArray(this.dragSources, dragSourceAndListener);\n    };\n    DragService.prototype.isDragging = function () {\n        return this.dragging;\n    };\n    DragService.prototype.addDragSource = function (params, includeTouch) {\n        var _this = this;\n        if (includeTouch === void 0) { includeTouch = false; }\n        var mouseListener = this.onMouseDown.bind(this, params);\n        params.eElement.addEventListener('mousedown', mouseListener);\n        var touchListener = null;\n        var suppressTouch = this.gridOptionsWrapper.isSuppressTouch();\n        if (includeTouch && !suppressTouch) {\n            touchListener = function (touchEvent) {\n                touchEvent.preventDefault();\n                _this.onTouchStart(params, touchEvent);\n            };\n            params.eElement.addEventListener('touchstart', touchListener, { passive: true });\n        }\n        this.dragSources.push({\n            dragSource: params,\n            mouseDownListener: mouseListener,\n            touchStartListener: touchListener,\n            touchEnabled: includeTouch\n        });\n    };\n    // gets called whenever mouse down on any drag source\n    DragService.prototype.onTouchStart = function (params, touchEvent) {\n        var _this = this;\n        this.currentDragParams = params;\n        this.dragging = false;\n        var touch = touchEvent.touches[0];\n        this.touchLastTime = touch;\n        this.touchStart = touch;\n        var touchMoveEvent = function (e) { return _this.onTouchMove(e, params.eElement); };\n        var touchEndEvent = function (e) { return _this.onTouchUp(e, params.eElement); };\n        var documentTouchMove = function (e) { if (e.cancelable) {\n            e.preventDefault();\n        } };\n        var target = params.eElement;\n        var events = [\n            // Prevents the page document from moving while we are dragging items around.\n            // preventDefault needs to be called in the touchmove listener and never inside the\n            // touchstart, because using touchstart causes the click event to be cancelled on touch devices.\n            { target: document, type: 'touchmove', listener: documentTouchMove, options: { passive: false } },\n            { target: target, type: 'touchmove', listener: touchMoveEvent, options: { passive: true } },\n            { target: target, type: 'touchend', listener: touchEndEvent, options: { passive: true } },\n            { target: target, type: 'touchcancel', listener: touchEndEvent, options: { passive: true } }\n        ];\n        // temporally add these listeners, for the duration of the drag\n        this.addTemporaryEvents(events);\n        // see if we want to start dragging straight away\n        if (params.dragStartPixels === 0) {\n            this.onCommonMove(touch, this.touchStart, params.eElement);\n        }\n    };\n    // gets called whenever mouse down on any drag source\n    DragService.prototype.onMouseDown = function (params, mouseEvent) {\n        var _this = this;\n        var e = mouseEvent;\n        if (params.skipMouseEvent && params.skipMouseEvent(mouseEvent)) {\n            return;\n        }\n        // if there are two elements with parent / child relationship, and both are draggable,\n        // when we drag the child, we should NOT drag the parent. an example of this is row moving\n        // and range selection - row moving should get preference when use drags the rowDrag component.\n        if (e._alreadyProcessedByDragService) {\n            return;\n        }\n        e._alreadyProcessedByDragService = true;\n        // only interested in left button clicks\n        if (mouseEvent.button !== 0) {\n            return;\n        }\n        this.currentDragParams = params;\n        this.dragging = false;\n        this.mouseStartEvent = mouseEvent;\n        var eDocument = this.gridOptionsWrapper.getDocument();\n        var mouseMoveEvent = function (event) { return _this.onMouseMove(event, params.eElement); };\n        var mouseUpEvent = function (event) { return _this.onMouseUp(event, params.eElement); };\n        var contextEvent = function (event) { return event.preventDefault(); };\n        var target = eDocument;\n        var events = [\n            { target: target, type: 'mousemove', listener: mouseMoveEvent },\n            { target: target, type: 'mouseup', listener: mouseUpEvent },\n            { target: target, type: 'contextmenu', listener: contextEvent }\n        ];\n        // temporally add these listeners, for the duration of the drag\n        this.addTemporaryEvents(events);\n        //see if we want to start dragging straight away\n        if (params.dragStartPixels === 0) {\n            this.onMouseMove(mouseEvent, params.eElement);\n        }\n    };\n    DragService.prototype.addTemporaryEvents = function (events) {\n        events.forEach(function (currentEvent) {\n            var target = currentEvent.target, type = currentEvent.type, listener = currentEvent.listener, options = currentEvent.options;\n            target.addEventListener(type, listener, options);\n        });\n        this.dragEndFunctions.push(function () {\n            events.forEach(function (currentEvent) {\n                var target = currentEvent.target, type = currentEvent.type, listener = currentEvent.listener, options = currentEvent.options;\n                target.removeEventListener(type, listener, options);\n            });\n        });\n    };\n    // returns true if the event is close to the original event by X pixels either vertically or horizontally.\n    // we only start dragging after X pixels so this allows us to know if we should start dragging yet.\n    DragService.prototype.isEventNearStartEvent = function (currentEvent, startEvent) {\n        // by default, we wait 4 pixels before starting the drag\n        var dragStartPixels = this.currentDragParams.dragStartPixels;\n        var requiredPixelDiff = exists(dragStartPixels) ? dragStartPixels : 4;\n        return areEventsNear(currentEvent, startEvent, requiredPixelDiff);\n    };\n    DragService.prototype.getFirstActiveTouch = function (touchList) {\n        for (var i = 0; i < touchList.length; i++) {\n            if (touchList[i].identifier === this.touchStart.identifier) {\n                return touchList[i];\n            }\n        }\n        return null;\n    };\n    DragService.prototype.onCommonMove = function (currentEvent, startEvent, el) {\n        if (!this.dragging) {\n            // if mouse hasn't travelled from the start position enough, do nothing\n            if (!this.dragging && this.isEventNearStartEvent(currentEvent, startEvent)) {\n                return;\n            }\n            this.dragging = true;\n            var event_1 = {\n                type: Events.EVENT_DRAG_STARTED,\n                api: this.gridApi,\n                columnApi: this.columnApi,\n                target: el\n            };\n            this.eventService.dispatchEvent(event_1);\n            this.currentDragParams.onDragStart(startEvent);\n            // we need ONE drag action at the startEvent, so that we are guaranteed the drop target\n            // at the start gets notified. this is because the drag can start outside of the element\n            // that started it, as the mouse is allowed drag away from the mouse down before it's\n            // considered a drag (the isEventNearStartEvent() above). if we didn't do this, then\n            // it would be possible to click a column by the edge, then drag outside of the drop zone\n            // in less than 4 pixels and the drag officially starts outside of the header but the header\n            // wouldn't be notified of the dragging.\n            this.currentDragParams.onDragging(startEvent);\n        }\n        this.currentDragParams.onDragging(currentEvent);\n    };\n    DragService.prototype.onTouchMove = function (touchEvent, el) {\n        var touch = this.getFirstActiveTouch(touchEvent.touches);\n        if (!touch) {\n            return;\n        }\n        // this.___statusPanel.setInfoText(Math.random() + ' onTouchMove preventDefault stopPropagation');\n        this.onCommonMove(touch, this.touchStart, el);\n    };\n    // only gets called after a mouse down - as this is only added after mouseDown\n    // and is removed when mouseUp happens\n    DragService.prototype.onMouseMove = function (mouseEvent, el) {\n        this.onCommonMove(mouseEvent, this.mouseStartEvent, el);\n    };\n    DragService.prototype.onTouchUp = function (touchEvent, el) {\n        var touch = this.getFirstActiveTouch(touchEvent.changedTouches);\n        // i haven't worked this out yet, but there is no matching touch\n        // when we get the touch up event. to get around this, we swap in\n        // the last touch. this is a hack to 'get it working' while we\n        // figure out what's going on, why we are not getting a touch in\n        // current event.\n        if (!touch) {\n            touch = this.touchLastTime;\n        }\n        // if mouse was left up before we started to move, then this is a tap.\n        // we check this before onUpCommon as onUpCommon resets the dragging\n        // let tap = !this.dragging;\n        // let tapTarget = this.currentDragParams.eElement;\n        this.onUpCommon(touch, el);\n        // if tap, tell user\n        // console.log(`${Math.random()} tap = ${tap}`);\n        // if (tap) {\n        //     tapTarget.click();\n        // }\n    };\n    DragService.prototype.onMouseUp = function (mouseEvent, el) {\n        this.onUpCommon(mouseEvent, el);\n    };\n    DragService.prototype.onUpCommon = function (eventOrTouch, el) {\n        if (this.dragging) {\n            this.dragging = false;\n            this.currentDragParams.onDragStop(eventOrTouch);\n            var event_2 = {\n                type: Events.EVENT_DRAG_STOPPED,\n                api: this.gridApi,\n                columnApi: this.columnApi,\n                target: el\n            };\n            this.eventService.dispatchEvent(event_2);\n        }\n        this.mouseStartEvent = null;\n        this.touchStart = null;\n        this.touchLastTime = null;\n        this.currentDragParams = null;\n        this.dragEndFunctions.forEach(function (func) { return func(); });\n        this.dragEndFunctions.length = 0;\n    };\n    __decorate([\n        Autowired('loggerFactory')\n    ], DragService.prototype, \"loggerFactory\", void 0);\n    __decorate([\n        Autowired('columnApi')\n    ], DragService.prototype, \"columnApi\", void 0);\n    __decorate([\n        Autowired('gridApi')\n    ], DragService.prototype, \"gridApi\", void 0);\n    __decorate([\n        PostConstruct\n    ], DragService.prototype, \"init\", null);\n    __decorate([\n        PreDestroy\n    ], DragService.prototype, \"removeAllListeners\", null);\n    DragService = __decorate([\n        Bean('dragService')\n    ], DragService);\n    return DragService;\n}(BeanStub));\nexport { DragService };\n"]},"metadata":{},"sourceType":"module"}