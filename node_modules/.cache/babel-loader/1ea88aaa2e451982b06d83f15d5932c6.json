{"ast":null,"code":"// @ag-grid-community/react v26.2.0\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar react_dom_1 = require(\"react-dom\");\n\nvar core_1 = require(\"@ag-grid-community/core\");\n\nvar reactComponent_1 = require(\"../shared/reactComponent\");\n\nvar server_1 = require(\"react-dom/server\");\n\nvar keyGenerator_1 = __importDefault(require(\"../shared/keyGenerator\"));\n\nvar LegacyReactComponent =\n/** @class */\nfunction (_super) {\n  __extends(LegacyReactComponent, _super);\n\n  function LegacyReactComponent(reactComponent, parentComponent, portalManager, componentType) {\n    var _this = _super.call(this, reactComponent, portalManager, componentType) || this;\n\n    _this.staticMarkup = null;\n    _this.staticRenderTime = 0;\n    _this.parentComponent = parentComponent;\n    return _this;\n  }\n\n  LegacyReactComponent.prototype.init = function (params) {\n    var _this = this;\n\n    this.eParentElement = this.createParentElement(params);\n    this.renderStaticMarkup(params);\n    return new core_1.AgPromise(function (resolve) {\n      return _this.createReactComponent(params, resolve);\n    });\n  };\n\n  LegacyReactComponent.prototype.createReactComponent = function (params, resolve) {\n    var _this = this; // regular components (ie not functional)\n\n\n    if (!this.isStatelessComponent()) {\n      // grab hold of the actual instance created\n      params.ref = function (element) {\n        _this.componentInstance = element;\n\n        _this.addParentContainerStyleAndClasses();\n\n        _this.removeStaticMarkup();\n      };\n    }\n\n    var reactComponent = react_1.createElement(this.reactComponent, params);\n    var portal = react_dom_1.createPortal(reactComponent, this.eParentElement, keyGenerator_1.default() // fixed deltaRowModeRefreshCompRenderer\n    );\n    this.portal = portal;\n    this.portalManager.mountReactPortal(portal, this, function (value) {\n      resolve(value); // functional/stateless components have a slightly different lifecycle (no refs) so we'll clean them up\n      // here\n\n      if (_this.isStatelessComponent()) {\n        if (_this.isSlowRenderer()) {\n          _this.removeStaticMarkup();\n        }\n\n        setTimeout(function () {\n          _this.removeStaticMarkup();\n        });\n      }\n    });\n  };\n\n  LegacyReactComponent.prototype.fallbackMethodAvailable = function (name) {\n    return false;\n  };\n\n  LegacyReactComponent.prototype.fallbackMethod = function (name, params) {};\n\n  LegacyReactComponent.prototype.isSlowRenderer = function () {\n    return this.staticRenderTime >= LegacyReactComponent.SLOW_RENDERING_THRESHOLD;\n  };\n\n  LegacyReactComponent.prototype.isNullValue = function () {\n    return this.staticMarkup === '';\n  };\n  /*\n   * Attempt to render the component as static markup if possible\n   * What this does is eliminate any visible flicker for the user in the scenario where a component is destroyed and\n   * recreated with exactly the same data (ie with force refresh)\n   * Note: Some use cases will throw an error (ie when using Context) so if an error occurs just ignore it any move on\n   */\n\n\n  LegacyReactComponent.prototype.renderStaticMarkup = function (params) {\n    if (this.parentComponent.isDisableStaticMarkup() || this.componentType.isCellRenderer && !this.componentType.isCellRenderer()) {\n      return;\n    }\n\n    var originalConsoleError = console.error;\n    var reactComponent = react_1.createElement(this.reactComponent, params);\n\n    try {\n      // if a user is doing anything that uses useLayoutEffect (like material ui) then it will throw and we\n      // can't do anything to stop it; this is just a warning and has no effect on anything so just suppress it\n      // for this single operation\n      console.error = function () {};\n\n      var start = Date.now();\n      var staticMarkup = server_1.renderToStaticMarkup(reactComponent);\n      this.staticRenderTime = Date.now() - start;\n      console.error = originalConsoleError; // if the render method returns null the result will be an empty string\n\n      if (staticMarkup === '') {\n        this.staticMarkup = staticMarkup;\n      } else {\n        if (staticMarkup) {\n          // we wrap the content as if there is \"trailing\" text etc it's not easy to safely remove\n          // the same is true for memoized renderers, renderers that that return simple strings or NaN etc\n          this.staticMarkup = document.createElement('span');\n          this.staticMarkup.innerHTML = staticMarkup;\n          this.eParentElement.appendChild(this.staticMarkup);\n        }\n      }\n    } catch (e) {// we tried - this can happen with certain (rare) edge cases\n    } finally {\n      console.error = originalConsoleError;\n    }\n  };\n\n  LegacyReactComponent.prototype.removeStaticMarkup = function () {\n    if (this.parentComponent.isDisableStaticMarkup() || !this.componentType.isCellRenderer()) {\n      return;\n    }\n\n    if (this.staticMarkup) {\n      if (this.staticMarkup.remove) {\n        // everyone else in the world\n        this.staticMarkup.remove();\n        this.staticMarkup = null;\n      } else if (this.eParentElement.removeChild) {\n        // ie11...\n        this.eParentElement.removeChild(this.staticMarkup);\n        this.staticMarkup = null;\n      }\n    }\n  };\n\n  LegacyReactComponent.prototype.rendered = function () {\n    return this.isNullValue() || !!this.staticMarkup || this.isStatelessComponent() && this.statelessComponentRendered() || !!(!this.isStatelessComponent() && this.getFrameworkComponentInstance());\n  };\n\n  LegacyReactComponent.SLOW_RENDERING_THRESHOLD = 3;\n  return LegacyReactComponent;\n}(reactComponent_1.ReactComponent);\n\nexports.LegacyReactComponent = LegacyReactComponent;","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/react/lib/legacy/legacy/legacyReactComponent.ts"],"names":[],"mappings":"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","sourcesContent":["import { createElement, ReactPortal } from 'react';\nimport { createPortal } from 'react-dom';\nimport { AgPromise, ComponentType } from '@ag-grid-community/core';\nimport { ReactComponent } from '../shared/reactComponent';\nimport { renderToStaticMarkup } from 'react-dom/server';\nimport generateNewKey from '../shared/keyGenerator';\nimport { AgGridReactLegacy } from './agGridReactLegacy';\nimport { PortalManager } from '../shared/portalManager';\n\nexport class LegacyReactComponent extends ReactComponent {\n    static SLOW_RENDERING_THRESHOLD = 3;\n\n    private staticMarkup: HTMLElement | null | string = null;\n    private staticRenderTime: number = 0;\n\n    private parentComponent: AgGridReactLegacy;\n\n    constructor(reactComponent: any, parentComponent: AgGridReactLegacy, portalManager: PortalManager, componentType: ComponentType) {\n        super(reactComponent, portalManager, componentType);\n        this.parentComponent = parentComponent;\n    }\n\n    public init(params: any): AgPromise<void> {\n        this.eParentElement = this.createParentElement(params);\n        this.renderStaticMarkup(params);\n\n        return new AgPromise<void>(resolve => this.createReactComponent(params, resolve));\n    }\n\n    private createReactComponent(params: any, resolve: (value: any) => void) {\n        // regular components (ie not functional)\n        if (!this.isStatelessComponent()) {\n            // grab hold of the actual instance created\n            params.ref = (element: any) => {\n                this.componentInstance = element;\n                this.addParentContainerStyleAndClasses();\n\n                this.removeStaticMarkup();\n            };\n        }\n\n        const reactComponent = createElement(this.reactComponent, params);\n        const portal: ReactPortal = createPortal(\n            reactComponent,\n            this.eParentElement as any,\n            generateNewKey() // fixed deltaRowModeRefreshCompRenderer\n        );\n\n        this.portal = portal;\n        this.portalManager.mountReactPortal(portal, this, (value: any) => {\n            resolve(value);\n\n            // functional/stateless components have a slightly different lifecycle (no refs) so we'll clean them up\n            // here\n            if (this.isStatelessComponent()) {\n                if (this.isSlowRenderer()) {\n                    this.removeStaticMarkup();\n                }\n                setTimeout(() => {\n                    this.removeStaticMarkup();\n                });\n            }\n        });\n    }\n\n    protected fallbackMethodAvailable(name: string): boolean {\n        return false;\n    }\n\n    protected fallbackMethod(name: string, params: any): void { /* no op */ }\n\n    private isSlowRenderer() {\n        return this.staticRenderTime >= LegacyReactComponent.SLOW_RENDERING_THRESHOLD;\n    }\n\n    public isNullValue(): boolean {\n        return this.staticMarkup === '';\n    }\n\n    /*\n     * Attempt to render the component as static markup if possible\n     * What this does is eliminate any visible flicker for the user in the scenario where a component is destroyed and\n     * recreated with exactly the same data (ie with force refresh)\n     * Note: Some use cases will throw an error (ie when using Context) so if an error occurs just ignore it any move on\n     */\n    private renderStaticMarkup(params: any) {\n        if (this.parentComponent.isDisableStaticMarkup() || (this.componentType.isCellRenderer && !this.componentType.isCellRenderer())) {\n            return;\n        }\n\n        const originalConsoleError = console.error;\n        const reactComponent = createElement(this.reactComponent, params);\n\n        try {\n            // if a user is doing anything that uses useLayoutEffect (like material ui) then it will throw and we\n            // can't do anything to stop it; this is just a warning and has no effect on anything so just suppress it\n            // for this single operation\n            console.error = () => {\n            };\n\n            const start = Date.now();\n            const staticMarkup = renderToStaticMarkup(reactComponent);\n            this.staticRenderTime = Date.now() - start;\n\n            console.error = originalConsoleError;\n\n            // if the render method returns null the result will be an empty string\n            if (staticMarkup === '') {\n                this.staticMarkup = staticMarkup;\n            } else {\n                if (staticMarkup) {\n                    // we wrap the content as if there is \"trailing\" text etc it's not easy to safely remove\n                    // the same is true for memoized renderers, renderers that that return simple strings or NaN etc\n                    this.staticMarkup = document.createElement('span');\n                    this.staticMarkup.innerHTML = staticMarkup;\n                    this.eParentElement.appendChild(this.staticMarkup);\n                }\n            }\n        } catch (e) {\n            // we tried - this can happen with certain (rare) edge cases\n        } finally {\n            console.error = originalConsoleError;\n        }\n    }\n\n    private removeStaticMarkup() {\n        if (this.parentComponent.isDisableStaticMarkup() || !this.componentType.isCellRenderer()) {\n            return;\n        }\n\n        if (this.staticMarkup) {\n            if ((this.staticMarkup as HTMLElement).remove) {\n                // everyone else in the world\n                (this.staticMarkup as HTMLElement).remove();\n                this.staticMarkup = null;\n            } else if (this.eParentElement.removeChild) {\n                // ie11...\n                this.eParentElement.removeChild(this.staticMarkup as any);\n                this.staticMarkup = null;\n            }\n        }\n    }\n\n    rendered(): boolean {\n        return this.isNullValue() ||\n            !!this.staticMarkup || (this.isStatelessComponent() && this.statelessComponentRendered()) ||\n            !!(!this.isStatelessComponent() && this.getFrameworkComponentInstance());\n    }\n}\n"]},"metadata":{},"sourceType":"script"}