{"ast":null,"code":"// @ag-grid-community/react v26.2.0\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar react_dom_1 = require(\"react-dom\");\n\nvar core_1 = require(\"@ag-grid-community/core\");\n\nvar reactComponent_1 = require(\"./reactComponent\");\n\nvar server_1 = require(\"react-dom/server\");\n\nvar keyGenerator_1 = __importDefault(require(\"./keyGenerator\"));\n\nvar NewReactComponent =\n/** @class */\nfunction (_super) {\n  __extends(NewReactComponent, _super);\n\n  function NewReactComponent(reactComponent, parentComponent, componentType) {\n    var _this = _super.call(this, reactComponent, parentComponent, componentType) || this;\n\n    _this.oldPortal = null;\n    _this.key = keyGenerator_1.default();\n    _this.portalKey = keyGenerator_1.default();\n    return _this;\n  }\n\n  NewReactComponent.prototype.init = function (params) {\n    var _this = this;\n\n    this.eParentElement = this.createParentElement(params);\n    this.params = params;\n    this.createOrUpdatePortal(params);\n    return new core_1.AgPromise(function (resolve) {\n      return _this.createReactComponent(resolve);\n    });\n  };\n\n  NewReactComponent.prototype.createOrUpdatePortal = function (params) {\n    var _this = this;\n\n    if (!this.isStatelessComponent()) {\n      // grab hold of the actual instance created\n      params.ref = function (element) {\n        _this.componentInstance = element;\n\n        _this.addParentContainerStyleAndClasses();\n      };\n    }\n\n    this.reactElement = react_1.createElement(this.reactComponent, __assign(__assign({}, params), {\n      key: this.key\n    }));\n    this.portal = react_dom_1.createPortal(this.reactElement, this.eParentElement, this.portalKey // fixed deltaRowModeRefreshCompRenderer\n    );\n  };\n\n  NewReactComponent.prototype.createReactComponent = function (resolve) {\n    this.portalManager.mountReactPortal(this.portal, this, function (value) {\n      resolve(value);\n    });\n  };\n\n  NewReactComponent.prototype.isNullValue = function () {\n    return this.valueRenderedIsNull(this.params);\n  };\n\n  NewReactComponent.prototype.rendered = function () {\n    return this.isStatelessComponent() && this.statelessComponentRendered() || !!(!this.isStatelessComponent() && this.getFrameworkComponentInstance());\n  };\n\n  NewReactComponent.prototype.valueRenderedIsNull = function (params) {\n    // we only do this for cellRenderers\n    if (this.componentType.isCellRenderer && !this.componentType.isCellRenderer()) {\n      return false;\n    } // we've no way of knowing if a component returns null without rendering it first\n    // so we render it to markup and check the output - if it'll be null we know and won't timeout\n    // waiting for a component that will never be created\n\n\n    var originalConsoleError = console.error;\n\n    try {\n      // if a user is doing anything that uses useLayoutEffect (like material ui) then it will throw and we\n      // can't do anything to stop it; this is just a warning and has no effect on anything so just suppress it\n      // for this single operation\n      console.error = function () {};\n\n      var staticMarkup = server_1.renderToStaticMarkup(react_1.createElement(this.reactComponent, params));\n      return staticMarkup === '';\n    } catch (ignore) {} finally {\n      console.error = originalConsoleError;\n    }\n\n    return false;\n  };\n  /*\n  * fallback methods - these will be invoked if a corresponding instance method is not present\n  * for example if refresh is called and is not available on the component instance, then refreshComponent on this\n  * class will be invoked instead\n  *\n  * Currently only refresh is supported\n  */\n\n\n  NewReactComponent.prototype.refreshComponent = function (args) {\n    this.oldPortal = this.portal;\n    this.createOrUpdatePortal(args);\n    this.portalManager.updateReactPortal(this.oldPortal, this.portal);\n  };\n\n  NewReactComponent.prototype.fallbackMethod = function (name, params) {\n    var method = this[name + \"Component\"];\n\n    if (!!method) {\n      return method.bind(this)(params);\n    }\n  };\n\n  NewReactComponent.prototype.fallbackMethodAvailable = function (name) {\n    var method = this[name + \"Component\"];\n    return !!method;\n  };\n\n  return NewReactComponent;\n}(reactComponent_1.ReactComponent);\n\nexports.NewReactComponent = NewReactComponent;","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/react/lib/shared/shared/newReactComponent.ts"],"names":[],"mappings":"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","sourcesContent":["import { ReactPortal, createElement } from 'react';\nimport { createPortal } from 'react-dom';\nimport { ComponentType, AgPromise } from '@ag-grid-community/core';\nimport { AgGridReactLegacy } from \"../legacy/agGridReactLegacy\";\nimport { ReactComponent } from './reactComponent';\nimport { renderToStaticMarkup } from \"react-dom/server\";\nimport generateNewKey from \"./keyGenerator\";\nimport { PortalManager } from './portalManager';\n\n\nexport class NewReactComponent extends ReactComponent {\n    \n    private key: string;\n    private portalKey: string;\n    private oldPortal: ReactPortal | null = null;\n    private reactElement: any;\n    private params: any;\n\n    constructor(reactComponent: any, parentComponent: PortalManager, componentType: ComponentType) {\n        super(reactComponent, parentComponent, componentType);\n\n        this.key = generateNewKey();\n        this.portalKey = generateNewKey();\n    }\n\n    public init(params: any): AgPromise<void> {\n        this.eParentElement = this.createParentElement(params);\n        this.params = params;\n\n        this.createOrUpdatePortal(params);\n\n        return new AgPromise<void>(resolve => this.createReactComponent(resolve));\n    }\n\n    private createOrUpdatePortal(params: any) {\n        if (!this.isStatelessComponent()) {\n            // grab hold of the actual instance created\n            params.ref = (element: any) => {\n                this.componentInstance = element;\n                this.addParentContainerStyleAndClasses();\n            };\n        }\n\n        this.reactElement = createElement(this.reactComponent, { ...params, key: this.key });\n\n        this.portal = createPortal(\n            this.reactElement,\n            this.eParentElement as any,\n            this.portalKey // fixed deltaRowModeRefreshCompRenderer\n        );\n    }\n\n    private createReactComponent(resolve: (value: any) => void) {\n        this.portalManager.mountReactPortal(this.portal!, this, (value: any) => {\n            resolve(value);\n        });\n    }\n\n    public isNullValue(): boolean {\n        return this.valueRenderedIsNull(this.params);\n    }\n\n    rendered(): boolean {\n        return (this.isStatelessComponent() && this.statelessComponentRendered()) ||\n            !!(!this.isStatelessComponent() && this.getFrameworkComponentInstance());\n    }\n\n    private valueRenderedIsNull(params: any): boolean {\n        // we only do this for cellRenderers\n        if (this.componentType.isCellRenderer && !this.componentType.isCellRenderer()) {\n            return false;\n        }\n\n        // we've no way of knowing if a component returns null without rendering it first\n        // so we render it to markup and check the output - if it'll be null we know and won't timeout\n        // waiting for a component that will never be created\n\n        const originalConsoleError = console.error;\n        try {\n            // if a user is doing anything that uses useLayoutEffect (like material ui) then it will throw and we\n            // can't do anything to stop it; this is just a warning and has no effect on anything so just suppress it\n            // for this single operation\n            console.error = () => {\n            };\n            const staticMarkup = renderToStaticMarkup(createElement(this.reactComponent, params));\n            return staticMarkup === '';\n        } catch (ignore) {\n        } finally {\n            console.error = originalConsoleError;\n        }\n\n        return false;\n    }\n\n    /*\n    * fallback methods - these will be invoked if a corresponding instance method is not present\n    * for example if refresh is called and is not available on the component instance, then refreshComponent on this\n    * class will be invoked instead\n    *\n    * Currently only refresh is supported\n    */\n    protected refreshComponent(args: any): void {\n        this.oldPortal = this.portal;\n        this.createOrUpdatePortal(args);\n        this.portalManager.updateReactPortal(this.oldPortal!, this.portal!);\n    }\n\n    protected fallbackMethod(name: string, params: any): any {\n        const method = (this as any)[`${name}Component`];\n        if (!!method) {\n            return method.bind(this)(params);\n        }\n    }\n\n    protected fallbackMethodAvailable(name: string): boolean {\n        const method = (this as any)[`${name}Component`];\n        return !!method;\n    }\n}\n"]},"metadata":{},"sourceType":"script"}