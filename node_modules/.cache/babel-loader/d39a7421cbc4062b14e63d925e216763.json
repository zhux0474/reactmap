{"ast":null,"code":"// @ag-grid-community/react v26.2.0\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar core_1 = require(\"@ag-grid-community/core\");\n\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar legacyReactComponent_1 = require(\"./legacyReactComponent\");\n\nvar agGridColumn_1 = require(\"../shared/agGridColumn\");\n\nvar changeDetectionService_1 = require(\"../shared/changeDetectionService\");\n\nvar newReactComponent_1 = require(\"../shared/newReactComponent\");\n\nvar portalManager_1 = require(\"../shared/portalManager\");\n\nvar AgGridReactLegacy =\n/** @class */\nfunction (_super) {\n  __extends(AgGridReactLegacy, _super);\n\n  function AgGridReactLegacy(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.props = props;\n    _this.changeDetectionService = new changeDetectionService_1.ChangeDetectionService();\n    _this.api = null;\n    _this.destroyed = false;\n    _this.SYNCHRONOUS_CHANGE_PROPERTIES = ['context'];\n    _this.portalManager = new portalManager_1.PortalManager(_this, props.componentWrappingElement, props.maxComponentCreationTimeMs);\n    return _this;\n  }\n\n  AgGridReactLegacy.prototype.render = function () {\n    var _this = this;\n\n    return react_1.default.createElement('div', {\n      style: this.createStyleForDiv(),\n      className: this.props.className,\n      ref: function (e) {\n        _this.eGridDiv = e;\n      }\n    }, this.portalManager.getPortals());\n  };\n\n  AgGridReactLegacy.prototype.createStyleForDiv = function () {\n    return __assign({\n      height: '100%'\n    }, this.props.containerStyle || {});\n  };\n\n  AgGridReactLegacy.prototype.componentDidMount = function () {\n    var modules = this.props.modules || [];\n    var gridParams = {\n      providedBeanInstances: {\n        agGridReact: this,\n        frameworkComponentWrapper: new ReactFrameworkComponentWrapper(this, this.portalManager)\n      },\n      modules: modules\n    };\n    var gridOptions = this.props.gridOptions || {};\n    var children = this.props.children;\n\n    if (agGridColumn_1.AgGridColumn.hasChildColumns(children)) {\n      gridOptions.columnDefs = agGridColumn_1.AgGridColumn.mapChildColumnDefs(children);\n    }\n\n    this.gridOptions = core_1.ComponentUtil.copyAttributesToGridOptions(gridOptions, this.props); // don't need the return value\n\n    new core_1.Grid(this.eGridDiv, this.gridOptions, gridParams);\n    this.api = this.gridOptions.api;\n    this.columnApi = this.gridOptions.columnApi;\n    this.props.setGridApi(this.api, this.columnApi);\n  };\n\n  AgGridReactLegacy.prototype.getStrategyTypeForProp = function (propKey) {\n    if (propKey === 'rowData') {\n      if (this.props.rowDataChangeDetectionStrategy) {\n        return this.props.rowDataChangeDetectionStrategy;\n      } else if (this.isImmutableDataActive()) {\n        return changeDetectionService_1.ChangeDetectionStrategyType.IdentityCheck;\n      }\n    } // all other cases will default to DeepValueCheck\n\n\n    return changeDetectionService_1.ChangeDetectionStrategyType.DeepValueCheck;\n  };\n\n  AgGridReactLegacy.prototype.isImmutableDataActive = function () {\n    return this.props.deltaRowDataMode || this.props.immutableData || this.props.gridOptions && (this.props.gridOptions.deltaRowDataMode || this.props.gridOptions.immutableData);\n  };\n\n  AgGridReactLegacy.prototype.shouldComponentUpdate = function (nextProps) {\n    this.processPropsChanges(this.props, nextProps); // we want full control of the dom, as AG Grid doesn't use React internally,\n    // so for performance reasons we tell React we don't need render called after\n    // property changes.\n\n    return false;\n  };\n\n  AgGridReactLegacy.prototype.componentDidUpdate = function (prevProps) {\n    this.processPropsChanges(prevProps, this.props);\n  };\n\n  AgGridReactLegacy.prototype.processPropsChanges = function (prevProps, nextProps) {\n    var changes = {};\n    this.extractGridPropertyChanges(prevProps, nextProps, changes);\n    this.extractDeclarativeColDefChanges(nextProps, changes);\n    this.processSynchronousChanges(changes);\n    this.processAsynchronousChanges(changes);\n  };\n\n  AgGridReactLegacy.prototype.extractDeclarativeColDefChanges = function (nextProps, changes) {\n    // if columnDefs are provided on gridOptions we use those - you can't combine both\n    // we also skip if columnDefs are provided as a prop directly on AgGridReact\n    if (this.props.gridOptions && this.props.gridOptions.columnDefs || this.props.columnDefs) {\n      return;\n    }\n\n    var debugLogging = !!nextProps.debug;\n    var propKey = 'columnDefs';\n    var currentColDefs = this.gridOptions.columnDefs;\n\n    if (agGridColumn_1.AgGridColumn.hasChildColumns(nextProps.children)) {\n      var detectionStrategy = this.changeDetectionService.getStrategy(this.getStrategyTypeForProp(propKey));\n      var newColDefs = agGridColumn_1.AgGridColumn.mapChildColumnDefs(nextProps.children);\n\n      if (!detectionStrategy.areEqual(currentColDefs, newColDefs)) {\n        if (debugLogging) {\n          console.log(\"agGridReact: colDefs definitions changed\");\n        }\n\n        changes[propKey] = {\n          previousValue: currentColDefs,\n          currentValue: newColDefs\n        };\n      }\n    } else if (currentColDefs && currentColDefs.length > 0) {\n      changes[propKey] = {\n        previousValue: currentColDefs,\n        currentValue: []\n      };\n    }\n  };\n\n  AgGridReactLegacy.prototype.extractGridPropertyChanges = function (prevProps, nextProps, changes) {\n    var _this = this;\n\n    var debugLogging = !!nextProps.debug;\n    Object.keys(nextProps).forEach(function (propKey) {\n      if (core_1._.includes(core_1.ComponentUtil.ALL_PROPERTIES, propKey)) {\n        var changeDetectionStrategy = _this.changeDetectionService.getStrategy(_this.getStrategyTypeForProp(propKey));\n\n        if (!changeDetectionStrategy.areEqual(prevProps[propKey], nextProps[propKey])) {\n          if (debugLogging) {\n            console.log(\"agGridReact: [\" + propKey + \"] property changed\");\n          }\n\n          changes[propKey] = {\n            previousValue: prevProps[propKey],\n            currentValue: nextProps[propKey]\n          };\n        }\n      }\n    });\n    core_1.ComponentUtil.getEventCallbacks().forEach(function (funcName) {\n      if (prevProps[funcName] !== nextProps[funcName]) {\n        if (debugLogging) {\n          console.log(\"agGridReact: [\" + funcName + \"] event callback changed\");\n        }\n\n        changes[funcName] = {\n          previousValue: prevProps[funcName],\n          currentValue: nextProps[funcName]\n        };\n      }\n    });\n  };\n\n  AgGridReactLegacy.prototype.componentWillUnmount = function () {\n    if (this.api) {\n      this.api.destroy();\n      this.api = null;\n    }\n\n    this.destroyed = true;\n    this.portalManager.destroy();\n  };\n\n  AgGridReactLegacy.prototype.isDisableStaticMarkup = function () {\n    return this.props.disableStaticMarkup === true;\n  };\n\n  AgGridReactLegacy.prototype.isLegacyComponentRendering = function () {\n    return this.props.legacyComponentRendering === true;\n  };\n\n  AgGridReactLegacy.prototype.processSynchronousChanges = function (changes) {\n    var asyncChanges = __assign({}, changes);\n\n    if (Object.keys(asyncChanges).length > 0) {\n      var synchronousChanges_1 = {};\n      this.SYNCHRONOUS_CHANGE_PROPERTIES.forEach(function (synchronousChangeProperty) {\n        if (asyncChanges[synchronousChangeProperty]) {\n          synchronousChanges_1[synchronousChangeProperty] = asyncChanges[synchronousChangeProperty];\n          delete asyncChanges[synchronousChangeProperty];\n        }\n      });\n\n      if (Object.keys(synchronousChanges_1).length > 0 && !!this.api) {\n        core_1.ComponentUtil.processOnChange(synchronousChanges_1, this.gridOptions, this.api, this.columnApi);\n      }\n    }\n\n    return asyncChanges;\n  };\n\n  AgGridReactLegacy.prototype.processAsynchronousChanges = function (changes) {\n    var _this = this;\n\n    if (Object.keys(changes).length > 0) {\n      window.setTimeout(function () {\n        // destroyed?\n        if (_this.api) {\n          core_1.ComponentUtil.processOnChange(changes, _this.gridOptions, _this.api, _this.columnApi);\n        }\n      });\n    }\n  };\n\n  AgGridReactLegacy.MAX_COMPONENT_CREATION_TIME_IN_MS = 1000; // a second should be more than enough to instantiate a component\n\n  AgGridReactLegacy.defaultProps = {\n    legacyComponentRendering: false,\n    disableStaticMarkup: false,\n    maxComponentCreationTimeMs: AgGridReactLegacy.MAX_COMPONENT_CREATION_TIME_IN_MS\n  };\n  return AgGridReactLegacy;\n}(react_1.Component);\n\nexports.AgGridReactLegacy = AgGridReactLegacy;\nAgGridReactLegacy.propTypes = {\n  gridOptions: prop_types_1.default.object\n};\naddProperties(core_1.ComponentUtil.getEventCallbacks(), prop_types_1.default.func);\naddProperties(core_1.ComponentUtil.BOOLEAN_PROPERTIES, prop_types_1.default.bool);\naddProperties(core_1.ComponentUtil.STRING_PROPERTIES, prop_types_1.default.string);\naddProperties(core_1.ComponentUtil.OBJECT_PROPERTIES, prop_types_1.default.object);\naddProperties(core_1.ComponentUtil.ARRAY_PROPERTIES, prop_types_1.default.array);\naddProperties(core_1.ComponentUtil.NUMBER_PROPERTIES, prop_types_1.default.number);\naddProperties(core_1.ComponentUtil.FUNCTION_PROPERTIES, prop_types_1.default.func);\n\nfunction addProperties(listOfProps, propType) {\n  listOfProps.forEach(function (propKey) {\n    AgGridReactLegacy[propKey] = propType;\n  });\n}\n\nvar ReactFrameworkComponentWrapper =\n/** @class */\nfunction (_super) {\n  __extends(ReactFrameworkComponentWrapper, _super);\n\n  function ReactFrameworkComponentWrapper(agGridReact, portalManager) {\n    var _this = _super.call(this) || this;\n\n    _this.agGridReact = agGridReact;\n    _this.portalManager = portalManager;\n    return _this;\n  }\n\n  ReactFrameworkComponentWrapper.prototype.createWrapper = function (UserReactComponent, componentType) {\n    if (this.agGridReact.isLegacyComponentRendering()) {\n      return new legacyReactComponent_1.LegacyReactComponent(UserReactComponent, this.agGridReact, this.portalManager, componentType);\n    } else {\n      return new newReactComponent_1.NewReactComponent(UserReactComponent, this.portalManager, componentType);\n    }\n  };\n\n  return ReactFrameworkComponentWrapper;\n}(core_1.BaseComponentWrapper);","map":{"version":3,"sources":["/Users/rongxuan/Desktop/reactmap/reactmap/node_modules/@ag-grid-community/react/lib/legacy/legacy/agGridReactLegacy.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,OAAA,CAAA,yBAAA,CAAA;;AAWA,IAAA,YAAA,GAAA,eAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;;AACA,IAAA,OAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,IAAA,sBAAA,GAAA,OAAA,CAAA,wBAAA,CAAA;;AACA,IAAA,cAAA,GAAA,OAAA,CAAA,wBAAA,CAAA;;AACA,IAAA,wBAAA,GAAA,OAAA,CAAA,kCAAA,CAAA;;AAEA,IAAA,mBAAA,GAAA,OAAA,CAAA,6BAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,yBAAA,CAAA;;AAEA,IAAA,iBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAuC,EAAA,SAAA,CAAA,iBAAA,EAAA,MAAA,CAAA;;AA2BnC,WAAA,iBAAA,CAAmB,KAAnB,EAA0C;AAA1C,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,KAAN,KAAY,IADhB;;AAAmB,IAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AAbnB,IAAA,KAAA,CAAA,sBAAA,GAAyB,IAAI,wBAAA,CAAA,sBAAJ,EAAzB;AAEA,IAAA,KAAA,CAAA,GAAA,GAAsB,IAAtB;AAKA,IAAA,KAAA,CAAA,SAAA,GAAY,KAAZ;AAIS,IAAA,KAAA,CAAA,6BAAA,GAAgC,CAAC,SAAD,CAAhC;AAKL,IAAA,KAAI,CAAC,aAAL,GAAqB,IAAI,eAAA,CAAA,aAAJ,CAAkB,KAAlB,EAAwB,KAAK,CAAC,wBAA9B,EAAwD,KAAK,CAAC,0BAA9D,CAArB;;AACH;;AAED,EAAA,iBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,WAAO,OAAA,CAAA,OAAA,CAAM,aAAN,CAAoB,KAApB,EAA2B;AAC9B,MAAA,KAAK,EAAE,KAAK,iBAAL,EADuB;AAE9B,MAAA,SAAS,EAAE,KAAK,KAAL,CAAW,SAFQ;AAG9B,MAAA,GAAG,EAAE,UAAC,CAAD,EAAe;AAChB,QAAA,KAAI,CAAC,QAAL,GAAgB,CAAhB;AACH;AAL6B,KAA3B,EAMJ,KAAK,aAAL,CAAmB,UAAnB,EANI,CAAP;AAOH,GARD;;AAUA,EAAA,iBAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACI,WAAA,QAAA,CAAA;AACI,MAAA,MAAM,EAAE;AADZ,KAAA,EAEQ,KAAK,KAAL,CAAW,cAAX,IAA6B,EAFrC,CAAA;AAIH,GALD;;AAOA,EAAA,iBAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACI,QAAM,OAAO,GAAG,KAAK,KAAL,CAAW,OAAX,IAAsB,EAAtC;AACA,QAAM,UAAU,GAAG;AACf,MAAA,qBAAqB,EAAE;AACnB,QAAA,WAAW,EAAE,IADM;AAEnB,QAAA,yBAAyB,EAAE,IAAI,8BAAJ,CAAmC,IAAnC,EAAyC,KAAK,aAA9C;AAFR,OADR;AAKf,MAAA,OAAO,EAAA;AALQ,KAAnB;AAQA,QAAM,WAAW,GAAG,KAAK,KAAL,CAAW,WAAX,IAA0B,EAA9C;AACO,QAAA,QAAA,GAAA,KAAA,KAAA,CAAA,QAAA;;AAEP,QAAI,cAAA,CAAA,YAAA,CAAa,eAAb,CAA6B,QAA7B,CAAJ,EAA4C;AACxC,MAAA,WAAW,CAAC,UAAZ,GAAyB,cAAA,CAAA,YAAA,CAAa,kBAAb,CAAgC,QAAhC,CAAzB;AACH;;AAED,SAAK,WAAL,GAAmB,MAAA,CAAA,aAAA,CAAc,2BAAd,CAA0C,WAA1C,EAAuD,KAAK,KAA5D,CAAnB,CAjBJ,CAmBI;;AACA,QAAI,MAAA,CAAA,IAAJ,CAAS,KAAK,QAAd,EAAwB,KAAK,WAA7B,EAA0C,UAA1C;AAEA,SAAK,GAAL,GAAW,KAAK,WAAL,CAAiB,GAA5B;AACA,SAAK,SAAL,GAAiB,KAAK,WAAL,CAAiB,SAAlC;AAEA,SAAK,KAAL,CAAW,UAAX,CAAuB,KAAK,GAA5B,EAAiC,KAAK,SAAtC;AACH,GA1BD;;AA4BQ,EAAA,iBAAA,CAAA,SAAA,CAAA,sBAAA,GAAR,UAA+B,OAA/B,EAA8C;AAC1C,QAAI,OAAO,KAAK,SAAhB,EAA2B;AACvB,UAAI,KAAK,KAAL,CAAW,8BAAf,EAA+C;AAC3C,eAAO,KAAK,KAAL,CAAW,8BAAlB;AACH,OAFD,MAEO,IAAI,KAAK,qBAAL,EAAJ,EAAkC;AACrC,eAAO,wBAAA,CAAA,2BAAA,CAA4B,aAAnC;AACH;AACJ,KAPyC,CAS1C;;;AACA,WAAO,wBAAA,CAAA,2BAAA,CAA4B,cAAnC;AACH,GAXO;;AAaA,EAAA,iBAAA,CAAA,SAAA,CAAA,qBAAA,GAAR,YAAA;AACI,WAAQ,KAAK,KAAL,CAAW,gBAAX,IAA+B,KAAK,KAAL,CAAW,aAA3C,IACF,KAAK,KAAL,CAAW,WAAX,KAA2B,KAAK,KAAL,CAAW,WAAX,CAAuB,gBAAvB,IAA2C,KAAK,KAAL,CAAW,WAAX,CAAuB,aAA7F,CADL;AAEH,GAHO;;AAKR,EAAA,iBAAA,CAAA,SAAA,CAAA,qBAAA,GAAA,UAAsB,SAAtB,EAAoC;AAChC,SAAK,mBAAL,CAAyB,KAAK,KAA9B,EAAqC,SAArC,EADgC,CAGhC;AACA;AACA;;AACA,WAAO,KAAP;AACH,GAPD;;AASA,EAAA,iBAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,UAAmB,SAAnB,EAAiC;AAC7B,SAAK,mBAAL,CAAyB,SAAzB,EAAoC,KAAK,KAAzC;AACH,GAFD;;AAIA,EAAA,iBAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,UAAoB,SAApB,EAAoC,SAApC,EAAkD;AAC9C,QAAM,OAAO,GAAG,EAAhB;AAEA,SAAK,0BAAL,CAAgC,SAAhC,EAA2C,SAA3C,EAAsD,OAAtD;AACA,SAAK,+BAAL,CAAqC,SAArC,EAAgD,OAAhD;AAEA,SAAK,yBAAL,CAA+B,OAA/B;AACA,SAAK,0BAAL,CAAgC,OAAhC;AACH,GARD;;AAUQ,EAAA,iBAAA,CAAA,SAAA,CAAA,+BAAA,GAAR,UAAwC,SAAxC,EAAwD,OAAxD,EAAoE;AAChE;AACA;AACA,QAAK,KAAK,KAAL,CAAW,WAAX,IAA0B,KAAK,KAAL,CAAW,WAAX,CAAuB,UAAlD,IAAiE,KAAK,KAAL,CAAW,UAAhF,EAA4F;AACxF;AACH;;AAED,QAAM,YAAY,GAAG,CAAC,CAAC,SAAS,CAAC,KAAjC;AACA,QAAM,OAAO,GAAG,YAAhB;AACA,QAAM,cAAc,GAAG,KAAK,WAAL,CAAiB,UAAxC;;AAEA,QAAI,cAAA,CAAA,YAAA,CAAa,eAAb,CAA6B,SAAS,CAAC,QAAvC,CAAJ,EAAsD;AAClD,UAAM,iBAAiB,GAAG,KAAK,sBAAL,CAA4B,WAA5B,CAAwC,KAAK,sBAAL,CAA4B,OAA5B,CAAxC,CAA1B;AACA,UAAM,UAAU,GAAG,cAAA,CAAA,YAAA,CAAa,kBAAb,CAAgC,SAAS,CAAC,QAA1C,CAAnB;;AAEA,UAAI,CAAC,iBAAiB,CAAC,QAAlB,CAA2B,cAA3B,EAA2C,UAA3C,CAAL,EAA6D;AACzD,YAAI,YAAJ,EAAkB;AACd,UAAA,OAAO,CAAC,GAAR,CAAY,0CAAZ;AACH;;AAED,QAAA,OAAO,CAAC,OAAD,CAAP,GACI;AACI,UAAA,aAAa,EAAE,cADnB;AAEI,UAAA,YAAY,EAAE;AAFlB,SADJ;AAKH;AACJ,KAfD,MAeO,IAAI,cAAc,IAAI,cAAc,CAAC,MAAf,GAAwB,CAA9C,EAAiD;AACpD,MAAA,OAAO,CAAC,OAAD,CAAP,GACI;AACI,QAAA,aAAa,EAAE,cADnB;AAEI,QAAA,YAAY,EAAE;AAFlB,OADJ;AAKH;AACJ,GAjCO;;AAmCA,EAAA,iBAAA,CAAA,SAAA,CAAA,0BAAA,GAAR,UAAmC,SAAnC,EAAmD,SAAnD,EAAmE,OAAnE,EAA+E;AAA/E,QAAA,KAAA,GAAA,IAAA;;AACI,QAAM,YAAY,GAAG,CAAC,CAAC,SAAS,CAAC,KAAjC;AAEA,IAAA,MAAM,CAAC,IAAP,CAAY,SAAZ,EAAuB,OAAvB,CAA+B,UAAA,OAAA,EAAO;AAClC,UAAI,MAAA,CAAA,CAAA,CAAE,QAAF,CAAW,MAAA,CAAA,aAAA,CAAc,cAAzB,EAAyC,OAAzC,CAAJ,EAAuD;AACnD,YAAM,uBAAuB,GAAG,KAAI,CAAC,sBAAL,CAA4B,WAA5B,CAAwC,KAAI,CAAC,sBAAL,CAA4B,OAA5B,CAAxC,CAAhC;;AAEA,YAAI,CAAC,uBAAuB,CAAC,QAAxB,CAAiC,SAAS,CAAC,OAAD,CAA1C,EAAqD,SAAS,CAAC,OAAD,CAA9D,CAAL,EAA+E;AAC3E,cAAI,YAAJ,EAAkB;AACd,YAAA,OAAO,CAAC,GAAR,CAAY,mBAAiB,OAAjB,GAAwB,oBAApC;AACH;;AAED,UAAA,OAAO,CAAC,OAAD,CAAP,GAAmB;AACf,YAAA,aAAa,EAAE,SAAS,CAAC,OAAD,CADT;AAEf,YAAA,YAAY,EAAE,SAAS,CAAC,OAAD;AAFR,WAAnB;AAIH;AACJ;AACJ,KAfD;AAiBA,IAAA,MAAA,CAAA,aAAA,CAAc,iBAAd,GAAkC,OAAlC,CAA0C,UAAA,QAAA,EAAQ;AAC9C,UAAI,SAAS,CAAC,QAAD,CAAT,KAAwB,SAAS,CAAC,QAAD,CAArC,EAAiD;AAC7C,YAAI,YAAJ,EAAkB;AACd,UAAA,OAAO,CAAC,GAAR,CAAY,mBAAiB,QAAjB,GAAyB,0BAArC;AACH;;AAED,QAAA,OAAO,CAAC,QAAD,CAAP,GAAoB;AAChB,UAAA,aAAa,EAAE,SAAS,CAAC,QAAD,CADR;AAEhB,UAAA,YAAY,EAAE,SAAS,CAAC,QAAD;AAFP,SAApB;AAIH;AACJ,KAXD;AAYH,GAhCO;;AAkCR,EAAA,iBAAA,CAAA,SAAA,CAAA,oBAAA,GAAA,YAAA;AACI,QAAI,KAAK,GAAT,EAAc;AACV,WAAK,GAAL,CAAS,OAAT;AACA,WAAK,GAAL,GAAW,IAAX;AACH;;AAED,SAAK,SAAL,GAAiB,IAAjB;AACA,SAAK,aAAL,CAAmB,OAAnB;AACH,GARD;;AAUO,EAAA,iBAAA,CAAA,SAAA,CAAA,qBAAA,GAAP,YAAA;AACI,WAAO,KAAK,KAAL,CAAW,mBAAX,KAAmC,IAA1C;AACH,GAFM;;AAIA,EAAA,iBAAA,CAAA,SAAA,CAAA,0BAAA,GAAP,YAAA;AACI,WAAO,KAAK,KAAL,CAAW,wBAAX,KAAwC,IAA/C;AACH,GAFM;;AAIC,EAAA,iBAAA,CAAA,SAAA,CAAA,yBAAA,GAAR,UAAkC,OAAlC,EAA8C;AAC1C,QAAM,YAAY,GAAA,QAAA,CAAA,EAAA,EAAO,OAAP,CAAlB;;AACA,QAAI,MAAM,CAAC,IAAP,CAAY,YAAZ,EAA0B,MAA1B,GAAmC,CAAvC,EAA0C;AACtC,UAAM,oBAAkB,GAA2B,EAAnD;AACA,WAAK,6BAAL,CAAmC,OAAnC,CAA2C,UAAC,yBAAD,EAAkC;AACzE,YAAI,YAAY,CAAC,yBAAD,CAAhB,EAA6C;AACzC,UAAA,oBAAkB,CAAC,yBAAD,CAAlB,GAAgD,YAAY,CAAC,yBAAD,CAA5D;AACA,iBAAO,YAAY,CAAC,yBAAD,CAAnB;AACH;AACJ,OALD;;AAOA,UAAG,MAAM,CAAC,IAAP,CAAY,oBAAZ,EAAgC,MAAhC,GAAyC,CAAzC,IAA8C,CAAC,CAAC,KAAK,GAAxD,EAA6D;AACzD,QAAA,MAAA,CAAA,aAAA,CAAc,eAAd,CAA8B,oBAA9B,EAAkD,KAAK,WAAvD,EAAoE,KAAK,GAAzE,EAA8E,KAAK,SAAnF;AACH;AACJ;;AACD,WAAO,YAAP;AACH,GAhBO;;AAkBA,EAAA,iBAAA,CAAA,SAAA,CAAA,0BAAA,GAAR,UAAmC,OAAnC,EAA8C;AAA9C,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,MAAM,CAAC,IAAP,CAAY,OAAZ,EAAqB,MAArB,GAA8B,CAAlC,EAAqC;AACjC,MAAA,MAAM,CAAC,UAAP,CAAkB,YAAA;AACd;AACA,YAAI,KAAI,CAAC,GAAT,EAAc;AACV,UAAA,MAAA,CAAA,aAAA,CAAc,eAAd,CAA8B,OAA9B,EAAuC,KAAI,CAAC,WAA5C,EAAyD,KAAI,CAAC,GAA9D,EAAmE,KAAI,CAAC,SAAxE;AACH;AACJ,OALD;AAMH;AACJ,GATO;;AA9NO,EAAA,iBAAA,CAAA,iCAAA,GAA4C,IAA5C,CAFnB,CAEqE;;AAI1D,EAAA,iBAAA,CAAA,YAAA,GAAe;AAClB,IAAA,wBAAwB,EAAE,KADR;AAElB,IAAA,mBAAmB,EAAE,KAFH;AAGlB,IAAA,0BAA0B,EAAE,iBAAiB,CAAC;AAH5B,GAAf;AAoOX,SAAA,iBAAA;AAAC,CA1OD,CAAuC,OAAA,CAAA,SAAvC,CAAA;;AAAa,OAAA,CAAA,iBAAA,GAAA,iBAAA;AA4Ob,iBAAiB,CAAC,SAAlB,GAA8B;AAC1B,EAAA,WAAW,EAAE,YAAA,CAAA,OAAA,CAAU;AADG,CAA9B;AAIA,aAAa,CAAC,MAAA,CAAA,aAAA,CAAc,iBAAd,EAAD,EAAoC,YAAA,CAAA,OAAA,CAAU,IAA9C,CAAb;AACA,aAAa,CAAC,MAAA,CAAA,aAAA,CAAc,kBAAf,EAAmC,YAAA,CAAA,OAAA,CAAU,IAA7C,CAAb;AACA,aAAa,CAAC,MAAA,CAAA,aAAA,CAAc,iBAAf,EAAkC,YAAA,CAAA,OAAA,CAAU,MAA5C,CAAb;AACA,aAAa,CAAC,MAAA,CAAA,aAAA,CAAc,iBAAf,EAAkC,YAAA,CAAA,OAAA,CAAU,MAA5C,CAAb;AACA,aAAa,CAAC,MAAA,CAAA,aAAA,CAAc,gBAAf,EAAiC,YAAA,CAAA,OAAA,CAAU,KAA3C,CAAb;AACA,aAAa,CAAC,MAAA,CAAA,aAAA,CAAc,iBAAf,EAAkC,YAAA,CAAA,OAAA,CAAU,MAA5C,CAAb;AACA,aAAa,CAAC,MAAA,CAAA,aAAA,CAAc,mBAAf,EAAoC,YAAA,CAAA,OAAA,CAAU,IAA9C,CAAb;;AAEA,SAAS,aAAT,CAAuB,WAAvB,EAA8C,QAA9C,EAA2D;AACvD,EAAA,WAAW,CAAC,OAAZ,CAAoB,UAAA,OAAA,EAAO;AACtB,IAAA,iBAAyB,CAAC,OAAD,CAAzB,GAAqC,QAArC;AACJ,GAFD;AAGH;;AAED,IAAA,8BAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA6C,EAAA,SAAA,CAAA,8BAAA,EAAA,MAAA,CAAA;;AAKzC,WAAA,8BAAA,CAAY,WAAZ,EAA4C,aAA5C,EAAwE;AAAxE,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAEI,IAAA,KAAI,CAAC,WAAL,GAAmB,WAAnB;AACA,IAAA,KAAI,CAAC,aAAL,GAAqB,aAArB;;AACH;;AAED,EAAA,8BAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,kBAAd,EAAmD,aAAnD,EAA+E;AAC3E,QAAI,KAAK,WAAL,CAAiB,0BAAjB,EAAJ,EAAoD;AAChD,aAAO,IAAI,sBAAA,CAAA,oBAAJ,CAAyB,kBAAzB,EAA6C,KAAK,WAAlD,EAA+D,KAAK,aAApE,EAAmF,aAAnF,CAAP;AACH,KAFD,MAEO;AACH,aAAO,IAAI,mBAAA,CAAA,iBAAJ,CAAsB,kBAAtB,EAA0C,KAAK,aAA/C,EAA8D,aAA9D,CAAP;AACH;AACJ,GAND;;AAOJ,SAAA,8BAAA;AAAC,CAlBD,CAA6C,MAAA,CAAA,oBAA7C,CAAA","sourcesContent":["import {\n    BaseComponentWrapper,\n    ColumnApi,\n    ComponentType,\n    ComponentUtil,\n    FrameworkComponentWrapper,\n    Grid,\n    GridApi,\n    GridOptions,\n    WrappableInterface, _\n} from '@ag-grid-community/core';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { LegacyReactComponent } from './legacyReactComponent';\nimport { AgGridColumn } from '../shared/agGridColumn';\nimport { ChangeDetectionService, ChangeDetectionStrategyType } from '../shared/changeDetectionService';\nimport { AgGridReactProps } from '../shared/interfaces';\nimport { NewReactComponent } from '../shared/newReactComponent';\nimport { PortalManager } from '../shared/portalManager';\n\nexport class AgGridReactLegacy extends Component<AgGridReactProps, {}> {\n\n    private static MAX_COMPONENT_CREATION_TIME_IN_MS: number = 1000; // a second should be more than enough to instantiate a component\n\n    static propTypes: any;\n\n    static defaultProps = {\n        legacyComponentRendering: false,\n        disableStaticMarkup: false,\n        maxComponentCreationTimeMs: AgGridReactLegacy.MAX_COMPONENT_CREATION_TIME_IN_MS\n    };\n\n    gridOptions!: GridOptions;\n\n    changeDetectionService = new ChangeDetectionService();\n\n    api: GridApi | null = null;\n    columnApi!: ColumnApi;\n\n    portalManager: PortalManager;\n\n    destroyed = false;\n\n    protected eGridDiv!: HTMLElement;\n\n    readonly SYNCHRONOUS_CHANGE_PROPERTIES = ['context']\n\n    constructor(public props: AgGridReactProps) {\n        super(props);\n\n        this.portalManager = new PortalManager(this, props.componentWrappingElement, props.maxComponentCreationTimeMs);\n    }\n\n    render() {\n        return React.createElement('div', {\n            style: this.createStyleForDiv(),\n            className: this.props.className,\n            ref: (e: HTMLElement) => {\n                this.eGridDiv = e;\n            }\n        }, this.portalManager.getPortals());\n    }\n\n    createStyleForDiv() {\n        return {\n            height: '100%',\n            ...(this.props.containerStyle || {})\n        };\n    }\n\n    componentDidMount() {\n        const modules = this.props.modules || [];\n        const gridParams = {\n            providedBeanInstances: {\n                agGridReact: this,\n                frameworkComponentWrapper: new ReactFrameworkComponentWrapper(this, this.portalManager)\n            },\n            modules\n        };\n\n        const gridOptions = this.props.gridOptions || {};\n        const {children} = this.props;\n\n        if (AgGridColumn.hasChildColumns(children)) {\n            gridOptions.columnDefs = AgGridColumn.mapChildColumnDefs(children);\n        }\n\n        this.gridOptions = ComponentUtil.copyAttributesToGridOptions(gridOptions, this.props);\n\n        // don't need the return value\n        new Grid(this.eGridDiv, this.gridOptions, gridParams);\n\n        this.api = this.gridOptions.api!;\n        this.columnApi = this.gridOptions.columnApi!;\n\n        this.props.setGridApi!(this.api, this.columnApi);\n    }\n\n    private getStrategyTypeForProp(propKey: string) {\n        if (propKey === 'rowData') {\n            if (this.props.rowDataChangeDetectionStrategy) {\n                return this.props.rowDataChangeDetectionStrategy;\n            } else if (this.isImmutableDataActive()) {\n                return ChangeDetectionStrategyType.IdentityCheck;\n            }\n        }\n\n        // all other cases will default to DeepValueCheck\n        return ChangeDetectionStrategyType.DeepValueCheck;\n    }\n\n    private isImmutableDataActive() {\n        return (this.props.deltaRowDataMode || this.props.immutableData) ||\n            (this.props.gridOptions && (this.props.gridOptions.deltaRowDataMode || this.props.gridOptions.immutableData));\n    }\n\n    shouldComponentUpdate(nextProps: any) {\n        this.processPropsChanges(this.props, nextProps);\n\n        // we want full control of the dom, as AG Grid doesn't use React internally,\n        // so for performance reasons we tell React we don't need render called after\n        // property changes.\n        return false;\n    }\n\n    componentDidUpdate(prevProps: any) {\n        this.processPropsChanges(prevProps, this.props);\n    }\n\n    processPropsChanges(prevProps: any, nextProps: any) {\n        const changes = {};\n\n        this.extractGridPropertyChanges(prevProps, nextProps, changes);\n        this.extractDeclarativeColDefChanges(nextProps, changes);\n\n        this.processSynchronousChanges(changes);\n        this.processAsynchronousChanges(changes);\n    }\n\n    private extractDeclarativeColDefChanges(nextProps: any, changes: any) {\n        // if columnDefs are provided on gridOptions we use those - you can't combine both\n        // we also skip if columnDefs are provided as a prop directly on AgGridReact\n        if ((this.props.gridOptions && this.props.gridOptions.columnDefs) || this.props.columnDefs) {\n            return;\n        }\n\n        const debugLogging = !!nextProps.debug;\n        const propKey = 'columnDefs';\n        const currentColDefs = this.gridOptions.columnDefs;\n\n        if (AgGridColumn.hasChildColumns(nextProps.children)) {\n            const detectionStrategy = this.changeDetectionService.getStrategy(this.getStrategyTypeForProp(propKey));\n            const newColDefs = AgGridColumn.mapChildColumnDefs(nextProps.children);\n\n            if (!detectionStrategy.areEqual(currentColDefs, newColDefs)) {\n                if (debugLogging) {\n                    console.log(`agGridReact: colDefs definitions changed`);\n                }\n\n                changes[propKey] =\n                    {\n                        previousValue: currentColDefs,\n                        currentValue: newColDefs\n                    };\n            }\n        } else if (currentColDefs && currentColDefs.length > 0) {\n            changes[propKey] =\n                {\n                    previousValue: currentColDefs,\n                    currentValue: []\n                };\n        }\n    }\n\n    private extractGridPropertyChanges(prevProps: any, nextProps: any, changes: any) {\n        const debugLogging = !!nextProps.debug;\n\n        Object.keys(nextProps).forEach(propKey => {\n            if (_.includes(ComponentUtil.ALL_PROPERTIES, propKey)) {\n                const changeDetectionStrategy = this.changeDetectionService.getStrategy(this.getStrategyTypeForProp(propKey));\n\n                if (!changeDetectionStrategy.areEqual(prevProps[propKey], nextProps[propKey])) {\n                    if (debugLogging) {\n                        console.log(`agGridReact: [${propKey}] property changed`);\n                    }\n\n                    changes[propKey] = {\n                        previousValue: prevProps[propKey],\n                        currentValue: nextProps[propKey]\n                    };\n                }\n            }\n        });\n\n        ComponentUtil.getEventCallbacks().forEach(funcName => {\n            if (prevProps[funcName] !== nextProps[funcName]) {\n                if (debugLogging) {\n                    console.log(`agGridReact: [${funcName}] event callback changed`);\n                }\n\n                changes[funcName] = {\n                    previousValue: prevProps[funcName],\n                    currentValue: nextProps[funcName]\n                };\n            }\n        });\n    }\n\n    componentWillUnmount() {\n        if (this.api) {\n            this.api.destroy();\n            this.api = null;\n        }\n\n        this.destroyed = true;\n        this.portalManager.destroy();\n    }\n\n    public isDisableStaticMarkup(): boolean {\n        return this.props.disableStaticMarkup === true;\n    }\n\n    public isLegacyComponentRendering(): boolean {\n        return this.props.legacyComponentRendering === true;\n    }\n\n    private processSynchronousChanges(changes: any): {} {\n        const asyncChanges = {...changes};\n        if (Object.keys(asyncChanges).length > 0) {\n            const synchronousChanges: { [key: string]: any } = {};\n            this.SYNCHRONOUS_CHANGE_PROPERTIES.forEach((synchronousChangeProperty: string) => {\n                if (asyncChanges[synchronousChangeProperty]) {\n                    synchronousChanges[synchronousChangeProperty] = asyncChanges[synchronousChangeProperty];\n                    delete asyncChanges[synchronousChangeProperty];\n                }\n            })\n\n            if(Object.keys(synchronousChanges).length > 0 && !!this.api) {\n                ComponentUtil.processOnChange(synchronousChanges, this.gridOptions, this.api, this.columnApi)\n            }\n        }\n        return asyncChanges;\n    }\n\n    private processAsynchronousChanges(changes: {}) {\n        if (Object.keys(changes).length > 0) {\n            window.setTimeout(() => {\n                // destroyed?\n                if (this.api) {\n                    ComponentUtil.processOnChange(changes, this.gridOptions, this.api, this.columnApi)\n                }\n            });\n        }\n    }\n}\n\nAgGridReactLegacy.propTypes = {\n    gridOptions: PropTypes.object\n};\n\naddProperties(ComponentUtil.getEventCallbacks(), PropTypes.func);\naddProperties(ComponentUtil.BOOLEAN_PROPERTIES, PropTypes.bool);\naddProperties(ComponentUtil.STRING_PROPERTIES, PropTypes.string);\naddProperties(ComponentUtil.OBJECT_PROPERTIES, PropTypes.object);\naddProperties(ComponentUtil.ARRAY_PROPERTIES, PropTypes.array);\naddProperties(ComponentUtil.NUMBER_PROPERTIES, PropTypes.number);\naddProperties(ComponentUtil.FUNCTION_PROPERTIES, PropTypes.func);\n\nfunction addProperties(listOfProps: string[], propType: any) {\n    listOfProps.forEach(propKey => {\n        (AgGridReactLegacy as any)[propKey] = propType;\n    });\n}\n\nclass ReactFrameworkComponentWrapper extends BaseComponentWrapper<WrappableInterface> implements FrameworkComponentWrapper {\n\n    private readonly agGridReact!: AgGridReactLegacy;\n    private readonly portalManager!: PortalManager;\n\n    constructor(agGridReact: AgGridReactLegacy, portalManager: PortalManager) {\n        super();\n        this.agGridReact = agGridReact;\n        this.portalManager = portalManager;\n    }\n\n    createWrapper(UserReactComponent: { new(): any; }, componentType: ComponentType): WrappableInterface {\n        if (this.agGridReact.isLegacyComponentRendering())  {\n            return new LegacyReactComponent(UserReactComponent, this.agGridReact, this.portalManager, componentType);\n        } else {\n            return new NewReactComponent(UserReactComponent, this.portalManager, componentType);\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"script"}